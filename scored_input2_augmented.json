[
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v50/tests/carts/test_create_cart_item_form.py:CartItemCreateFormTests.test_cart_item_create_form__with_prepaid_account_limit_exceeded",
    "text": "def test_cart_item_create_form__with_prepaid_account_limit_exceeded(self) -> None:\n    \"\"\"\n    Given a user with:\n        a cart\n        a prepaid account with (settings.PREPAID_ACCOUNT_MAXIMUM_AMOUNT - 1)\n    When I serialize a credit pack of 11€\n    Then I get an exception indicating that the total of prepaid account + credit pack value exceed the limit\n    \"\"\"\n    cart = self.any_cart()\n    personal_prepaid_account = cart.user.personal_prepaid_account\n    personal_prepaid_account.credits = (settings.PREPAID_ACCOUNT_MAXIMUM_AMOUNT - 1) * 100\n    personal_prepaid_account.save()\n    deal_credits_pack = self.any_deal(profile=deal_profiles.credits_pack)\n    data = {\"reference\": deal_credits_pack.pk, \"quantity\": 1, \"item_type\": create_cart_item_types.deal}\n    form = CartItemCreateForm(data=data, cart=cart)\n    assert_that(form.is_valid(), is_(False))\n    assert_that(\n        form.errors_as_detail_status(),\n        has_entry(\"detail\", CartItemCreateForm.error_messages[CartItemCreateForm.PREPAID_ACCOUNT_EXCEED_LIMIT]),\n        has_entry(\"status\", CartItemCreateForm.PREPAID_ACCOUNT_EXCEED_LIMIT),\n    )",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 6.0
    },
    "id": 1,
    "score": "3",
    "annotator": 1,
    "annotation_id": 1,
    "created_at": "2025-10-21T13:35:13.968992Z",
    "updated_at": "2025-10-21T13:36:49.350166Z",
    "lead_time": 135.579,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/replication/tests/test_serializers.py:RequestSerializerTests.test_serializer__reference_to_be_used",
    "text": "def test_serializer__reference_to_be_used(self) -> None:\n    request = self.any_request(state=request_states.initial)\n    assert request.reference_to_be_used\n    serializer = RequestSerializer(request)\n    assert_that(\n        serializer.data[\"references\"],\n        has_item(has_entries({\"type\": reference_types.to_be_used, \"value\": not_none()})),\n    )",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 2,
    "score": "2",
    "annotator": 1,
    "annotation_id": 2,
    "created_at": "2025-10-21T13:37:35.929458Z",
    "updated_at": "2025-10-21T13:37:35.929478Z",
    "lead_time": 43.673,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v80/tests/stations/test_api_station_details.py:StationDetailsAPITestCase.test_formattedtimefield",
    "text": "def test_formattedtimefield(self) -> None:\n    timefield = \"06:00\"\n    assert_that(\n        FormattedTimeField().to_representation(timefield),\n        is_(\n            (FormattedTimeField().to_representation(datetime.strptime(timefield, \"%H:%M\").time())),\n        ),\n    )",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 3,
    "score": "1",
    "annotator": 1,
    "annotation_id": 3,
    "created_at": "2025-10-21T13:39:04.171225Z",
    "updated_at": "2025-10-21T13:39:04.171241Z",
    "lead_time": 88.077,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_orders.py:OrderTestCase.test_order__with_promocode_offered_credit_pack_no_station",
    "text": "def test_order__with_promocode_offered_credit_pack_no_station(self) -> None:\n    \"\"\"\n    Given a offered credit pack order from app\n    When order objects is generated\n    Then order item is not linked to a station\n    \"\"\"\n    user = self.any_user(with_credits=True, credits=10000)\n    order = self.any_order(user=user, profile=order_profiles.credits_pack, with_promocode=True)\n    assert_that(order.orderitem_first.station_pk, is_(none()))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 4,
    "score": "5",
    "annotator": 1,
    "annotation_id": 4,
    "created_at": "2025-10-21T13:39:17.117732Z",
    "updated_at": "2025-10-21T13:39:17.117747Z",
    "lead_time": 12.78,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/mangopay/test_managers.py:MangoPayCardManagerTestCase.test_expired__no_registration_time",
    "text": "def test_expired__no_registration_time(self) -> None:\n    \"\"\"\n    Given a user with a mp card not used created less than 30 mn ago without registration time\n    When I call manager method\n    Then user's card is returned\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal)\n    mangopay_card = user.mangopay_users.first().card\n    mangopay_card._mangopay_card_registration_datetime = None\n    mangopay_card.save()\n\n    expired_cards = MangopayCard.objects.expired_cards()\n\n    assert_that(expired_cards, is_not(empty()))\n    assert_that(len(expired_cards), equal_to(1))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 5,
    "score": "4",
    "annotator": 1,
    "annotation_id": 5,
    "created_at": "2025-10-21T13:39:50.046056Z",
    "updated_at": "2025-10-21T13:39:50.046073Z",
    "lead_time": 32.781,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/dummy/test_order_tl12.py:DummyOrderTL12TestCase.test_tl12",
    "text": "def test_tl12(self) -> None:  # pragma: no cover # noqa: RMS201\n    \"\"\"\n    Given\n        a tl12 program\n        a deal with this program\n        a cart with this deal\n        a checkout with this cart\n    When order is success\n    Then order item has a code length 8\n    \"\"\"\n    washing_program = self.any_washing_program(profile=washing_program_profiles.tl12)\n    deal = self.any_deal(washing_program=washing_program)\n    cart = self.any_cart(deal=deal, state=cart_states.active)\n    checkout = self.any_checkout(cart=cart, state=checkout_states.ordered)\n\n    order = checkout.order\n\n    assert_that(order.status, is_(order_states.success))\n    order_item = order.orderitem_set.first()\n    assert_that(order_item.coupon_code, has_length(8))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 8.0
    },
    "id": 6,
    "score": "1",
    "annotator": 1,
    "annotation_id": 6,
    "created_at": "2025-10-21T13:39:59.612234Z",
    "updated_at": "2025-10-21T13:39:59.612246Z",
    "lead_time": 9.418,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_api_codes_transaction.py:CodeTransactionTests.test_add__unauthenticated",
    "text": "def test_add__unauthenticated(self) -> None:\n    self.client = APIClient()\n    hss = self.any_hss()\n    self.when_i_add_code_for_hss(\n        hss_pk=hss.pk,\n        code=\"9999\",\n        label=\"RippleTests1\",\n    )\n    assert_that(self.last_response, http(status=status.HTTP_401_UNAUTHORIZED))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 7,
    "score": "3",
    "annotator": 1,
    "annotation_id": 7,
    "created_at": "2025-10-21T13:40:43.701739Z",
    "updated_at": "2025-10-21T13:40:43.701748Z",
    "lead_time": 43.937,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_carriage.py:CarriageModelTests.test_wrong_request_type__fixture",
    "text": "def test_wrong_request_type__fixture(self) -> None:\n    \"\"\"\n    Given quoted request\n    When I want to add day carriage\n    Then it raises AssertionError\n    \"\"\"\n    request = self.any_quoted_request(state=request_states.draft)\n    with self.assertRaises(AssertionError):\n        self.any_carriage(request=request, type=carriage_types.day)",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 8,
    "score": "5",
    "annotator": 1,
    "annotation_id": 8,
    "created_at": "2025-10-21T13:42:08.483714Z",
    "updated_at": "2025-10-21T13:42:08.483724Z",
    "lead_time": 84.622,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestModelTests.test_generate_transportation_warrant_attachment",
    "text": "def test_generate_transportation_warrant_attachment(self) -> None:\n    request = self.any_request(state=request_states.tms_transmission)\n    request.generate_transportation_warrant_attachment()\n    assert_that(request.transportation_warrant_attachment, is_not(none()))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 50,
      "docstring_strength": 0.0
    },
    "id": 9,
    "score": "3",
    "annotator": 1,
    "annotation_id": 9,
    "created_at": "2025-10-21T13:42:22.737334Z",
    "updated_at": "2025-10-21T13:42:22.737349Z",
    "lead_time": 14.09,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_history_quote.py:HistoryQuoteTests.test_request__on_accepted_quote",
    "text": "def test_request__on_accepted_quote(self) -> None:\n    \"\"\"\n    Given a request in state quote_proposal\n    When a request on_accepted_quote\n    Then the request history_quote is in state accepted\n    \"\"\"\n    request = self.any_quoted_request(state=request_states.quote_proposal)\n\n    history_count_before = request.history_quotes.count()\n    request = self.do_on_accepted_quote(request=request)\n    history_count_after = request.history_quotes.count()\n    history_quote = request.history_quotes.order_by(\"revision\").last()\n\n    assert_that(history_count_after, is_(history_count_before))\n    assert_that(history_quote, not_none())\n    assert_that(history_quote.state, is_(HistoryQuoteStates.ACCEPTED))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 10,
    "score": "4",
    "annotator": 1,
    "annotation_id": 10,
    "created_at": "2025-10-21T13:43:54.051255Z",
    "updated_at": "2025-10-21T13:43:54.051265Z",
    "lead_time": 91.163,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/payline/test_order.py:OrderTestCase.test_order__to__success",
    "text": "def test_order__to__success(self) -> None:\n    \"\"\"\n    Given an order pending\n    When i refresh\n    Then order is in success status\n    \"\"\"\n    user = self.any_user(with_total_gr_card=True)\n    order = self.any_order(user=user, status=order_states.pending, payment_method=self.PAYMENT_METHOD)\n\n    while order.status not in order_states.purchase_final:\n        order.refresh()\n\n    transactions = Transaction.objects.filter(options__order_id=order.id)\n    assert_that(order.status, equal_to(order_states.success))\n    assert_that(transactions[0].order_detail_reference, is_(order_detail_references.wash))\n    assert_that(order.promocode_transaction, none())",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 11,
    "score": "3",
    "annotator": 1,
    "annotation_id": 11,
    "created_at": "2025-10-21T13:45:59.386171Z",
    "updated_at": "2025-10-21T13:45:59.386188Z",
    "lead_time": 125.184,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/cms/tests/test_models.py:EventDisplayRuleTestCase.test_str",
    "text": "def test_str(self) -> None:\n    event_display_rule = EventDisplayRule.objects.create(event_code=9999, language=\"fr\", equipment_brand=\"climax\")\n    assert_that(\n        str(event_display_rule),\n        is_(\n            f\"Regle d'affichage des alarmes [{event_display_rule.event_code}, {event_display_rule.language}\"\n            f\", {event_display_rule.equipment_brand}]\"\n        ),\n    )",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 38,
      "docstring_strength": 0.0
    },
    "id": 12,
    "score": "1",
    "annotator": 1,
    "annotation_id": 12,
    "created_at": "2025-10-21T13:46:26.041554Z",
    "updated_at": "2025-10-21T13:46:26.041574Z",
    "lead_time": 26.484,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/bec/api/v40/tests/test_person_api.py:UpdatePersonAPITests.test_update_person__not_found",
    "text": "def test_update_person__not_found(self) -> None:\n    person = self.any_remote_person(default_climax_account.contract_numbers[0])\n    data = self.any_update_person_data(first_name=\"Test API\")\n    with mock.patch.object(BecDriverV4, \"update_person\", side_effect=NotFound):  # noqa: RMS102\n        self.when_i_update_person(person_uuid=person.uuid, data=data)\n        assert_that(self.last_response.status_code, is_(status.HTTP_404_NOT_FOUND))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 13,
    "score": "1",
    "annotator": 1,
    "annotation_id": 13,
    "created_at": "2025-10-21T13:46:37.593568Z",
    "updated_at": "2025-10-21T13:46:37.593586Z",
    "lead_time": 11.419,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_queryset.py:RequestQuerySetTests.test_request_queryset__idea_supervisor",
    "text": "def test_request_queryset__idea_supervisor(self) -> None:\n    \"\"\"\n    Given:\n        - u1 a user with role idea_supervisor\n        - u2 a user not in same team as u1\n        - u3 a user in same team as u1\n        - t1 a team with u1 and u2\n        - r1 request created by u1\n        - r2 request created by u2\n        - r3 request created by u2 in same site\n        - r4 request created by u3\n    When I get request queryset with u1\n    Then r1 , r3, r4 returned\n    \"\"\"\n    s2 = self.any_site()\n    u1 = self.any_user(roles=[permission_roles.idea_supervisor], sites=[self.site.uuid])\n    u2 = self.any_user(sites=[self.site.uuid, s2.uuid])\n    u3 = self.any_user(sites=[self.site.uuid])\n    self.any_team(with_users=[u1, u3])\n    r1 = self.any_request(site=self.site, creator=u1)\n    self.any_request(site=s2, creator=u2)\n    r3 = self.any_request(site=self.site, creator=u2)\n    r4 = self.any_request(site=self.site, creator=u3)\n    queryset = RequestQuerySet(site=self.site, user=u1).make()\n    assert_that(queryset, contains_inanyorder(r1, r3, r4))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 87,
      "docstring_strength": 12.0
    },
    "id": 14,
    "score": "5",
    "annotator": 1,
    "annotation_id": 14,
    "created_at": "2025-10-21T13:47:33.627020Z",
    "updated_at": "2025-10-21T13:47:33.627029Z",
    "lead_time": 55.894,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_models.py:ModelTests.test_wp_offered_promo_code__with_credit_pack",
    "text": "def test_wp_offered_promo_code__with_credit_pack(self) -> None:\n    \"\"\"\n    Given a cart with credit pack\n          a promocode offering a wp\n    When I try to validate the promocode for the cart\n    Then it's not valid\n    \"\"\"\n    cart = self.any_cart(profile=cart_profiles.deal_credits_pack, state=cart_states.active)\n    promo_code = self.any_promocode(\n        version=2,\n        profile=promocode_profiles.v2_offered_wp,\n    )\n    promocode_not_valid = promo_code.clean_promocode_validation_for_cart(cart)\n    assert_that(promocode_not_valid, is_(not_(none())))\n    assert_that(promocode_not_valid[1], is_(PromoCodeValidationErrorMessages.CODE_INELIGIBLE.value))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 5.0
    },
    "id": 15,
    "score": "5",
    "annotator": 1,
    "annotation_id": 15,
    "created_at": "2025-10-21T13:48:12.376159Z",
    "updated_at": "2025-10-21T13:48:12.376174Z",
    "lead_time": 38.601,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/shipping_records/authentications/tests/test_attachment.py:SupervisorAttachmentAuthenticationTests.test_supervisor__my_team",
    "text": "def test_supervisor__my_team(self) -> None:\n    \"\"\"\n    Given\n        t1 a team\n        u1 a user in t1\n        u2 a user in t1 with role supervisor\n        u3 a user not in t1 with role supervisor\n        a request created by u1\n    When I call has_perm\n    Then\n        u2 has perm can_view\n        u2 has not perm can_update and can_delete\n        u3 has not perm\n    \"\"\"\n    site = self.any_site()\n    u1 = self.any_user(sites=[site.pk])\n    u2 = self.any_user(roles=[permission_roles.supervisor], sites=[site.pk])\n    u3 = self.any_user(roles=[permission_roles.supervisor], sites=[site.pk])\n    self.any_team(site=site, with_users=[u1, u2])\n    request = self.any_request(site=site, type=request_types.quoted, creator=u1)\n    attachment = self.any_attachment(user=u1, site=site, request=request)\n    assert_that(u2.has_perm(attachment_permissions.can_view, obj=attachment), is_(True))\n    assert_that(u2.has_perm(attachment_permissions.can_update, obj=attachment), is_(False))\n    assert_that(u2.has_perm(attachment_permissions.can_delete, obj=attachment), is_(False))\n    assert_that(u3.has_perm(attachment_permissions.can_view, obj=attachment), is_(False))\n    assert_that(u3.has_perm(attachment_permissions.can_update, obj=attachment), is_(False))\n    assert_that(u3.has_perm(attachment_permissions.can_delete, obj=attachment), is_(False))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 6,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 12.0
    },
    "id": 16,
    "score": "4",
    "annotator": 1,
    "annotation_id": 16,
    "created_at": "2025-10-21T13:49:14.445240Z",
    "updated_at": "2025-10-21T13:49:14.445250Z",
    "lead_time": 61.93,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/deliveries/test_api_rating.py:RatingDeliveryAPITestCase.test_rating",
    "text": "def test_rating(self) -> None:\n    \"\"\"\n    Given a delivery\n    When I rate\n    Then 200 OK\n    \"\"\"\n    self.client = AuthenticatedClient()\n    order = self.any_order(user=self.client.user, api_version=API_VERSION)\n    delivery = self.any_delivery(order=order, api_version=API_VERSION)\n\n    self.when_i_post_delivery_rating(delivery_id=delivery.id, rating=4)\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 65,
      "docstring_strength": 4.0
    },
    "id": 17,
    "score": "5",
    "annotator": 1,
    "annotation_id": 17,
    "created_at": "2025-10-21T13:49:29.385522Z",
    "updated_at": "2025-10-21T13:49:29.385537Z",
    "lead_time": 14.795,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_codes.py:UpdateTests.test_update",
    "text": "@vcr.use_cassette()\ndef test_update(self) -> None:\n    \"\"\"\n    Given\n        - a Hss for ClimaxKiz panel\n        - a HssDriver\n        - an existing code\n        - data to update this code\n    When\n        - I update this code\n    Then\n        - I get the updated code\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    driver = driver_factory.get_driver(hss)\n    code = self.any_code(hss=hss)\n    new_code = get_random_string(length=4, allowed_chars=(\"1234567890\"))\n    data = {\n        \"master_code\": \"1001\",\n        \"code\": new_code,\n        \"name\": \"Test update name\",\n    }\n    updated_code = driver.codes.update(code_pk=code.pk, data=data)\n\n    assert_that(updated_code.name, is_(\"Test update name\"))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 10.0
    },
    "id": 18,
    "score": "4",
    "annotator": 1,
    "annotation_id": 18,
    "created_at": "2025-10-21T13:50:24.954813Z",
    "updated_at": "2025-10-21T13:50:24.954826Z",
    "lead_time": 55.411,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v62/tests/promocodes/test_api_promocode.py:PromocodeSearchAPITestCase.test_find_promocode_with_promocode_prefix_not_active__correct_code",
    "text": "@override_settings(USE_PROMOCODE_PREFIX_NF0=False)\ndef test_find_promocode_with_promocode_prefix_not_active__correct_code(self) -> None:\n    \"\"\"\n    Given a\n        cart\n        promocode with an NF0 code\n        settings USE_PROMOCODE_PREFIX_NF0 NOT active\n    When I search for a promocode with the full code\n    Then I find it and I get an http response with a status code 200\n    \"\"\"\n    self.client = AuthenticatedClient()\n    promocode = self.any_promocode(\n        version=2,\n        profile=promocode_profiles.v2_first_credits_pack_purchase,\n        code=\"NF099225\",\n    )\n    cart = self.any_cart(state=cart_states.active, api_version=API_VERSION)\n    self.when_i_search_promocode(cart=cart, code=promocode.code)\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 84,
      "docstring_strength": 7.0
    },
    "id": 19,
    "score": "5",
    "annotator": 1,
    "annotation_id": 19,
    "created_at": "2025-10-21T13:50:58.080255Z",
    "updated_at": "2025-10-21T13:50:58.080270Z",
    "lead_time": 32.982,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v61/tests/cart_items/test_add_api.py:AddCartItemAPITestCase.test_add_booking__closed",
    "text": "def test_add_booking__closed(self) -> None:\n    \"\"\"\n    Given:\n        - a booking with a drop off time tomorrow\n        - station closed tomorrow\n        - a cart\n    When i create carte item\n    Then I get HTTP 400\"\"\"\n    self.client = AuthenticatedClient()\n    now = timezone.make_aware(datetime.datetime(2022, 1, 19, 15, 0, 0))\n    tomorrow = now + datetime.timedelta(days=1)\n\n    booking = self.any_booking()\n    booking.dropoff_time = tomorrow\n    booking.save()\n\n    booking.station.closed_on = [{\"date\": tomorrow.strftime(\"%Y-%m-%d\"), \"reason\": \"\"}]\n    booking.station.save()\n\n    cart = self.any_cart(user=self.client.user, api_version=API_VERSION)\n\n    self.when_i_create_cart_item(\n        cart_id=cart.id, item_type=create_cart_item_types.booking, reference=booking.pk, quantity=1\n    )\n\n    assert_that(self.last_response, http(400))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 6.0
    },
    "id": 20,
    "score": "3",
    "annotator": 1,
    "annotation_id": 20,
    "created_at": "2025-10-21T13:52:45.971412Z",
    "updated_at": "2025-10-21T13:52:45.971421Z",
    "lead_time": 107.75,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/issues/tests/forms/test_partial_refund.py:PartialRefundFormTestCase.test_error__no_payment",
    "text": "def test_error__no_payment(self) -> None:\n    order = self.any_order(\n        with_full_prepaid_account=True, refundable=True, payment_method=payment_methods.prepaid_account_mangopay\n    )\n    issue = self.any_issue(order=order, state=states.completed)\n    data = {\"price_incl_tax\": 5, \"prepaid_price_incl_tax\": 2}\n    form = PartialRefundForm(issue=issue, data=data)\n    assert_that(form.is_valid(), is_(False))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 21,
    "score": "3",
    "annotator": 1,
    "annotation_id": 21,
    "created_at": "2025-10-21T13:53:07.307934Z",
    "updated_at": "2025-10-21T13:53:07.307944Z",
    "lead_time": 21.204,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestCommentTest.test_quoted_threshold_error",
    "text": "def test_quoted_threshold_error(self) -> None:\n    \"\"\"\n    Given any quoted request with min threshold > max\n    When i full clean\n    Then i obtain a validation error\n    \"\"\"\n    request = self.any_request(type=request_types.quoted)\n    request.min_threshold = 5.0\n    request.max_threshold = 2.0\n    with self.assertRaises(ValidationError):\n        request.full_clean()",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 22,
    "score": "5",
    "annotator": 1,
    "annotation_id": 22,
    "created_at": "2025-10-21T13:53:25.953514Z",
    "updated_at": "2025-10-21T13:53:25.953531Z",
    "lead_time": 18.504,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/faq/api/v10/tests/test_views.py:CustomerServiceSubjectAPITests.test_send_customer_service_email__without_date",
    "text": "@override_settings(ALLOW_SEND_EMAIL=True)\ndef test_send_customer_service_email__without_date(self) -> None:\n    self.client = AuthenticatedClient()\n\n    self.when_i_send_customer_service_data(with_date=False)\n    assert_that(self.last_response.status_code, is_(200))\n    assert_that(self.last_response.json().get(\"status\"), is_(\"Votre message a bien été envoyé.\"))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 23,
    "score": "3",
    "annotator": 1,
    "annotation_id": 23,
    "created_at": "2025-10-21T13:53:44.724604Z",
    "updated_at": "2025-10-21T13:53:44.724614Z",
    "lead_time": 18.633,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/stations/test_admin.py:StationAdminTests.test_detail__with_washing_program",
    "text": "def test_detail__with_washing_program(self) -> None:\n    station = self.any_station()\n    self.any_washing_program(station=station)\n    self.when_i_view_instance_details(station)\n    assert_that(self.last_response.status_code, is_(200))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 52,
      "docstring_strength": 0.0
    },
    "id": 24,
    "score": "3",
    "annotator": 1,
    "annotation_id": 24,
    "created_at": "2025-10-21T13:54:04.726321Z",
    "updated_at": "2025-10-21T13:54:04.726336Z",
    "lead_time": 19.854,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/monitoring/tests/test_tasks.py:TestsProbeTasks.test_run_probe_close_alert",
    "text": "def test_run_probe_close_alert(self) -> None:\n    \"\"\"\n    Given the time betwen the start and stop range\n    Given more than probe alert_threshold fast_status\n    Given a token value at 2\n    Given the probe in alert status and monitoring mode\n    When I run probe\n    Then a monitoring Event are create\n    \"\"\"\n    Event.objects.all().delete()\n    AMQPEvent.objects.all().delete()\n\n    assert Probe.objects.count() == 1\n    probe: Probe = Probe.objects.first()\n    freeze_date = datetime.datetime(\n        year=2022,\n        month=10,\n        day=27,\n        hour=probe.daily_range_start,\n        minute=30,\n        second=31,\n        tzinfo=timezone.get_current_timezone(),\n    )\n    probe.mode = mode.monitoring\n    probe.last_run = freeze_date - datetime.timedelta(minutes=1)\n    probe.save()\n    with mock.patch.object(timezone, \"now\", return_value=freeze_date):  # noqa: RMS102\n        probe.status = status.alert\n        probe.save()\n        nb_of_fast_status = probe.alert_threshold + 1\n        for i in range(nb_of_fast_status):\n            self.any_event(type=events.fast_status)\n\n        cache.set(\"probe_token\", 2)\n\n        run_probe()\n\n        probe.refresh_from_db()\n        event = Event.objects.first()\n        assert_that(event.source, is_(mode.monitoring))\n        assert_that(event.status, is_(status.ok))\n        assert_that(event.value, is_(nb_of_fast_status))\n\n        assert_that(probe.status, is_(status.ok))",
    "metrics": {
      "line_count": 22,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 2,
      "has_mocks": 1,
      "duplicate_code": 4,
      "dc_coherence_codet5": 78,
      "docstring_strength": 7.0
    },
    "id": 25,
    "score": "1",
    "annotator": 1,
    "annotation_id": 25,
    "created_at": "2025-10-21T13:54:38.165511Z",
    "updated_at": "2025-10-21T13:54:38.165521Z",
    "lead_time": 33.295,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/serializers/tests/test_devices.py:ListResponseSerializerTests.test_serializer__thermometer_low_battery",
    "text": "def test_serializer__thermometer_low_battery(self) -> None:\n    \"\"\"\n    Given:\n        - A thermometer in low battery faulty state\n    When:\n        - I serialize it\n    Then:\n        - I get a thermometer with low_battery faulty state\n    \"\"\"\n    thermometer_json = load(\"climax_thermometer_low_battery.json\")\n    hss = self.any_hss()\n    serializer = ListResponseSerializer(data=thermometer_json)\n    serializer.is_valid(raise_exception=True)\n    devices = serializer.save(hss=hss)\n\n    thermometer = devices.thermometers[0]\n    assert_that(thermometer.faulty_states, contains_inanyorder(faulty_states.low_battery))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 7.0
    },
    "id": 26,
    "score": "5",
    "annotator": 1,
    "annotation_id": 26,
    "created_at": "2025-10-21T13:54:55.029847Z",
    "updated_at": "2025-10-21T13:54:55.029855Z",
    "lead_time": 16.717,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_promotional_offer.py:CartPromotionalOfferFreeTestCase.test_promotional_offer_free_multiple",
    "text": "def test_promotional_offer_free_multiple(self) -> None:\n    \"\"\"\n    Given a station with promotional offer for a free item\n    When I add two required items to cart\n    Then two free items are added automatically\n    \"\"\"\n    cart = self.any_cart()\n    promotional_offer = self.promotional_offer_free\n    station = self.station\n    required_deal, _ = promotional_offer.get_deals_for_station(station)\n    required_deal = required_deal[0]\n    self.add_item(cart, required_deal, quantity=2)\n\n    assert_that(cart.cartitem_set.count(), is_(2))\n    for cart_item in cart.cartitem_set.all():\n        assert_that(cart_item.quantity, is_(2))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 27,
    "score": "2",
    "annotator": 1,
    "annotation_id": 27,
    "created_at": "2025-10-21T13:56:00.666679Z",
    "updated_at": "2025-10-21T13:56:00.666694Z",
    "lead_time": 65.497,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/partners/api/v10/tests/test_api_retrieve_campaign.py:RetrieveCampaignAPITestCase.test_retrieve__anonymous",
    "text": "def test_retrieve__anonymous(self) -> None:\n    \"\"\"\n    Given an anonymous user\n    When I retrieve\n    Then 200\n    \"\"\"\n    self.client = AnonymousClient()\n    campaign = self.any_promotional_campaign()\n\n    self.when_i_retrieve_promotional_campaign(campaign_id=campaign.pk)\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 4.0
    },
    "id": 28,
    "score": "5",
    "annotator": 1,
    "annotation_id": 28,
    "created_at": "2025-10-21T13:56:08.938908Z",
    "updated_at": "2025-10-21T13:56:08.938924Z",
    "lead_time": 8.117,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_honeywell_status.py:UpdateScenarioApiTestCase.test_update_scenarios__incorrect_hss_pk",
    "text": "@vcr.use_cassette()\ndef test_update_scenarios__incorrect_hss_pk(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario with new data\n    When : I put this dict to an url containing an hss_pk wich not exist\n    Then : I get a 404 HTTP response\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss)\n    data = self.any_scenario_data(scenario)\n    last_response = self.when_i_update_scenario(data, scenario.pk, hss_pk=1234)\n    assert_that(last_response.status_code, is_(404), last_response.content)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 29,
    "score": "4",
    "annotator": 1,
    "annotation_id": 29,
    "created_at": "2025-10-21T13:56:38.884631Z",
    "updated_at": "2025-10-21T13:56:38.884641Z",
    "lead_time": 29.799,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/vehicles/api/v41/tests/test_api.py:UserVehicleAPITestCase.test_update_user_vehicle",
    "text": "def test_update_user_vehicle(self) -> None:\n    \"\"\"\n    Given a client authenticated with a user which have a vehicle\n    When i update the vehicle of this user\n    Then i get a response with an http_status_code 200, the vehicle is updated\n    \"\"\"\n    self.client = AuthenticatedClient()\n    user_vehicle = self.any_user_vehicle(user=self.client.user)\n    new_vehicle_model = self.any_vehicle_model()\n    new_vehicle_registration = \"AA-AAA-AA\"\n    new_segment = segment_type.segment_large\n    new_description = \"test description updated\"\n    data = {\n        \"vehicle_model\": new_vehicle_model.pk,\n        \"vehicle_registration\": new_vehicle_registration,\n        \"segment\": new_segment,\n        \"description\": new_description,\n    }\n    self.when_i_update_user_vehicle(user_vehicle=user_vehicle, data=data)\n    assert_that(self.last_response.status_code, is_(200))\n    user_vehicle.refresh_from_db()\n    assert_that(user_vehicle.vehicle_registration, is_(new_vehicle_registration))\n    assert_that(user_vehicle.segment, is_(new_segment))\n    assert_that(user_vehicle.description, is_(new_description))\n    assert_that(user_vehicle.vehicle_model, is_(new_vehicle_model))\n    assert_that(user_vehicle.vehicle_model.vehicle_brand, is_(new_vehicle_model.vehicle_brand))",
    "metrics": {
      "line_count": 15,
      "assertion_count": 6,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 30,
    "score": "2",
    "annotator": 1,
    "annotation_id": 30,
    "created_at": "2025-10-21T13:57:21.253004Z",
    "updated_at": "2025-10-21T13:57:21.253021Z",
    "lead_time": 42.22,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/mangopay/test_buy.py:SimpleBuyTestCase.test_buy_deal",
    "text": "def test_buy_deal(self) -> None:\n    \"\"\"\n    Given a deal\n    When i buy\n    Then order is success\n    \"\"\"\n    deal = self.any_deal()\n    user = self.any_user(\n        mangopay_card=mangopay_cards.secure, secure_mode_version=secure_mode_versions.secure_mode_3ds2\n    )\n    with override_settings(SECURE_MODE_RETURN_URL=self.live_server_url):\n        order = self.when_i_buy(user=user, deal=deal, payment_method=payment_methods.mangopay)\n\n    transaction = order.transaction.wait_for_completion()\n    order.refresh_from_db()\n\n    assert_that(transaction.state, is_(transaction_states.success))\n    assert_that(order.status, is_(order_states.success))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 4.0
    },
    "id": 31,
    "score": "3",
    "annotator": 1,
    "annotation_id": 31,
    "created_at": "2025-10-21T13:58:37.443202Z",
    "updated_at": "2025-10-21T13:58:37.443212Z",
    "lead_time": 76.052,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/maia/api/v10/tests/test_devices_api.py:DevicesAPITests.test_make_device_action_maia_exception",
    "text": "@vcr.use_cassette()\ndef test_make_device_action_maia_exception(self) -> None:\n    \"\"\"\n    Given a device not in maia\n    When I make device action\n    Then 502\n    \"\"\"\n    device = self.any_local_device()\n    assert device.status == DeviceStatus.ok.value\n    capability = device.capabilities[0]\n    action = DeviceCapabilities(capability).autorized_actions[0]\n    self.when_i_make_device_action(\n        hss=device.connection.hss, device_pk=device.pk, data={\"action\": action, \"capability\": capability}\n    )\n    assert_that(self.last_response.status_code, is_(status.HTTP_502_BAD_GATEWAY))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 32,
    "score": "4",
    "annotator": 1,
    "annotation_id": 32,
    "created_at": "2025-10-21T13:58:53.455139Z",
    "updated_at": "2025-10-21T13:58:53.455152Z",
    "lead_time": 15.883,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__merchandises_carriages",
    "text": "def test_request_formatter__merchandises_carriages(self) -> None:\n    \"\"\"\n    Given any request with no packaging units\n    When I use RequestFormatter with 'merchandises' field to export\n    Then it return a dict that contain \"\"\n    \"\"\"\n    request = self.any_request(\n        state=request_states.draft,\n        transport_service=transport_services.packaging_units,\n        with_packaging_units=False,\n        with_carriages=True,\n    )\n    request_csv = RequestFormatter().to_csv(request, fields=[\"merchandises\"])\n    assert_that(request_csv[0], is_(\"\"))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 4.0
    },
    "id": 33,
    "score": "5",
    "annotator": 1,
    "annotation_id": 33,
    "created_at": "2025-10-21T13:59:04.144963Z",
    "updated_at": "2025-10-21T13:59:04.144974Z",
    "lead_time": 10.554,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/imt/tests/test_driver.py:ReadUserTests.test_read_user_by_country_code_and_subscriber_id",
    "text": "@vcr.use_cassette()\ndef test_read_user_by_country_code_and_subscriber_id(self) -> None:\n    driver = IMTDriver()\n    account = default_climax_account\n    user = driver.read_user(country_code=account.country_code, subscriber_id=account.subscriber_id)\n    assert_that(user, is_(not_none()))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 34,
    "score": "3",
    "annotator": 1,
    "annotation_id": 34,
    "created_at": "2025-10-21T13:59:14.459822Z",
    "updated_at": "2025-10-21T13:59:14.459836Z",
    "lead_time": 10.187,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/test_tasks.py:TaskTests.test_generate_transportation_warrant",
    "text": "def test_generate_transportation_warrant(self) -> None:\n    \"\"\"\n    Given a request in waiting state with a transportation warrant\n    When I call task generate_transportation_warrant\n    Then a new transportation warrant is generated\n    \"\"\"\n    request = self.any_request(state=request_states.waiting)\n    request.generate_transportation_warrant_attachment()\n    old_transportation_warrant = request.transportation_warrant_attachment\n    assert_that(Attachment.objects.count(), is_(1))\n    tasks.generate_transportation_warrant(request_pk=request.uuid)\n    request.refresh_from_db()\n    assert_that(Attachment.objects.count(), is_(1))\n    assert_that(request.transportation_warrant_attachment, is_(not_(old_transportation_warrant)))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 12,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 35,
    "score": "3",
    "annotator": 1,
    "annotation_id": 35,
    "created_at": "2025-10-21T14:00:20.807480Z",
    "updated_at": "2025-10-21T14:01:20.458174Z",
    "lead_time": 119.049,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_devices.py:FavoritesTests.test_migrate_favorites__invalid",
    "text": "@vcr.use_cassette()\ndef test_migrate_favorites__invalid(self) -> None:\n    \"\"\"\n    Given a an Hss with honeywell panel\n    When I ask the migrate the favorites from 3.4.x to 3.5.x\n    Then I get a suite of 3.5.x compatible favorites\n    \"\"\"\n    hss = self.any_configured_hss(account=test_kiz3_account)\n    hss.favourite_elements = \"ircam\"  # digitalalchon\n    driver = driver_factory.get_driver(hss)\n    migrated_elements = driver.devices.migrate_favorites(hss.favourite_elements)\n    assert_that(migrated_elements, is_(\"\"))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 36,
    "score": "4",
    "annotator": 1,
    "annotation_id": 36,
    "created_at": "2025-10-21T14:01:41.686177Z",
    "updated_at": "2025-10-21T14:01:41.686190Z",
    "lead_time": 17.591,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_framed.py:FramedRequestActionTests.test_begin",
    "text": "def test_begin(self) -> None:\n    state_scenarios = [{\"actual\": request_states.planned, \"expected\": request_states.in_progress}]\n    for scenario in state_scenarios:\n        with self.subTest(scenario=scenario):\n            request = self.any_framed_request(state=scenario[\"actual\"], creator=self.client.user)\n            with handle_shipping_record_notifications():\n                RequestActionPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk).form.begin()\n            request.refresh_from_db()\n            assert_that(request.state, is_(scenario[\"expected\"]))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 37,
    "score": "3",
    "annotator": 1,
    "annotation_id": 37,
    "created_at": "2025-10-21T14:02:32.355841Z",
    "updated_at": "2025-10-21T14:02:32.355857Z",
    "lead_time": 50.508,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_action_forms.py:RefuseForm.test_unknown_refuse_type",
    "text": "def test_unknown_refuse_type(self) -> None:\n    \"\"\"\n    given any quoted request in 3rd_party_transmission state\n    given any form with unknown refuse type\n    when validating the form\n    then errors are thrown and contain the key \"refuse_type\"\n    \"\"\"\n    request = self.any_quoted_request(state=request_states._3rd_party_transmission)\n    form = self.any_refuse_form(request, refuse_type=\"unknown-refuse-type-for-sure\")\n    form.is_valid()\n    assert_that(form.errors, has_entry(\"refuse_type\", not_(empty())))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 5.0
    },
    "id": 38,
    "score": "5",
    "annotator": 1,
    "annotation_id": 38,
    "created_at": "2025-10-21T14:02:44.635466Z",
    "updated_at": "2025-10-21T14:02:44.635481Z",
    "lead_time": 12.129,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_scenario_models.py:HoneywellScenarioStatusTestCase.test_scenario_status__device_json",
    "text": "def test_scenario_status__device_json(self) -> None:\n    scenario = HoneywellScenarioStatus(driver=self.driver, identifier=\"test\", name=\"name\")\n    option_value = \"option_value\"\n    returned_dict, identifier = scenario._device_json(option_value=option_value)\n    assert_that(\n        returned_dict,\n        is_(\n            {\n                \"attributes\": {\"attributes\": [{\"name\": scenario_attributes.serial, \"value\": scenario.identifier}]},\n                \"scenarios\": scenario._scenario_json(scenario.name, option_value),\n            }\n        ),\n    )\n    assert_that(scenario.identifier, is_(identifier))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 39,
    "score": "2",
    "annotator": 1,
    "annotation_id": 39,
    "created_at": "2025-10-21T14:04:03.722045Z",
    "updated_at": "2025-10-21T14:04:03.722055Z",
    "lead_time": 78.934,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/repositories/tests/test_credits_pack.py:CreditsPackRespositoryTestCase.test_repository",
    "text": "def test_repository(self) -> None:\n    \"\"\"\n    Given 1 zone_context and 1 credits pack associated with this zone_context\n    When I call the repository\n    Then I get 1 credits pack\n    \"\"\"\n    zone_context = self.any_zone_context()\n    self.any_credits_pack(zone_context=zone_context)\n    filtered = CreditsPackRepository().get_all(zone_context)\n    assert_that(len(filtered), is_(1))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 40,
    "score": "4",
    "annotator": 1,
    "annotation_id": 40,
    "created_at": "2025-10-21T14:04:42.131213Z",
    "updated_at": "2025-10-21T14:04:42.131224Z",
    "lead_time": 38.263,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/test_managers.py:UserManagerTestCase.test_create_superuser",
    "text": "def test_create_superuser(self) -> None:\n    user = User.objects.create_superuser(email=\"test@ripplemotion.fr\", password=\"1234\")\n    assert_that(user.email, is_(\"test@ripplemotion.fr\"))\n    assert_that(user.is_staff, is_(True))\n    assert_that(user.is_superuser, is_(True))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 3,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 1,
    "score": "2",
    "annotator": 1,
    "annotation_id": 1,
    "created_at": "2025-10-22T09:47:41.908873Z",
    "updated_at": "2025-10-22T09:47:41.908882Z",
    "lead_time": 37.603,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v60/tests/forms/test_update_cart_item_form.py:CartItemUpdateFormTests.test_cart_item_update_form__no_quantity",
    "text": "def test_cart_item_update_form__no_quantity(self) -> None:\n    cart = self.any_cart(state=cart_states.active)\n    cart_item = cart.cartitem_set.first()\n    form = CartItemUpdateForm({\"quantity\": 0}, context={\"item\": cart_item})\n    assert_that(form.is_valid(), is_(False))\n    assert_that(form.errors, has_entry(\"quantity\", is_(not_none())))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 2,
    "score": "3",
    "annotator": 1,
    "annotation_id": 2,
    "created_at": "2025-10-22T09:48:43.585752Z",
    "updated_at": "2025-10-22T09:48:43.585767Z",
    "lead_time": 61.508,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v40/tests/test_api_powerswitch_honeywell.py:PowerSwitchTests.test_change_power_switch_icon",
    "text": "@vcr.use_cassette()\ndef test_change_power_switch_icon(self) -> None:\n    power_switch_data = self.when_i_list_power_switches_for_hss(self.client.hss)[0]\n    new_icon = \"light\" if power_switch_data[\"fields\"][\"icon\"] == \"toy\" else \"toy\"\n\n    self.when_i_update_power_switch_icon(self.client.hss.pk, power_switch_data[\"pk\"], new_icon)\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_204_NO_CONTENT))\n    self.then_power_switch_icon_is(self.client.hss, power_switch_data[\"pk\"], new_icon)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 3,
    "score": "2",
    "annotator": 1,
    "annotation_id": 3,
    "created_at": "2025-10-22T09:49:35.648824Z",
    "updated_at": "2025-10-22T09:49:35.648842Z",
    "lead_time": 51.894,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_framed.py:FramedRequestActionTests.test_load__unauthenticated",
    "text": "def test_load__unauthenticated(self) -> None:\n    self.client = Client()\n    request = self.any_framed_request(state=request_states.draft)\n    with self.assertRaises(RedirectException):\n        RequestActionPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 4,
    "score": "3",
    "annotator": 1,
    "annotation_id": 4,
    "created_at": "2025-10-22T09:50:18.395295Z",
    "updated_at": "2025-10-22T09:50:18.395316Z",
    "lead_time": 42.566,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_powerswitches.py:UpdateTests.test_update_icon__new_icons",
    "text": "@vcr.use_cassette()\ndef test_update_icon__new_icons(self) -> None:\n    \"\"\"\n    Given\n        - a Hss with an Essentielle panel\n        - a HssDriver\n        - a climax powerswitch\n    When\n        - I update powerswitch icon with\n            a led, strip, outdoor, plug icons\n    Then\n        - I get a powerswitch with these icons\n    \"\"\"\n    hss = self.any_configured_hss(account=papillon_essentielle_account)\n    driver = driver_factory.get_driver(hss)\n    powerswitch = self.any_essentielle_powerswitch(hss=hss)\n\n    assert_that(\n        driver.power_switches.update_icon(device_id=powerswitch.zigbee_id, new_icon=\"led\").icon,\n        is_(power_switch_icons.led),\n    )\n    assert_that(\n        driver.power_switches.update_icon(device_id=powerswitch.zigbee_id, new_icon=\"strip\").icon,\n        is_(power_switch_icons.strip),\n    )\n    assert_that(\n        driver.power_switches.update_icon(device_id=powerswitch.zigbee_id, new_icon=\"outdoor\").icon,\n        is_(power_switch_icons.outdoor),\n    )\n    assert_that(\n        driver.power_switches.update_icon(device_id=powerswitch.zigbee_id, new_icon=\"plug\").icon,\n        is_(power_switch_icons.plug),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 10.0
    },
    "id": 5,
    "score": "4",
    "annotator": 1,
    "annotation_id": 5,
    "created_at": "2025-10-22T09:51:37.279907Z",
    "updated_at": "2025-10-22T09:51:37.279921Z",
    "lead_time": 78.697,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v62/tests/deliveries/test_api_action.py:DeliveryActionAPITestCase.test_start_processing__another_user",
    "text": "def test_start_processing__another_user(self) -> None:\n    \"\"\"\n    Given\n        a user authenticated\n        a delivery in ready state from another user\n    When I post start processing action\n    Then 404 not found\n    \"\"\"\n    self.client = AuthenticatedClient()\n    delivery = self.any_delivery(api_version=API_VERSION)\n\n    self.when_i_post_delivery_action(delivery_id=delivery.id, action=delivery_actions.start_processing)\n\n    assert_that(self.last_response, http(404))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 6.0
    },
    "id": 6,
    "score": "3",
    "annotator": 1,
    "annotation_id": 6,
    "created_at": "2025-10-22T09:53:09.555786Z",
    "updated_at": "2025-10-22T09:53:09.555803Z",
    "lead_time": 92.102,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/bec/api/v50/tests/test_person_api.py:CreatePersonAPITests.test_create_person__unauthorized",
    "text": "def test_create_person__unauthorized(self) -> None:\n    self.client = Client()\n    hss = self.any_hss()\n    bec_contract = self.any_remote_contract(contract_number=hss.site.contract.contract_number)\n    data = self.any_create_person_data()\n    self.when_i_create_person(contract_number=bec_contract.contract_number, data=data)\n    assert_that(self.last_response.status_code, is_(status.HTTP_401_UNAUTHORIZED))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 7,
    "score": "2",
    "annotator": 1,
    "annotation_id": 7,
    "created_at": "2025-10-22T09:53:58.121027Z",
    "updated_at": "2025-10-22T09:53:58.121044Z",
    "lead_time": 48.389,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/private_api/v34/tests/test_resynchro_task_api.py:ResynchroTaskAPITests.test_list_resynchro_task_for_contract",
    "text": "def test_list_resynchro_task_for_contract(self) -> None:\n    hss = self.any_hss()\n    task = self.any_resynchro_task(hss=hss, source=resynchro_task_sources.private_api)\n    url = reverse(\"private:v34:scenarios:resynchrotask-list\")\n    response = self.client.get(url, data={\"contract_number\": task.hss.site.contract.contract_number})\n    assert_that(response.status_code, is_(200), response.content)\n    assert_that(\n        response.json(),\n        only_contains(\n            has_entries(\n                {\n                    \"pk\": task.id,\n                    \"model\": \"scenarios.resynchro-task\",\n                    \"fields\": has_entries(\n                        {\n                            \"state\": resynchro_task_states.pending,\n                            \"source\": resynchro_task_sources.private_api,\n                            \"creation_time\": task.creation_time.astimezone().isoformat(),\n                            \"error_message\": \"\",\n                        }\n                    ),\n                }\n            )\n        ),\n    )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 8,
    "score": "2",
    "annotator": 1,
    "annotation_id": 8,
    "created_at": "2025-10-22T09:56:00.509609Z",
    "updated_at": "2025-10-22T09:56:00.509627Z",
    "lead_time": 122.228,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v61/tests/deliveries/test_api_redeeming.py:RedeemDeliveryAPITestCase.test_redeeming__frauder_by_admin",
    "text": "def test_redeeming__frauder_by_admin(self) -> None:\n    \"\"\"\n    Given a delivery and user frauder by admin\n    When I archive\n    Then 403\n    \"\"\"\n    self.client = AuthenticatedClient()\n    self.client.user.is_frauder = True\n    self.client.user.frauder_reason = frauder_reasons.by_admin\n    self.client.user.last_frauder_update = timezone.now()\n    order = self.any_order(user=self.client.user, api_version=CURRENT_API_VERSION)\n    delivery = self.any_delivery(order=order, api_version=CURRENT_API_VERSION)\n\n    self.when_i_post_delivery_redeem(delivery_id=delivery.id)\n\n    assert_that(self.last_response, http(403))\n    assert_that(\n        self.last_response.json(),\n        has_entry(\n            \"detail\",\n            \"\"\"Par mesure de sécurité, votre compte a été suspendu. \\nSi vous souhaitez le réactiver, vous pouvez nous contacter via la rubrique “A propos” > “Aide et suggestions” de l’application.\"\"\",  # noqa\",\n        ),\n    )",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 9,
    "score": "3",
    "annotator": 1,
    "annotation_id": 9,
    "created_at": "2025-10-22T09:58:22.332233Z",
    "updated_at": "2025-10-22T09:58:22.332246Z",
    "lead_time": 141.624,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/policy/api/v30/tests/test_api_list_policies_about.py:PolicyAboutApiTestCase.test_list_policies_about",
    "text": "def test_list_policies_about(self) -> None:\n    \"\"\"\n    Given many policies about, an authenticated user\n    When I list policies about\n    Then I get a response with :\n        - a code 200\n        - only Wash app policies\n    \"\"\"\n    policy_1 = self.any_policy(tos_type=TosType.MANGOPAY_POLICY)\n    policy_2 = self.any_policy(tos_type=TosType.KLEEN_COOKIES_POLICY)\n    policy_3 = self.any_policy(tos_type=TosType.KLEEN_TOU)\n    policy_4 = self.any_policy(tos_type=TosType.KLEEN_TOS_MARKETPLACE)\n    policy_5 = self.any_policy(tos_type=TosType.KLEEN_TOS_MARKETPLACE_TWIP_WEB)\n    policy_6 = self.any_policy(tos_type=TosType.KLEEN_TOS_POLICY_WEBSITE)\n    self.when_i_list_policies_about()\n    assert_that(self.last_response, http(200))\n    assert_that(self.last_response.json(), has_length(4))\n    assert_that(\n        self.last_response.json()[0],\n        has_entries(\n            {\n                \"model\": \"policy.policy\",\n                \"fields\": has_key(\"tos_type\"),\n                \"pk\": any_of(\n                    is_(policy_1.model_pk), is_(policy_2.model_pk), is_(policy_3.model_pk), is_(policy_4.model_pk)\n                ),\n            }\n        ),\n    )\n    assert_that(\n        self.last_response.json()[0],\n        has_entries(\n            {\n                \"model\": \"policy.policy\",\n                \"fields\": has_key(\"tos_type\"),\n                \"pk\": not_(\n                    any_of(\n                        is_(policy_5.model_pk),\n                        is_(policy_6.model_pk),\n                    )\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 11,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 6.0
    },
    "id": 10,
    "score": "5",
    "annotator": 1,
    "annotation_id": 10,
    "created_at": "2025-10-22T09:59:49.243942Z",
    "updated_at": "2025-10-22T09:59:49.243960Z",
    "lead_time": 86.752,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v60/tests/cards/test_api_delete.py:RetrieveMangopayCardAPITestCase.test_delete__not_authenticated",
    "text": "@override_settings(NEED_DEFAULT_PROMOCODE=True)\ndef test_delete__not_authenticated(self) -> None:\n    self.client = AnonymousClient()\n    self.when_i_delete_card()\n\n    assert_that(self.last_response, http(403))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 58,
      "docstring_strength": 0.0
    },
    "id": 11,
    "score": "3",
    "annotator": 1,
    "annotation_id": 11,
    "created_at": "2025-10-22T10:00:11.602590Z",
    "updated_at": "2025-10-22T10:00:11.602606Z",
    "lead_time": 22.204,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderItemCreditsPackPrices.test_product_discount__credit_pack_discount__prices",
    "text": "def test_product_discount__credit_pack_discount__prices(self) -> None:\n    \"\"\"\n    Given any any promocode for discount on credit_pack\n    When I use this promocode with product in cart\n    Then orderitem has:\n        - corrected_price_before_discount is equalt to credits_pack_price\n        - corrected_price_after_discount is equal to price_after_discount minus promocode discount percentage\n        - price_before_discount is not equal to corrected_price_before_discount\n        - price_after_discount is not equal to corrected_price_after_discount\n    \"\"\"\n\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    credits_pack = self.any_credits_pack()\n    promocode = self.any_promocode(profile=promocode_profiles.v2_cart_discount_percentage, version=2)\n    promocode.valid_for_credits_pack = credits_pack\n    promocode.save()\n    deal = self.any_deal(\n        price_after_discount=decimal.Decimal(\"10\"),\n        price_before_discount=decimal.Decimal(\"15\"),\n        profile=deal_profiles.credits_pack,\n        credits_pack=credits_pack,\n    )\n\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n    cart.update(promocode=promocode)\n\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n\n    assert_that(order.promocode_type, is_(\"product_discount\"))\n    orderitem = order.orderitem_set.get()\n\n    assert_that(\n        orderitem.corrected_price_after_discount,\n        is_(\n            orderitem.price_before_discount\n            - orderitem.price_before_discount * order.cart.promocode.discount_percentage / decimal.Decimal(\"100\")\n        ),\n    )\n    assert_that(orderitem.price_after_discount, not_(orderitem.corrected_price_after_discount))\n    assert_that(orderitem.price_before_discount, not_(orderitem.corrected_price_before_discount))",
    "metrics": {
      "line_count": 15,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 88,
      "docstring_strength": 8.0
    },
    "id": 12,
    "score": "4",
    "annotator": 1,
    "annotation_id": 12,
    "created_at": "2025-10-22T10:04:31.726030Z",
    "updated_at": "2025-10-22T10:04:31.726049Z",
    "lead_time": 259.959,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v50/tests/carts/test_cart_update_form.py:CartUpdateFormTestCase.test_cart_update__unexisting_prepaid_account",
    "text": "def test_cart_update__unexisting_prepaid_account(self) -> None:\n    \"\"\"\n    Given a user with a cart and a prepaid account\n    When I serialize an unexisting prepaid_account_pk\n    Then I get an exception indicating that this prepaid account does not exist\n    \"\"\"\n    user = self.any_user()\n    cart = self.any_cart(user=user)\n    data = {\"prepaid_account_pk\": uuid.uuid4()}\n    form = CartUpdateForm(data, cart=cart, consumer=user.consumer_set.first())\n    assert_that(form.is_valid(), is_(False))\n    assert_that(form.errors, has_entry(\"prepaid_account_pk\", is_(not_none())))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 13,
    "score": "5",
    "annotator": 1,
    "annotation_id": 13,
    "created_at": "2025-10-22T10:05:29.192647Z",
    "updated_at": "2025-10-22T10:05:29.192661Z",
    "lead_time": 57.276,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/tests/test_models.py:CreditsPackValidationTests.test_scheduler__with_same_credits",
    "text": "def test_scheduler__with_same_credits(self) -> None:\n    \"\"\"\n    Given : A credits pack with a specific amount of credits\n    When : I create a scheduler with the same amount of credits than the credits pack\n    Then : Validation error is raised\n    \"\"\"\n    credits_pack = self.any_credits_pack()\n    with self.assertRaises(ValidationError) as e:\n        self.any_credits_pack_scheduler(credits_pack=credits_pack, schedule_credits=credits_pack.credits)\n\n    assert_that(e.exception.messages[0], is_(\"A scheduler needs to have a different bonus than the base credits.\"))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 4.0
    },
    "id": 14,
    "score": "4",
    "annotator": 1,
    "annotation_id": 14,
    "created_at": "2025-10-22T10:07:36.729208Z",
    "updated_at": "2025-10-22T10:07:36.729228Z",
    "lead_time": 127.341,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_ir_detectors_driver.py:UpdateTests.test_update_name",
    "text": "def test_update_name(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with Honeywell panel\n        - a HssDriver\n    When:\n        - I update name of ir detector\n    Then:\n        - I get a NotImplementedError\n    \"\"\"\n    hss = self.any_configured_hss(account=default_honeywell_account)\n    driver = driver_factory.get_driver(hss=hss)\n    new_name = get_random_string(15)\n    assert_that(\n        calling(driver.ir_detectors.update_name).with_args(device_id=\"test\", new_name=str(new_name)),\n        raises(NotImplementedError),\n    )",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 8.0
    },
    "id": 15,
    "score": "5",
    "annotator": 1,
    "annotation_id": 15,
    "created_at": "2025-10-22T10:08:10.536272Z",
    "updated_at": "2025-10-22T10:08:10.536290Z",
    "lead_time": 33.615,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_specifications.py:OrderPurchaseEmailCanBeSentSpecificationTestCase.test_settings_email_send_not_allowed",
    "text": "def test_settings_email_send_not_allowed(self) -> None:\n    \"\"\"\n    Given a settings that doesn't allow sending email\n    When evaluating the specification\n    It returns False\n    \"\"\"\n    spec = OrderPurchaseEmailCanBeSentSpecification()\n    assert_that(spec.is_satisfied_by(self.order), is_(False))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 16,
    "score": "3",
    "annotator": 1,
    "annotation_id": 16,
    "created_at": "2025-10-22T10:09:39.684355Z",
    "updated_at": "2025-10-22T10:09:39.684370Z",
    "lead_time": 88.978,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v81/tests/test_api_billing_information.py:GETBillingInformationAPITests.test_get__no_billing_information",
    "text": "def test_get__no_billing_information(self) -> None:\n    \"\"\"\n    Given a user without billing information\n    When i get billing information for this user\n    Then I get\n        - HTTP 200\n        - valid data with empty fields\n    \"\"\"\n    self.client = AuthenticatedClient()\n    user = self.client.user\n    user.billing_information = None\n    user.save()\n\n    self.when_i_get_billing_information()\n\n    assert user.billing_information\n    assert_that(self.last_response.status_code, equal_to(200))\n    assert_that(\n        self.last_response.json(),\n        has_entries(\n            {\n                \"pk\": str(user.billing_information.pk),\n                \"model\": \"accounts.billing_information\",\n                \"fields\": has_entries(\n                    {\n                        \"name\": \"\",\n                        \"street_address\": \"\",\n                        \"postal_code\": \"\",\n                        \"locality\": \"\",\n                        \"vat_number\": \"\",\n                        \"additional_information\": \"\",\n                    }\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 6.0
    },
    "id": 17,
    "score": "5",
    "annotator": 1,
    "annotation_id": 17,
    "created_at": "2025-10-22T10:10:19.056795Z",
    "updated_at": "2025-10-22T10:10:19.056811Z",
    "lead_time": 39.21,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/quoted/test_cancelled.py:OtherQuotedPermissionBackendTest.test_permissions__other_request",
    "text": "def test_permissions__other_request(self) -> None:\n    \"\"\"\n    Tests every quoted permission on every state for every roles and every request types (my / team / other)\n    \"\"\"\n    other_request = self.any_quoted_request(creator=self.u3, state=state)\n    for role in permission_roles.all:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        for perm in request_permissions.all:\n            with self.subTest(role=role, perm=perm):\n                other_request_expected = perm in expected.get(role, {}).get(\"other_request\", {})\n                assert_that(u1.has_perm(perm, obj=other_request), is_(other_request_expected))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 2.0
    },
    "id": 18,
    "score": "3",
    "annotator": 1,
    "annotation_id": 18,
    "created_at": "2025-10-22T10:12:30.816610Z",
    "updated_at": "2025-10-22T10:12:30.816625Z",
    "lead_time": 131.537,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/drivers/tests/test_driver_model.py:CameraDriverModelTestCase.test_update_name_not_implemented",
    "text": "def test_update_name_not_implemented(self) -> None:\n    hss = self.any_hss()\n    driver = CameraDriver(hss)\n    with self.assertRaises(NotImplementedError):\n        driver.update_name(camera_id=0, new_name=\"\")",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 49,
      "docstring_strength": 0.0
    },
    "id": 19,
    "score": "3",
    "annotator": 1,
    "annotation_id": 19,
    "created_at": "2025-10-22T10:12:59.289584Z",
    "updated_at": "2025-10-22T10:12:59.289602Z",
    "lead_time": 28.3,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_address_api.py:RetrieveTests.test_retrieve__not_found",
    "text": "def test_retrieve__not_found(self) -> None:\n    user = self.any_user()\n    site = self.any_site()\n    self.client = AuthenticatedClient(user=user)\n    self.when_i_get_address(site_slug=site.slug, id=\"test\")\n    assert_that(self.last_response.status_code, is_(status.HTTP_404_NOT_FOUND))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 20,
    "score": "2",
    "annotator": 1,
    "annotation_id": 20,
    "created_at": "2025-10-22T10:13:43.216321Z",
    "updated_at": "2025-10-22T10:13:43.216339Z",
    "lead_time": 43.773,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/private_api/v34/tests/test_resynchro_task_api.py:ResynchroTaskAPITests.test_list_resynchro_task_for_contract__bad_contract_number",
    "text": "def test_list_resynchro_task_for_contract__bad_contract_number(self) -> None:\n    hss = self.any_hss()\n    self.any_resynchro_task(hss=hss, source=resynchro_task_sources.private_api)\n    url = reverse(\"private:v34:scenarios:resynchrotask-list\")\n    response = self.client.get(url, data={\"contract_number\": \"xxx\"})\n    assert_that(response.status_code, is_(400), response.content)\n    assert_that(response.json(), has_key(\"contract_number\"), response.content)",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 1,
    "score": "2",
    "annotator": 1,
    "annotation_id": 41,
    "created_at": "2025-10-22T08:25:08.058647Z",
    "updated_at": "2025-10-22T08:25:08.058661Z",
    "lead_time": 19.807,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/rating/api/v33/tests/test_api.py:ClimaxPostRatingTestCase.test_post_rating_hss_with_delegation",
    "text": "@vcr.use_cassette()\ndef test_post_rating_hss_with_delegation(self) -> None:\n    hss = self.client.hss\n    self.client = HoneywellAPIClient()\n    DelegationMixin().any_delegation(\n        contract=hss.site.contract, enabled=True, role=roles.full, user=self.client.user\n    )\n    data = self.any_rating_data()\n    last_response = self.when_i_post_rating(data, hss_pk=hss.pk)\n    assert_that(last_response.status_code, is_(204))\n    rating_action = RatingAction.objects.filter(os=data[\"os\"])\n    assert_that(rating_action, is_(not_none()))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 2,
    "score": "3",
    "annotator": 1,
    "annotation_id": 42,
    "created_at": "2025-10-22T08:25:26.888080Z",
    "updated_at": "2025-10-22T08:25:26.888094Z",
    "lead_time": 18.675,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/quoted/test_aborted.py:TeamRequestQuotedPermissionBackendTest.test_permissions__team_request",
    "text": "def test_permissions__team_request(self) -> None:\n    \"\"\"\n    Tests every quoted permission on every state for every roles and every request types (my / team / other)\n    \"\"\"\n    team_request = self.any_quoted_request(creator=self.u2, state=state)\n    for role in permission_roles.all:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        for perm in request_permissions.all:\n            with self.subTest(role=role, perm=perm):\n                team_expected = perm in expected.get(role, {}).get(\"team_request\", {})\n                assert_that(u1.has_perm(perm, obj=team_request), is_(team_expected))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 2.0
    },
    "id": 3,
    "score": "4",
    "annotator": 1,
    "annotation_id": 43,
    "created_at": "2025-10-22T08:26:14.812436Z",
    "updated_at": "2025-10-22T08:26:14.812447Z",
    "lead_time": 47.758,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v40/tests/test_hss_api.py:HSSGroupApiTests.test_update_hss_group__daily_to_daily",
    "text": "@vcr.use_cassette()\ndef test_update_hss_group__daily_to_daily(self) -> None:\n    \"\"\"\n    Given : A logged in User with email, an HSS with group == 'daily'\n    When : I update group of this HSS to 'daily'\n    Then : status code of the response is 201\n           HSS in the response body have entry group == 'daily'\n           HSS in the database have entry group == 'daily'\n    \"\"\"\n    self.when_i_update_hss_group(self.client.hss, data={\"scenario_mode\": groups.daily})\n    assert_that(self.last_response.status_code, is_(200))\n    data = self.last_response.json()\n    assert_that(data, has_entry(\"fields\", is_not(empty())))\n    assert_that(data[\"fields\"], has_entry(\"scenario_mode\", is_(groups.daily)))\n    self.client.hss.refresh_from_db()\n    assert_that(self.client.hss.scenario_mode, is_(groups.daily))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 4,
    "score": "4",
    "annotator": 1,
    "annotation_id": 44,
    "created_at": "2025-10-22T08:27:40.116253Z",
    "updated_at": "2025-10-22T08:27:40.116268Z",
    "lead_time": 85.106,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/quoted/test_refused.py:TeamRequestQuotedPermissionBackendTest.test_permissions__team_request",
    "text": "def test_permissions__team_request(self) -> None:\n    \"\"\"\n    Tests every quoted permission on every state for every roles and every request types (my / team / other)\n    \"\"\"\n    team_request = self.any_quoted_request(creator=self.u2, state=state)\n    for role in permission_roles.all:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        for perm in request_permissions.all:\n            with self.subTest(role=role, perm=perm):\n                team_expected = perm in expected.get(role, {}).get(\"team_request\", {})\n                assert_that(u1.has_perm(perm, obj=team_request), is_(team_expected))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 2.0
    },
    "id": 5,
    "score": "4",
    "annotator": 1,
    "annotation_id": 45,
    "created_at": "2025-10-22T08:27:52.549998Z",
    "updated_at": "2025-10-22T08:27:52.550011Z",
    "lead_time": 12.283,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/authentication/tests/test_authentication.py:AuthenticationTests.test_authentication__get_user__unknon",
    "text": "def test_authentication__get_user__unknon(self) -> None:\n    user = MyRoadBackend().get_user(user_id=uuid.uuid4())\n\n    assert_that(user, none())",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 56,
      "docstring_strength": 0.0
    },
    "id": 6,
    "score": "1",
    "annotator": 1,
    "annotation_id": 46,
    "created_at": "2025-10-22T08:28:36.459122Z",
    "updated_at": "2025-10-22T08:28:36.459143Z",
    "lead_time": 43.755,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/tests/test_cache.py:CacheTestCase.test_cache_set_then_get_gives_value",
    "text": "def test_cache_set_then_get_gives_value(self) -> None:\n    cache.set(\"test_cache_key\", \"my value\")\n    value = cache.get(\"test_cache_key\")\n\n    assert_that(value, is_(\"my value\"))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 51,
      "docstring_strength": 0.0
    },
    "id": 7,
    "score": "1",
    "annotator": 1,
    "annotation_id": 47,
    "created_at": "2025-10-22T08:29:20.149974Z",
    "updated_at": "2025-10-22T08:29:20.149987Z",
    "lead_time": 43.539,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v60/tests/forms/test_create_cart_item_form.py:CartItemCreateFormTests.test_with_booking__good",
    "text": "def test_with_booking__good(self) -> None:\n    booking = self.any_booking()\n    data = {\"reference\": booking.pk, \"quantity\": 1, \"item_type\": create_cart_item_types.booking}\n    form = CartItemCreateForm(data=data, cart=self.cart)\n    assert_that(form.is_valid(), is_(True))\n    form.add(user=self.any_user(secure_mode_version=secure_mode_versions.secure_mode_3ds2))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 8,
    "score": "2",
    "annotator": 1,
    "annotation_id": 48,
    "created_at": "2025-10-22T08:31:06.333438Z",
    "updated_at": "2025-10-22T08:31:06.333452Z",
    "lead_time": 25.169,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:UpdateScenarioApiTestCase.test_update_scenarios__second_user",
    "text": "@vcr.use_cassette()\ndef test_update_scenarios__second_user(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario with new condition for a user\n    When : I put this dict for a second user\n    Then : I get a 404 HTTP response\n    \"\"\"\n    self.client = ClimaxEssentiellePapillonClientAPI()\n    client = EssentielleHandlerClient()\n    hss = client.hss\n    driver = hss.driver\n    scenario = self.any_scenario(hss=client.hss)\n    condition = DatetimeTempoClimax(1, \"12:00:00\", condition_types.with_datetime)\n    scenario.scenario_type.tempo_condition_type.append(TempoConditionType.ONTHE_AT)\n    scenario.scenario_type.save()\n    new_scenario_info = ScenarioInfo(\n        condition=condition,\n        actions=[\n            scenario.info.actions[0],\n        ],\n        remote_proxy=driver.hss.remote_proxy,\n    )\n    scenario.info = new_scenario_info\n    data = self.any_scenario_data(scenario)\n    last_response = self.when_i_update_scenario(data, scenario.pk)\n    assert_that(last_response.status_code, is_(404), last_response.content)",
    "metrics": {
      "line_count": 13,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 9,
    "score": "4",
    "annotator": 1,
    "annotation_id": 49,
    "created_at": "2025-10-22T08:32:13.855975Z",
    "updated_at": "2025-10-22T08:32:13.855990Z",
    "lead_time": 67.365,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/stations/test_models.py:StationSourceConstraintsTests.test_create_non_kleen_station_with_duplicate_source_id",
    "text": "def test_create_non_kleen_station_with_duplicate_source_id(self) -> None:\n    zone_context = ZoneContextMixin().any_zone_context()\n    brand = Brand.objects.create(name=\"test brand\", zone_context=zone_context)\n    with self.assertRaises(IntegrityError):\n        Station.objects.create(\n            brand=brand,\n            name=\"station test\",\n            source=\"twip\",\n            source_id=\"123\",\n            zone_context=zone_context,\n            info_state=info_states.complete,\n            address_1=\"a\",\n            postal_code=\"1\",\n            city=\"a\",\n            country=\"a\",\n            image=\"a\",\n            enabled=True,\n            exceptional_closure=False,\n            is_partner=False,\n        )\n        Station.objects.create(\n            brand=brand,\n            name=\"station test\",\n            source=\"twip\",\n            source_id=\"123\",\n            zone_context=zone_context,\n            info_state=info_states.complete,\n            address_1=\"a\",\n            postal_code=\"1\",\n            city=\"a\",\n            country=\"a\",\n            image=\"a\",\n            enabled=True,\n            exceptional_closure=False,\n            is_partner=False,\n        )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 20,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 10,
    "score": "3",
    "annotator": 1,
    "annotation_id": 50,
    "created_at": "2025-10-22T08:33:18.110265Z",
    "updated_at": "2025-10-22T08:33:18.110280Z",
    "lead_time": 64.101,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/bec/api/v50/tests/test_contract_api.py:RetrieveContractAPITests.test_read_contract_with_last_mail_sent",
    "text": "def test_read_contract_with_last_mail_sent(self) -> None:\n    \"\"\"\n    Given:\n        - A contract\n    When:\n        - I trigger mail\n    Then:\n        - I get a 200 with a last_mail_sent set in the contract\n    \"\"\"\n    hss = self.any_hss()\n    BECContractMixin().any_remote_contract(contract_number=hss.site.contract.contract_number)\n    bec_driver = BecDriverV4()\n    trigger_mail_data = {\n        \"mail_type\": \"instructions\",\n        \"agent_username\": \"lguerin\",\n    }\n    bec_driver.contracts_trigger_mail(contract_number=hss.site.contract.contract_number, data=trigger_mail_data)\n    self.when_i_get_contract(contract_number=hss.site.contract.contract_number)\n    assert_that(self.last_response.status_code, is_(status.HTTP_200_OK))\n    assert_that(self.last_response.json(), contract_matcher(contract_number=hss.site.contract.contract_number))\n    assert_that(self.last_response.json()[\"fields\"][\"last_mail_sent\"], not_none())",
    "metrics": {
      "line_count": 9,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 7.0
    },
    "id": 11,
    "score": "5",
    "annotator": 1,
    "annotation_id": 51,
    "created_at": "2025-10-22T08:33:41.923603Z",
    "updated_at": "2025-10-22T08:33:41.923616Z",
    "lead_time": 23.665,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_item.py:CartItemModelTestCase.test_add_cart_item_product_voucher__affected_by_promotional_offer",
    "text": "def test_add_cart_item_product_voucher__affected_by_promotional_offer(self) -> None:\n    \"\"\"\n    Given a user with\n        - An empty cart\n        - A product voucher for product P1\n        - A deal affected by a promotional offer\n    When I add a washing program for product P1 to the cart\n    Then the cart have a new free deal\n    \"\"\"\n    self.any_product_voucher(\n        product=self.product, product_voucher_account=self.user.product_voucher_account_set.first()\n    )\n    cart = self.any_cart(state=cart_states.empty, user=self.user)\n    washing_program = self.any_washing_program(product=self.any_product(sku=\"test\"), station=self.wp.station)\n    self.any_deal(washing_program=washing_program)\n    self.any_promotional_offer(\n        station=self.wp.station, discounted_washing_program=washing_program, required_washing_program=self.wp\n    )\n\n    cart.add_item(deal=self.deal)\n\n    assert_that(cart.cartitem_set.all(), has_length(2))\n    assert_that(cart.cartitem_set.exclude(deal__promotional_offer=None), has_length(1))\n    assert_that(cart.cartitem_set.exclude(deal__promotional_offer=None).first().deal.product_voucher, is_(none()))\n    assert_that(cart.cartitem_set.exclude(deal__product_voucher=None), has_length(1))\n    assert_that(cart.cartitem_set.exclude(deal__product_voucher=None).first().deal.promotional_offer, is_(none()))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 7.0
    },
    "id": 12,
    "score": "5",
    "annotator": 1,
    "annotation_id": 52,
    "created_at": "2025-10-22T08:35:31.661976Z",
    "updated_at": "2025-10-22T08:35:31.661989Z",
    "lead_time": 109.586,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/orders/test_api_performance.py:OrderPerformanceAPITestCase.test_performance__list",
    "text": "def test_performance__list(self) -> None:\n    \"\"\"\n    Given an order\n    When I retrieve order\n    Then the reponse is 200, query number is acceptable\n    \"\"\"\n\n    self.client = AuthenticatedClient(mangopay_card=mangopay_cards.normal)\n    num_orders = 2\n\n    for n in range(1, num_orders):\n        deal = self.any_deal()\n        cart = self.any_cart(user=self.client.user, state=cart_states.empty)\n        cart.add_item(deal=deal)\n        self.any_order(\n            user=self.client.user,\n            payment_method=payment_methods.mangopay,\n            cart=cart,\n            api_version=self.API_VERSION,\n        )\n\n    with assertNumLessEqualQueries(self, num_orders + 6):\n        start_time = time.monotonic()\n        self.when_i_list_order()\n        end_time = time.monotonic()\n        assert_that(end_time - start_time, is_(less_than(1)))\n        assert_that(self.last_response.status_code, is_(200))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 4.0
    },
    "id": 13,
    "score": "5",
    "annotator": 1,
    "annotation_id": 53,
    "created_at": "2025-10-22T08:37:38.933892Z",
    "updated_at": "2025-10-22T08:37:38.933909Z",
    "lead_time": 127.12,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_partial_requests_page.py:PartialRequestsPageTests.test_load__framed",
    "text": "def test_load__framed(self) -> None:\n    \"\"\"coverage test\"\"\"\n    for state in {\n        request_states.initial,\n        request_states.draft,\n        request_states.dropped,\n        request_states.tms_transmission,\n        # request_states.cancelling,\n        request_states.refused,\n        request_states.waiting,\n        request_states.planned,\n        request_states.in_progress,\n        request_states.completed,\n        request_states.aborted,\n        request_states.cancelled,\n        request_states.tms_shipment_refused,\n    }:\n        with self.subTest(state=state):\n            self.any_framed_request(state=state)\n            PartialRequestsPage.get(client=self.client, site_slug=self.client.sites[0].slug)",
    "metrics": {
      "line_count": 17,
      "assertion_count": 0,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 14,
    "score": "3",
    "annotator": 1,
    "annotation_id": 54,
    "created_at": "2025-10-22T08:39:28.238314Z",
    "updated_at": "2025-10-22T08:39:28.238329Z",
    "lead_time": 109.153,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v50/tests/test_api_powerswitch_essentielle.py:PowerSwitchTests.test_change_power_switch_name",
    "text": "@vcr.use_cassette()\ndef test_change_power_switch_name(self) -> None:\n    power_switch_data = self.when_i_list_power_switches_for_hss(self.client.hss)[0]\n\n    self.when_i_change_power_switch_name(self.client.hss, power_switch_data[\"pk\"], name=\"Salon (test)\")\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_204_NO_CONTENT))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 15,
    "score": "3",
    "annotator": 1,
    "annotation_id": 55,
    "created_at": "2025-10-22T08:39:52.784445Z",
    "updated_at": "2025-10-22T08:39:52.784459Z",
    "lead_time": 24.399,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestModelTests.test_shipping_records_attachments_empty",
    "text": "def test_shipping_records_attachments_empty(self) -> None:\n    \"\"\"\n    Given a request with a shipping records with no attachment\n    When I call shipping_records_attachments\n    Then I get an empty list\n    \"\"\"\n    request = self.any_request(type=request_types.framed, state=request_states.tms_transmission)\n    self.any_shipping_record(request=request)\n    assert_that(len(request.shipping_records_attachments), is_(0))\n    assert_that(request.shipping_records_attachments, empty())",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 16,
    "score": "5",
    "annotator": 1,
    "annotation_id": 56,
    "created_at": "2025-10-22T08:39:58.835714Z",
    "updated_at": "2025-10-22T08:39:58.835730Z",
    "lead_time": 5.899,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_toast_messages.py:ToastMessagesTests.test_accept_quote__message",
    "text": "def test_accept_quote__message(self) -> None:\n    \"\"\"\n    Given any request in quote_proposal state\n    When I accept the quote on the request action page\n    Then there is no toast message\n    And\n    When I accept the quote on the request accept quote page\n    Then :\n        - toast message is \"Devis accepté\"\n        - toast message tag is \"success\"\n    \"\"\"\n    self.client = AuthenticatedClient()\n    request = self.any_request(\n        state=request_states.quote_proposal, creator=self.client.user, type=request_types.quoted\n    )\n    page_request = RequestActionPage.get(\n        client=self.client, site_slug=request.site.slug, pk=request.pk\n    ).form.accept_quote()\n    request.refresh_from_db()\n    assert_that(request.state, is_(request_states.quote_proposal))\n    assert_that(messages.get_messages(page_request.initial_response.wsgi_request), empty())\n\n    page_accept_quote = RequestAcceptQuotePage.get(\n        client=self.client,\n        url=reverse(\n            \"www:request-action-confirm_accept_quote\",\n            kwargs={\"site_slug\": request.site.slug, \"pk\": request.pk},\n        )\n        + f\"?quote={request.quotes[0].key}\",\n    ).form.submit(data={\"comment\": \"good reason\"}, next_page_class=RequestActionPage)\n    request.refresh_from_db()\n    toast_messages = [m for m in messages.get_messages(page_accept_quote.initial_response.wsgi_request)][0]\n    assert_that(toast_messages.message, is_(\"Devis accepté\"))\n    assert_that(toast_messages.tags, is_(\"success\"))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 9,
      "dc_coherence_codet5": 81,
      "docstring_strength": 9.0
    },
    "id": 17,
    "score": "1",
    "annotator": 1,
    "annotation_id": 57,
    "created_at": "2025-10-22T08:42:20.562235Z",
    "updated_at": "2025-10-22T08:42:20.562249Z",
    "lead_time": 141.579,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/accounts/tests/test_models.py:TestModelsContract.test_get_contracts_related_user_delegation_full_with_delegation_limted",
    "text": "def test_get_contracts_related_user_delegation_full_with_delegation_limted(self) -> None:\n    \"\"\"\n    Given a contract with with user\n    Given other contract\n    Given a delegation to other contract with limited access\n    When I get_contracts_related_user with full\n    Then I have one contract\n    \"\"\"\n    contract_owner = self.any_contract()\n    contract_delegation = self.any_honeywell_contract()\n    self.any_delegation(contract=contract_delegation, user=contract_owner.user, role=roles.limited, enabled=True)\n    contracts = Contract.objects.get_contracts_related_user(user=contract_owner.user, role_required=roles.full)\n    assert_that(contracts, contains_exactly(contract_owner))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 18,
    "score": "5",
    "annotator": 1,
    "annotation_id": 58,
    "created_at": "2025-10-22T08:42:31.297203Z",
    "updated_at": "2025-10-22T08:42:31.297216Z",
    "lead_time": 10.584,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v40/tests/test_api_ir_detectors_essentielle.py:IRDetectorTests.test_change_ir_detector_name",
    "text": "@vcr.use_cassette()\ndef test_change_ir_detector_name(self) -> None:\n    ir_detectors = self.when_i_list_ir_detectors_for_hss(self.client.hss)\n    self.when_i_change_ir_detector_name(self.client.hss, ir_detectors[0][\"pk\"])\n    assert_that(self.last_response.status_code, is_(status.HTTP_204_NO_CONTENT))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 19,
    "score": "3",
    "annotator": 1,
    "annotation_id": 59,
    "created_at": "2025-10-22T08:43:28.632049Z",
    "updated_at": "2025-10-22T08:43:28.632063Z",
    "lead_time": 57.19,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_framed.py:FramedRequestActionTests.test_leave__error",
    "text": "def test_leave__error(self) -> None:\n    state_scenarios = [\n        {\"actual\": request_states.initial, \"expected\": request_states.initial},\n        # {\"actual\": request_states.draft, \"expected\": request_states.draft},\n    ]\n    for scenario in state_scenarios:\n        with self.subTest(scenario=scenario):\n            request = self.any_framed_request(state=scenario[\"actual\"], creator=self.client.user)\n            with self.assertRaises(RequestActionPage.RequestForm.Error):\n                with mock.patch(  # noqa: RMS102\n                    \"iwp_myroad.www.views.RequestActionFormView.are_forms_valid\", side_effect=lambda x: False\n                ) as m:\n                    RequestActionPage.get(\n                        client=self.client, site_slug=request.site.slug, pk=request.pk\n                    ).form.leave()\n            request.refresh_from_db()\n            m.assert_called_once()\n            assert_that(request.state, is_(scenario[\"expected\"]))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 3,
      "has_docstring": 0,
      "comment_count": 2,
      "cyclomatic_complexity": 2,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 20,
    "score": "1",
    "annotator": 1,
    "annotation_id": 60,
    "created_at": "2025-10-22T08:43:37.104704Z",
    "updated_at": "2025-10-22T08:43:37.104718Z",
    "lead_time": 8.31,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/bec/api/v50/tests/test_contract_api.py:RetrieveContractAPITests.test_read_contract__unauthenticate",
    "text": "def test_read_contract__unauthenticate(self) -> None:\n    self.client = Client()\n    self.when_i_get_contract(contract_number=default_climax_account.contract_numbers[0])\n    assert_that(self.last_response.status_code, is_(status.HTTP_401_UNAUTHORIZED))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 51,
      "docstring_strength": 0.0
    },
    "id": 1,
    "score": "4",
    "annotator": 1,
    "annotation_id": 1,
    "created_at": "2025-10-22T08:33:14.860158Z",
    "updated_at": "2025-10-22T08:33:14.860172Z",
    "lead_time": 133.593,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/orders/test_api_list.py:ListOrderAPITestCase.test_list__is_frauder_by_phone_validation",
    "text": "def test_list__is_frauder_by_phone_validation(self) -> None:\n    self.client = AuthenticatedClient()\n    self.client.user.is_frauder = True\n    self.client.user.frauder_reason = frauder_reasons.phone_validation_fail\n    self.client.user.last_frauder_update = timezone.now()\n    self.client.user.save()\n    self.when_i_list_order()\n\n    assert_that(self.last_response.status_code, is_(403))\n    assert_that(\n        self.last_response.json(),\n        has_entry(\"detail\", starts_with(\"Par mesure de sécurité, votre compte a été suspendu pendant 24h.\")),\n    )",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 2,
    "score": "3",
    "annotator": 1,
    "annotation_id": 2,
    "created_at": "2025-10-22T08:33:50.971789Z",
    "updated_at": "2025-10-22T08:33:50.971802Z",
    "lead_time": 35.932,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v50/tests/test_hss_api.py:HSSMigrationHoneywellApiTests.test_add_needed_migration__already_present",
    "text": "@vcr.use_cassette()\ndef test_add_needed_migration__already_present(self) -> None:\n    hss = self.client.hss\n    self.any_migration(hss=hss, type=migration_types.bec4)\n\n    self.when_i_add_needed_migration(hss=hss, migration_type=migration_types.bec4)\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_200_OK))\n    assert_that(migration_types.bec4, is_in(hss.required_migrations))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 3,
    "score": "3",
    "annotator": 1,
    "annotation_id": 3,
    "created_at": "2025-10-22T08:34:54.479946Z",
    "updated_at": "2025-10-22T08:34:54.479966Z",
    "lead_time": 63.316,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_update_code_serializer.py:UpdateCodeTestCase.test_update_code_for_hss_when_label_contains_too_much_characters",
    "text": "def test_update_code_for_hss_when_label_contains_too_much_characters(self) -> None:\n    \"\"\"\n    Given any hss\n    Given a label > 30 chars\n    When I update the code and serialize it\n    Then return a 400 with a specific error message\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.honeywell)\n    code = self.any_honeywell_code()\n    serializer = UpdateCodeSerializer(\n        data={\n            \"index\": f\"1_{code.index}\",\n            \"code\": \"B456\",\n            \"label\": \"0123456789012345678901234567890\",  # 31 characters\n        },\n        context={\"hss\": hss},\n    )\n    with self.assertRaises(APIException) as e:\n        serializer.is_valid(raise_exception=True)\n\n    assert_that(e.exception.status_code, is_(status.HTTP_400_BAD_REQUEST))\n    assert_that(\n        e.exception.detail,\n        has_entry(\n            \"label\", has_item(contains_string(\"Assurez-vous que ce champ comporte au plus 30\\xa0caractères.\"))\n        ),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 5.0
    },
    "id": 4,
    "score": "4",
    "annotator": 1,
    "annotation_id": 4,
    "created_at": "2025-10-22T08:35:53.641819Z",
    "updated_at": "2025-10-22T08:35:53.641832Z",
    "lead_time": 58.985,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/qr_code/tests/test_models.py:QRCodeModelTests.test_no_raw",
    "text": "def test_no_raw(self) -> None:\n    qr_code = self.any_qr_code(save=True)\n    qr_code.raw = None\n    with self.assertRaises(ValidationError) as e:\n        qr_code.clean()\n    assert_that(e.exception.messages[0], is_('\"If info_state is complete, raw value cannot be None'))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 5,
    "score": "3",
    "annotator": 1,
    "annotation_id": 5,
    "created_at": "2025-10-22T08:36:24.644486Z",
    "updated_at": "2025-10-22T08:36:24.644500Z",
    "lead_time": 30.84,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_validation_backends.py:ValidationBackendsTests.test_promo_code__valid_for_a_limited_time__too_late",
    "text": "def test_promo_code__valid_for_a_limited_time__too_late(self) -> None:\n    backend = ValidForALimitedTimeCart()\n    cart = self.any_cart(\n        state=cart_states.active,\n        profile=cart_profiles.deal_washing,\n        deal=self.washing_deal_tmf,\n    )\n    with freeze_time(timezone.now() + datetime.timedelta(days=2)):\n        assert_that(\n            backend.validate(self.promo_code_1, cart),\n            is_((False, PromoCodeValidationErrorMessages.CODE_EXPIRED.value)),\n        )",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 6,
    "score": "3",
    "annotator": 1,
    "annotation_id": 6,
    "created_at": "2025-10-22T08:38:21.214978Z",
    "updated_at": "2025-10-22T08:38:21.215003Z",
    "lead_time": 116.36,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/request_update_steps/test_carriage_form.py:CarriageFormTests.test_form_update_billing_unit_type",
    "text": "def test_form_update_billing_unit_type(self) -> None:\n    \"\"\"\n    Given any request without carriage and with a billing unit type = \"f\"\n    When I add one with reservation type as day\n    Then request billing unit type is \"j\"\n    \"\"\"\n\n    request = self.any_request(\n        state=request_states.draft,\n        ready_to_submit=True,\n        with_packaging_units=False,\n        with_carriages=False,\n        with_step_units=False,\n    )\n\n    assert request.billing_unit_type == billing_unit_types.flat_rate\n\n    self.any_carriage(request=request, type=carriage_types.day)\n    data, files = self.any_carriage_form_data(carriages=request.carriages.all())\n\n    formset = make_carriage_formset_class(instance=request, user=request.creator)(\n        instance=request, data=data, files=files\n    )\n    formset.save()\n\n    assert_that(request.billing_unit_type, is_(billing_unit_types.day))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 7,
    "score": "4",
    "annotator": 1,
    "annotation_id": 7,
    "created_at": "2025-10-22T08:40:03.502112Z",
    "updated_at": "2025-10-22T08:40:03.502128Z",
    "lead_time": 102.096,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter_additional_quote_quantity_3_framed",
    "text": "def test_request_formatter_additional_quote_quantity_3_framed(self) -> None:\n    \"\"\"\n    Given a framed request\n    When I use RequestFormatter with 'additional_quote_quantity_3' field to export\n    Then it return a dict that contain request additional_quote_quantity_3\n    \"\"\"\n    request = self.any_framed_request()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"additional_quote_quantity_3\"])\n    assert_that(request_csv[0], is_(empty()))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 8,
    "score": "5",
    "annotator": 1,
    "annotation_id": 8,
    "created_at": "2025-10-22T08:40:18.690068Z",
    "updated_at": "2025-10-22T08:40:18.690087Z",
    "lead_time": 15.011,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/orders/test_api_list.py:ListOrderAPITestCase.test_list__is_frauder_by_admin",
    "text": "def test_list__is_frauder_by_admin(self) -> None:\n    self.client = AuthenticatedClient()\n    self.client.user.is_frauder = True\n    self.client.user.frauder_reason = frauder_reasons.by_admin\n    self.client.user.last_frauder_update = timezone.now()\n    self.client.user.save()\n    self.when_i_list_order()\n\n    assert_that(self.last_response.status_code, is_(403))\n    assert_that(\n        self.last_response.json(),\n        has_entry(\"detail\", starts_with(\"Par mesure de sécurité, votre compte a été suspendu.\")),\n    )",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 9,
    "score": "3",
    "annotator": 1,
    "annotation_id": 9,
    "created_at": "2025-10-22T08:40:33.441820Z",
    "updated_at": "2025-10-22T08:40:33.441834Z",
    "lead_time": 14.586,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/drivers/tests/test_driver_model.py:CaptureDriverModelTestCase.test_get_not_implemented",
    "text": "def test_get_not_implemented(self) -> None:\n    hss = self.any_hss()\n    driver = CaptureDriver(hss)\n    with self.assertRaises(NotImplementedError):\n        driver.get(filename=\"\")",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 49,
      "docstring_strength": 0.0
    },
    "id": 10,
    "score": "4",
    "annotator": 1,
    "annotation_id": 10,
    "created_at": "2025-10-22T08:40:46.190482Z",
    "updated_at": "2025-10-22T08:40:46.190503Z",
    "lead_time": 12.556,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/oauth_provider/tests/test_auth.py:TestOAuthDifferentAuthorizationMethods.test_request_token_with_url_query",
    "text": "def test_request_token_with_url_query(self) -> None:\n    self._request_token(METHOD_URL_QUERY)",
    "metrics": {
      "line_count": 1,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 0.0
    },
    "id": 11,
    "score": "1",
    "annotator": 1,
    "annotation_id": 11,
    "created_at": "2025-10-22T08:40:53.777697Z",
    "updated_at": "2025-10-22T08:40:53.777709Z",
    "lead_time": 7.406,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v62/tests/stations/test_api_private_station.py:StationPrivateAPITestCase.test_get_private_station__no_corporation",
    "text": "def test_get_private_station__no_corporation(self) -> None:\n    \"\"\"\n    Given\n        - any user wihtout corporation\n        - a station\n    When this user try to get station pivate\n    Then i get an HTTP 404\n    \"\"\"\n    self.client = AuthenticatedClient()\n    self.any_station(source=source_profile.twip_source)\n    self.when_i_get_private_station()\n\n    assert_that(self.last_response, http(404))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 6.0
    },
    "id": 12,
    "score": "5",
    "annotator": 1,
    "annotation_id": 12,
    "created_at": "2025-10-22T08:41:42.351473Z",
    "updated_at": "2025-10-22T08:41:42.351486Z",
    "lead_time": 48.433,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v50/tests/test_delete_code_serializer.py:DeleteCodeTestCase.test_transactions_payload",
    "text": "def test_transactions_payload(self) -> None:\n    \"\"\"\n    Given any hss\n    Given a user name that contains space\n    When I add a code and create transaction\n    Then the transaction payload is good\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.honeywell)\n    code = self.any_honeywell_code()\n    serializer = DeleteCodeSerializer(\n        data={\n            \"index\": f\"1_{code.index}\",\n        },\n        context={\"hss\": hss},\n    )\n    serializer.is_valid(raise_exception=True)\n    transaction = serializer.make_transaction()\n    assert_that(\n        transaction.payload,\n        has_entries(\n            {\n                \"Prom\": hss.prom_code,\n                \"Index\": code.index,\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 5.0
    },
    "id": 13,
    "score": "3",
    "annotator": 1,
    "annotation_id": 13,
    "created_at": "2025-10-22T08:42:30.589916Z",
    "updated_at": "2025-10-22T08:42:30.589929Z",
    "lead_time": 48.066,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/request_update_steps/test_step_form.py:StepValidatorTests.test_swap_step_pu__unicity",
    "text": "def test_swap_step_pu__unicity(self) -> None:\n    \"\"\"\n    Given a request with 2 pu\n    When i add 2 step pu with same pu\n    Then it raise exception\n    \"\"\"\n    request = self.any_request(\n        state=request_states.initial, type=request_types.quoted, ready_to_submit=True, with_packaging_units=2\n    )\n    data = self.any_step_form_data(steps=request.steps.all())\n    pu_1 = data[\"steps-0-step_pu_formset-0-packaging_unit\"]\n    data[\"steps-0-step_pu_formset-1-packaging_unit\"] = pu_1\n    formset = make_step_formset_class(instance=request, user=request.creator)(instance=request, data=data)\n    assert_that(formset.is_valid(), is_(False))\n    assert_that(\n        formset.forms[0].nested.errors[1][\"__all__\"], has_item(\"Corrigez les valeurs en double ci-dessous.\")\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 14,
    "score": "5",
    "annotator": 1,
    "annotation_id": 14,
    "created_at": "2025-10-22T08:43:25.257955Z",
    "updated_at": "2025-10-22T08:43:25.257980Z",
    "lead_time": 54.496,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/tests/test_admin.py:PrepaidAccountAdminActionTests.test_add_credits_to_fleet_prepaid_accounts__not_apply",
    "text": "def test_add_credits_to_fleet_prepaid_accounts__not_apply(self) -> None:\n    fleet_prepaid_account = self.any_prepaid_account__fleet()\n    user = fleet_prepaid_account.owner\n    user.is_fleet_owner = False\n    user.save()\n\n    data = {\n        \"action\": \"add_credits_to_fleet_prepaid_accounts\",\n        \"_selected_action\": [fleet_prepaid_account.pk],\n        \"price_including_vat\": \"80\",\n        \"nb_day_for_payment\": \"10\",\n        \"price_credits\": \"100\",\n    }\n    self.last_response = self.client.post(\n        reverse(\"kleenapi_admin_site:credits_prepaidaccount_changelist\"), data=data, follow=True\n    )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 15,
    "score": "1",
    "annotator": 1,
    "annotation_id": 15,
    "created_at": "2025-10-22T08:43:47.951946Z",
    "updated_at": "2025-10-22T08:43:47.951964Z",
    "lead_time": 22.524,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_item.py:CartItemModelTestCase.test_add_multi_cart_item_product_voucher__affected_by_promotional_offer",
    "text": "def test_add_multi_cart_item_product_voucher__affected_by_promotional_offer(self) -> None:\n    \"\"\"\n    Given\n        - a user with 2 product vouchers for product P1\n        - A promotional offer given an offered product for a P1 purchase\n        - A cart with a P1 offered from product voucher, a product offered from promotional offer\n    When I add 2 P1 on this cart\n    Then the cart have:\n        - 2 free deal\n        - 1 deal not free\n        - 3 products offer\n    \"\"\"\n    product_voucher_account = self.user.product_voucher_account_set.first()\n    self.any_product_voucher(product=self.product, product_voucher_account=product_voucher_account)\n    self.any_product_voucher(product=self.product, product_voucher_account=product_voucher_account)\n    cart = self.any_cart(state=cart_states.empty, user=self.user)\n    offered_product = self.any_product(sku=\"offered_product\")\n    offered_wp = self.any_washing_program(product=offered_product, station=self.wp.station)\n    self.any_deal(washing_program=offered_wp)\n    self.any_promotional_offer(\n        station=self.wp.station, discounted_washing_program=offered_wp, required_washing_program=self.wp\n    )\n    cart.add_item(deal=self.deal)\n\n    cart.add_item(deal=self.deal, quantity=2)\n\n    P1_set = cart.cartitem_set.filter(deal__washing_program=self.wp)\n    assert_that(P1_set, has_length(3))\n    assert_that(P1_set.filter(deal__price_after_discount_basic=0), has_length(2))\n    assert_that(cart.cartitem_set.get(deal__washing_program=offered_wp).quantity, equal_to(3))",
    "metrics": {
      "line_count": 14,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 7,
      "dc_coherence_codet5": 83,
      "docstring_strength": 10.0
    },
    "id": 16,
    "score": "4",
    "annotator": 1,
    "annotation_id": 16,
    "created_at": "2025-10-22T08:48:12.941394Z",
    "updated_at": "2025-10-22T08:48:12.941406Z",
    "lead_time": 264.706,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_climax_kiz.py:ListScenarioApiTestCase.test_list_scenarios_maia__device_not_found",
    "text": "@vcr.use_cassette()\ndef test_list_scenarios_maia__device_not_found(self) -> None:\n    \"\"\"\n    Given a client with contract supporting 'connected home'\n    Given a scenario Maia with action device not found (for device and site id)\n    When I list scenario\n    Then 200\n    Then I have no scenario\n    \"\"\"\n    self.client.hss.site.contract.capabilities.append(ContractCapabilities.connected_home.value)\n\n    self.client.hss.site.contract.save()\n    self.any_maia_scenario(hss=self.client.hss)\n\n    device = self.any_local_device(type=DeviceType.heater)\n    device.maia_device_id = \"wrong_device_id\"\n    device.maia_site_id = \"wrong_site_id\"\n    device.save()\n\n    last_response = self.when_i_list_scenarios()\n    assert_that(last_response.status_code, is_(200))\n    data = last_response.json()\n    assert_that(data, has_length(0))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 6.0
    },
    "id": 17,
    "score": "4",
    "annotator": 1,
    "annotation_id": 17,
    "created_at": "2025-10-22T08:54:26.592183Z",
    "updated_at": "2025-10-22T08:54:26.592195Z",
    "lead_time": 373.41,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/test_tasks.py:NotifyUserAddedShippingRecordTasksTests.test_notify_users_shipping_record_document_added__consignment_received",
    "text": "def test_notify_users_shipping_record_document_added__consignment_received(self) -> None:\n    \"\"\"\n    Given\n        - any request with should_send_added_document_notification = True\n        - a user rule on_add transport_document\n        - a consignement received for request's shipping record\n    When I call notify_users_shipping_record_document_added\n    Then should_send_added_document_notification is False\n    \"\"\"\n    site = self.any_site()\n    user = self.any_user(sites=[site.pk])\n    self.any_user_rule(\n        user=user, request_type=request_types.framed, event=events.on_add, state=request_states.transport_document\n    )\n    request = self.any_request(\n        type=request_types.framed, state=request_states.tms_transmission, creator=user, site=site\n    )\n    self.any_shipping_record(request=request, extra_status=[shipping_record_status.consignment_received])\n    request.should_send_added_document_notification = True\n    request.save()\n    tasks.notify_users_shipping_record_document_added(request_pk=request.pk)\n    request.refresh_from_db()\n    assert_that(request.should_send_added_document_notification, is_(False))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 87,
      "docstring_strength": 7.0
    },
    "id": 18,
    "score": "4",
    "annotator": 1,
    "annotation_id": 18,
    "created_at": "2025-10-22T08:54:59.351784Z",
    "updated_at": "2025-10-22T08:54:59.351800Z",
    "lead_time": 32.577,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_list.py:RequestListPageTests.test_click_request",
    "text": "def test_click_request(self) -> None:\n    user = self.any_user(roles=[permission_roles.manager, permission_roles.user])\n    request = self.any_request(creator=user, state=request_states.completed)\n    self.client = AuthenticatedClient(user=user)\n    page = (\n        RequestListPage.get(client=self.client, site_slug=request.site.slug)\n        .requests_list[0]\n        .detail.click(next_page_class=RequestActionPage)\n    )\n    assert_that(page, is_(RequestActionPage))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 19,
    "score": "3",
    "annotator": 1,
    "annotation_id": 19,
    "created_at": "2025-10-22T08:55:16.444668Z",
    "updated_at": "2025-10-22T08:55:16.444683Z",
    "lead_time": 16.938,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/api/v40/tests/test_api_retrieve_credits.py:RetrieveCreditsPackAPITestCase.test_retrieve__anonymous",
    "text": "def test_retrieve__anonymous(self) -> None:\n    \"\"\"\n    Given an anonymous user\n    When I retrieve\n    Then 200\n    \"\"\"\n    self.client = AnonymousClient()\n    deal = self.any_deal(profile=deal_profiles.credits_pack)\n    self.when_i_retrieve_credits_packs(credits_pack_id=deal.credits_pack.id)\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 68,
      "docstring_strength": 4.0
    },
    "id": 20,
    "score": "5",
    "annotator": 1,
    "annotation_id": 20,
    "created_at": "2025-10-22T08:55:31.136393Z",
    "updated_at": "2025-10-22T08:55:31.136406Z",
    "lead_time": 14.52,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_scenarios.py:ListTests.test_list_scenario_devices__http_error",
    "text": "def test_list_scenario_devices__http_error(self) -> None:\n    hss = self.any_configured_hss(account=default_climax_account)\n    driver = driver_factory.get_driver(hss=hss)\n    with requests_mock.Mocker() as m:\n        m.get(\"https://padws-rec.imt.fm/WebServiceIMA/2.0/nonsecure/deviceListGet\", json={}, status_code=405)\n        assert_that(calling(driver.scenarios.list_scenario_devices), raises(HTTPError))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 1,
    "score": "1",
    "annotator": 1,
    "annotation_id": 1,
    "created_at": "2025-10-29T14:01:17.821156Z",
    "updated_at": "2025-10-29T14:01:17.821170Z",
    "lead_time": 38.485,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/deliveries/test_models.py:ModelTestCase.test_delivery__expiration",
    "text": "def test_delivery__expiration(self) -> None:\n    \"\"\"\n    Given a delivery with lifetime dispenser made 1 hour\n    Then archived is True\n    \"\"\"\n    one_hour_ago = timezone.now() - timezone.timedelta(hours=1)\n    with freeze_time(one_hour_ago, tick=True):\n        washing_program = self.any_washing_program(profile=washing_program_profiles.none)\n        dispenser = self.any_human_dispenser(station=washing_program.station)\n        self.any_dispenser_params(\n            dispenser=dispenser, washing_program=washing_program, lifetime=timezone.timedelta(hours=1)\n        )\n        deal = self.any_deal(washing_program=washing_program)\n        order = self.any_order(deal=deal)\n        delivery = self.any_delivery(order=order)\n    assert_that(delivery.archived, is_(True))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 3.0
    },
    "id": 2,
    "score": "3",
    "annotator": 1,
    "annotation_id": 2,
    "created_at": "2025-10-29T14:02:12.980757Z",
    "updated_at": "2025-10-29T14:02:12.980768Z",
    "lead_time": 54.996,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/crm/tests/test_show_rating_screen.py:SetAppRatingSerializerTestCase.test_ios_set_later_after_later",
    "text": "def test_ios_set_later_after_later(self) -> None:\n    \"\"\"\n    Given a registered user that has chosen to rate the app later\n    When he chooses to rate the app later again\n    Then the AppRating for android is set to later\n    \"\"\"\n    user = self.any_user()\n    app_rating = self.any_app_rating(user, ios_state=app_rating_state.later)\n\n    serializer = SetAppRatingSerializer(\n        instance=app_rating,\n        data={\"user\": user.id, \"state\": app_rating_state.later, \"consumer_name\": oauth_consumer_name.android},\n    )\n\n    serializer.is_valid(raise_exception=True)\n    app_rating = serializer.save()\n    self.assertEqual(app_rating.ios_state, app_rating_state.later)",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 3,
    "score": "2",
    "annotator": 1,
    "annotation_id": 3,
    "created_at": "2025-10-29T14:03:11.121017Z",
    "updated_at": "2025-10-29T14:03:49.161977Z",
    "lead_time": 64.913,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/washing_programs/test_models.py:WashingProgramModelTestCase.test_best_deals",
    "text": "def test_best_deals(self) -> None:\n    \"\"\"\n    Given washing program with multiple deals per vehicle types\n    When I get best deals\n    Best deals contains the best deal for each vehicle type\n    \"\"\"\n    washing_program = self.any_washing_program()\n    deal_1 = self.any_deal(\n        washing_program=washing_program,\n        vehicle_sizes=[VehicleSize.CITY, VehicleSize.COMPACT],\n        price_after_discount=Decimal(\"10.0\"),\n        price_before_discount=Decimal(\"11.0\"),\n    )\n    deal_2 = self.any_deal(\n        washing_program=washing_program,\n        vehicle_sizes=[VehicleSize.CITY, VehicleSize.SUV_4X4],\n        price_after_discount=Decimal(\"11.0\"),\n        price_before_discount=Decimal(\"12.0\"),\n    )\n    self.any_deal(\n        washing_program=washing_program,\n        vehicle_sizes=[VehicleSize.COMPACT, VehicleSize.SUV_4X4],\n        price_after_discount=Decimal(\"12.0\"),\n        price_before_discount=Decimal(\"12.0\"),\n    )\n\n    best_deals = washing_program.best_deals\n    assert_that(len(best_deals), is_(2))\n    assert_that(\n        best_deals,\n        contains_inanyorder(\n            has_properties(\n                {\n                    \"pk\": is_(deal_1.pk),\n                    \"vehicle_sizes\": contains_inanyorder(VehicleSize.CITY, VehicleSize.COMPACT),\n                }\n            ),\n            has_properties({\"pk\": is_(deal_2.pk), \"vehicle_sizes\": contains(VehicleSize.SUV_4X4)}),\n        ),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 4,
    "score": "5",
    "annotator": 1,
    "annotation_id": 4,
    "created_at": "2025-10-29T14:04:18.763504Z",
    "updated_at": "2025-10-29T14:04:18.763515Z",
    "lead_time": 25.295,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_honeywell_calendar.py:CreateScenarioApiTestCase.test_create_scenarios",
    "text": "@vcr.use_cassette()\ndef test_create_scenarios(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario\n    When : I post this dict\n    Then : I get a 201 HTTP response, a dict with one scenario\n    \"\"\"\n    data = self.any_scenario_data(self.initial_scenario)\n    last_response = self.when_i_post_scenario(data)\n    assert_that(last_response.status_code, is_(201), last_response.content)\n    assert_that(last_response.json(), is_(not_none()))\n    assert_that(Scenario.objects.all(), has_length(1))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 5,
    "score": "4",
    "annotator": 1,
    "annotation_id": 5,
    "created_at": "2025-10-29T14:04:26.638092Z",
    "updated_at": "2025-10-29T14:04:33.160536Z",
    "lead_time": 9.491,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_scenario_models.py:ScenarioInfoModelTestCase.test_scenario_info_field__no_condition",
    "text": "@vcr.use_cassette()\ndef test_scenario_info_field__no_condition(self) -> None:\n    \"\"\"\n    Given a scenario with scenario without condition\n    When i save scenario\n    Then scenario has a scenario info in valid format\n    \"\"\"\n    scenario_info = self.any_scenario_info(driver=self.client.hss.driver)\n    scenario_info.condition = None\n    action_type = scenario_info.actions[0].__class__\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss, scenario_info=scenario_info, save=False)\n    scenario.save()\n    assert_that(scenario, not_none())\n    assert_that(scenario.info, not_none())\n    assert_that(scenario.info.condition, none())\n    assert_that(scenario.info.actions, is_not(empty()))\n    action = scenario.info.actions[0]\n    assert_that(action, instance_of(action_type))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 6,
    "score": "3",
    "annotator": 1,
    "annotation_id": 6,
    "created_at": "2025-10-29T14:05:06.377456Z",
    "updated_at": "2025-10-29T14:05:06.377530Z",
    "lead_time": 31.408,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/oauth_provider/tests/test_admin.py:OAuthProviderAdminTests.test_admin",
    "text": "def test_admin(self) -> None:\n\n    with assertNumLessEqualQueries(self, 10):\n        self.last_response = self.client.get(\n            reverse(\n                f\"kleenapi_admin_site:{Token._meta.app_label}_{Token._meta.model_name}_changelist\",\n            )\n        )\n        assert_that(self.last_response.status_code, is_(200))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 38,
      "docstring_strength": 0.0
    },
    "id": 7,
    "score": "4",
    "annotator": 1,
    "annotation_id": 7,
    "created_at": "2025-10-29T14:05:23.427473Z",
    "updated_at": "2025-10-29T14:05:23.427495Z",
    "lead_time": 16.878,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_validation_backends.py:ValidationBackendsTests.test_promo_code_discountlimited",
    "text": "def test_promo_code_discountlimited(self) -> None:\n    \"\"\"\n    Given : Given a promo code that give a percentage of 20%\n    When : I validate promocode on cart with a rule on discount limit of 1 euro and a total price of 8 euros\n    Then : the limit is encountered so the promocode price is equal to the discount limit\n    \"\"\"\n    cart = self.any_cart(\n        deal=self.washing_deal,\n        state=cart_states.active,\n        profile=cart_profiles.deal_washing,\n    )\n    promo_code = self.any_promocode(\n        version=2,\n        profile=promocode_profiles.v2_cart_discount_percentage,\n        valid_for_washing_program=self.washing_deal.washing_program,\n    )\n    promo_code.discount_limit = 1\n    promo_code.rules.append(promo_code_rules.valid_for_a_certain_ammount)\n    promo_code.save()\n    cart.update(promocode=promo_code)\n    checkout = self.any_checkout(\n        cart=cart,\n        state=checkout_states.ordered,\n        payment_method=payment_methods.dummy,\n        api_version=CURRENT_API_VERSION,\n        with_ip_address=True,\n        with_browser_info=True,\n    )\n    order = checkout.order\n    assert cart.promocode\n    assert_that(int(order.promocode_used_price), equal_to(cart.promocode.discount_limit))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 8,
    "score": "4",
    "annotator": 1,
    "annotation_id": 8,
    "created_at": "2025-10-29T14:06:27.427243Z",
    "updated_at": "2025-10-29T14:06:27.427258Z",
    "lead_time": 63.794,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_notifications_page.py:RequestNotificationsPageTests.test_load__forbidden",
    "text": "def test_load__forbidden(self) -> None:\n    site = self.any_site()\n    user = self.any_user(roles=[permission_roles.third_party_operator], sites=[site.uuid])\n    self.client = AuthenticatedClient(user=user)\n    request = self.any_request()\n    with self.assertRaises(ForbiddenException):\n        RequestNotificationsPage.get(client=self.client, site_slug=site.slug, pk=request.pk)",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 9,
    "score": "4",
    "annotator": 1,
    "annotation_id": 9,
    "created_at": "2025-10-29T14:06:45.668835Z",
    "updated_at": "2025-10-29T14:06:45.668852Z",
    "lead_time": 18.064,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:PanelStatusConditionFormTestCase.test_create_form_on_valid",
    "text": "def test_create_form_on_valid(self) -> None:\n    data = {\n        \"status\": \"on\",\n    }\n\n    form = CreatePanelStatusConditionForm(data=data)\n    is_valid = form.is_valid()\n\n    self.assertTrue(is_valid)\n    self.assertEqual(form.to_grammar(), \"a1.mode==1\")  # 'on'",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 10,
    "score": "2",
    "annotator": 1,
    "annotation_id": 10,
    "created_at": "2025-10-29T14:07:07.798071Z",
    "updated_at": "2025-10-29T14:07:07.798084Z",
    "lead_time": 21.912,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__pickup_city__no_steps",
    "text": "def test_request_formatter__pickup_city__no_steps(self) -> None:\n    \"\"\"\n    Given a request without request\n    When I use RequestFormatter with 'pickup_city' field to export\n    Then it return a dict that contain request pickup city as empty string\n    \"\"\"\n    request = self.any_request()\n    request.steps.all().delete()\n    request.refresh_from_db()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"pickup_city\"])\n    assert_that(request_csv[0], is_(\"\"))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 11,
    "score": "5",
    "annotator": 1,
    "annotation_id": 11,
    "created_at": "2025-10-29T14:07:40.252391Z",
    "updated_at": "2025-10-29T14:07:40.252411Z",
    "lead_time": 32.282,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/private_api/v34/tests/test_private_api.py:PrivateCaptureAPITests.test_list_registered_mobile_phone__empty",
    "text": "def test_list_registered_mobile_phone__empty(self) -> None:\n    \"\"\"\n    Given:\n        - a redis key\n        - a redis container without mobile phones registered\n    When i list registered mobile phones\n    Then i get a response with 404 status\n    \"\"\"\n    random_suffix = str(random.SystemRandom().randint(0, 9))\n    subscriber_id = \"subscriber_id_\" + random_suffix\n    prom_code = \"prom_code_\" + random_suffix\n    ircam_channel_id = 2\n    adapter = RedisCaptureAdapter()\n\n    self.when_i_simulate_mobile_phones_waiting_for_take_capture_notification(\n        adapter=adapter,\n        prom_code=prom_code,\n        ircam_channel_id=ircam_channel_id,\n        subscriber_id=subscriber_id,\n        number_of_phones=0,\n    )\n\n    self.when_i_list_registered_mobile_phone(prom_code=prom_code, ircam_channel_id=ircam_channel_id)\n    assert_that(self.last_response.status_code, is_(status.HTTP_404_NOT_FOUND))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 6.0
    },
    "id": 12,
    "score": "4",
    "annotator": 1,
    "annotation_id": 12,
    "created_at": "2025-10-29T14:07:59.695430Z",
    "updated_at": "2025-10-29T14:07:59.695449Z",
    "lead_time": 19.263,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v70/tests/forms/test_register.py:UpdateRegisterFormTestCase.test_register__update__password__empty_old_new",
    "text": "def test_register__update__password__empty_old_new(self) -> None:\n    \"\"\"\n    Given a registered user\n    When i register with an empty new password and old password\n    Then user updated field has changed\n    \"\"\"\n    user = self.any_user()\n    first_name = \"titi\"\n    data = self.any_update_register_data(user=user, password=\"\", new_password=\"\", first_name=first_name)\n    register_form = UpdateRegisterForm(data=data, instance=user)\n\n    assert_that(register_form.is_valid(), is_(True))\n    register_form.register(user_pk=user.pk, request=None)\n\n    user.refresh_from_db()\n    assert_that(user.first_name, is_(first_name))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 13,
    "score": "4",
    "annotator": 1,
    "annotation_id": 13,
    "created_at": "2025-10-29T14:08:43.413515Z",
    "updated_at": "2025-10-29T14:08:43.413532Z",
    "lead_time": 43.543,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_blinds.py:ListTests.test_list__json_decode_error",
    "text": "@vcr.use_cassette()\ndef test_list__json_decode_error(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with ClimaxKiz panel\n        - a HssDriver\n    When:\n        - I list blinds with a JSONDecodeError (bad body value from cassette)\n        !! Don't erase this cassette\n    Then:\n        - I get a BadResponse exception\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    driver = driver_factory.get_driver(hss)\n    with mock.patch(\"requests.Response.json\", side_effect=JSONDecodeError(\"test\", \"test\", 0)):  # noqa: RMS102\n        with self.assertRaises(BadResponse):\n            driver.blinds.list()",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 9.0
    },
    "id": 14,
    "score": "1",
    "annotator": 1,
    "annotation_id": 14,
    "created_at": "2025-10-29T14:08:59.326655Z",
    "updated_at": "2025-10-29T14:08:59.326671Z",
    "lead_time": 15.751,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/tasks/test_cart_expiration.py:CartExpirationTestCase.test_empty",
    "text": "def test_empty(self) -> None:\n    expired_time = timezone.now() - 2 * Cart.EMPTY_CART_EXPIRATION\n    with freeze_time(expired_time, tick=True):\n        cart = self.any_cart(state=cart_states.empty)\n\n    cart.expire_if_needed()\n\n    assert_that(cart.state, is_(cart_states.expired))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 15,
    "score": "3",
    "annotator": 1,
    "annotation_id": 15,
    "created_at": "2025-10-29T14:09:14.272838Z",
    "updated_at": "2025-10-29T14:09:14.272857Z",
    "lead_time": 14.792,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/payline/test_order.py:OrderTestCase.test_order__credit_pack",
    "text": "def test_order__credit_pack(self) -> None:\n    \"\"\"\n    Given an credit pack order in success state\n    Then payline transaction has order_reference_detail.credits_pack\n    \"\"\"\n    user = self.any_user(with_total_gr_card=True)\n    order = self.any_order(\n        user=user,\n        status=order_states.success,\n        profile=order_profiles.credits_pack,\n        payment_method=self.PAYMENT_METHOD,\n    )\n\n    transactions = Transaction.objects.filter(options__order_id=order.id)\n    assert_that(transactions, not_none())\n    assert_that(transactions[0].order_detail_reference, is_(order_detail_references.credits_pack))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 3.0
    },
    "id": 16,
    "score": "5",
    "annotator": 1,
    "annotation_id": 16,
    "created_at": "2025-10-29T14:10:06.863632Z",
    "updated_at": "2025-10-29T14:10:06.863645Z",
    "lead_time": 52.406,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_filters.py:RequestFilteringTests.test_get__with_request_filter",
    "text": "def test_get__with_request_filter(self) -> None:\n    filters = self.any_request_filter(creator=self.client.user, site=self.client.current_site)\n    filters.creation_time_range = (datetime.date.today(), datetime.date.today() + datetime.timedelta(days=1))\n    filters.save()\n    page = RequestListPage.get(client=self.client, site_slug=self.client.current_site.slug)\n    from_date, to_date = page.request_filter.creation_time_range\n    assert_that(from_date, is_(datetime.date.today().strftime(\"%d/%m/%Y\")))\n    assert_that(to_date, is_(datetime.date.today().strftime(\"%d/%m/%Y\")))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 17,
    "score": "2",
    "annotator": 1,
    "annotation_id": 17,
    "created_at": "2025-10-29T14:10:44.538788Z",
    "updated_at": "2025-10-29T14:10:44.538800Z",
    "lead_time": 37.487,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_blinds.py:UpdateTests.test_update_name",
    "text": "@vcr.use_cassette()\ndef test_update_name(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with ClimaxKiz panel\n        - a HssDriver\n        - a climax blind\n    When:\n        - I update blind's name\n    Then:\n        - I get an updated blind\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    driver = driver_factory.get_driver(hss)\n    climax_blind = self.any_climax_blind(hss=hss)\n    new_name = get_random_string(15)\n    updated_climax_blind = driver.blinds.update_name(device_id=climax_blind.zigbee_id, new_name=str(new_name))\n    assert_that(updated_climax_blind, not_none())\n    assert_that(updated_climax_blind.name, is_(str(new_name)))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 9.0
    },
    "id": 18,
    "score": "3",
    "annotator": 1,
    "annotation_id": 18,
    "created_at": "2025-10-29T14:11:01.004899Z",
    "updated_at": "2025-10-29T14:11:01.004912Z",
    "lead_time": 16.303,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestModelManagerTests.test_duplicate_request__without_attachment",
    "text": "def test_duplicate_request__without_attachment(self) -> None:\n    \"\"\"\n    Given:\n        - any user\n        - any request with requester, packaging_units and steps\n    When I duplicate it without attachment\n    Then I get another request copying over the first one\n    \"\"\"\n    user = self.any_user()\n    request = self.any_request()\n    request.requester = self.any_user()\n    duplicated_request = Request.objects.duplicate(request=request, creator=user)\n\n    packaging_units_matcher = [\n        packaging_unit_entity(pu, with_attachment=False) for pu in request.packaging_units.all()\n    ]\n    steps_matcher = [step_entity(step) for step in request.steps.all()]\n    steps_pu_matcher = [\n        step_pu_entity(step_pu) for step in request.steps.all() for step_pu in step.step_packaging_units.all()\n    ]\n\n    assert_that(duplicated_request.state, is_(request_states.initial))\n    assert_that(duplicated_request, request_entity(request=request, creator=user))\n    assert_that(duplicated_request.packaging_units.all(), contains_inanyorder(*packaging_units_matcher))\n    assert_that(duplicated_request.steps.all(), contains_inanyorder(*steps_matcher))\n    assert_that(\n        StepPackagingUnit.objects.filter(step__request=duplicated_request), contains_inanyorder(*steps_pu_matcher)\n    )\n\n    assert_that(duplicated_request.attachments.all(), is_(empty()))\n    [assert_that(pu.adr_attachment, is_(none())) for pu in duplicated_request.packaging_units.all()]\n    [assert_that(pu.packing_attachment, is_(none())) for pu in duplicated_request.packaging_units.all()]",
    "metrics": {
      "line_count": 15,
      "assertion_count": 8,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 7,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 6.0
    },
    "id": 19,
    "score": "2",
    "annotator": 1,
    "annotation_id": 19,
    "created_at": "2025-10-29T14:11:53.623561Z",
    "updated_at": "2025-10-29T14:11:53.623582Z",
    "lead_time": 52.444,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_serializers.py:ScenarioSerializerTestCase.test_serialize_scenario__state_unpublishing",
    "text": "@vcr.use_cassette()\ndef test_serialize_scenario__state_unpublishing(self) -> None:\n    \"\"\"\n    Given : A scenario with state == unpublishing\n    When : I serialize this scenario\n    Then : I get a dict corresponding to the scenario i serialized, state == fail\n    \"\"\"\n    hss = self.client.hss\n    driver = hss.driver.scenarios\n    scenario = self.any_scenario(hss=hss)\n    scenario.state = states.unpublishing\n    serializer = ScenarioSerializer(instance=scenario, context={\"driver\": driver})\n    assert_that(serializer, is_not(none()))\n    data = serializer.data\n    assert_that(data, has_entries({\"pk\": is_(scenario.pk), \"model\": \"scenario.scenario\", \"fields\": not_none()}))\n    scenario_data = data[\"fields\"]\n    assert_that(scenario_data, has_entry(\"state\", states.fail))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 20,
    "score": "3",
    "annotator": 1,
    "annotation_id": 20,
    "created_at": "2025-10-29T14:12:05.242433Z",
    "updated_at": "2025-10-29T14:12:05.242451Z",
    "lead_time": 11.448,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/loaders/tests/test_loaders.py:RequestLoaderTests.test_request__additional_quotes",
    "text": "def test_request__additional_quotes(self) -> None:\n    \"\"\"\n    Given a request with additional_quotes\n    When i load message\n    Then request has one additional quote\n    \"\"\"\n    msg = load(\"request_framed_draft.json\")\n    request = RequestLoader().on_message(RequestLoader.TOPIC, msg)\n    assert isinstance(request, Request)\n\n    additional_quote = request.additionalquote_set.get()\n    assert_that(additional_quote.id, is_(300))\n    assert_that(additional_quote.label, is_(\"MyLabel\"))\n    assert_that(additional_quote.unit_price_excl_vat, is_(Decimal(\"5.00\")))\n    assert_that(additional_quote.quantity, is_(5))\n    assert_that(additional_quote.comment, is_(\"\"))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 21,
    "score": "4",
    "annotator": 1,
    "annotation_id": 21,
    "created_at": "2025-10-29T14:12:12.005159Z",
    "updated_at": "2025-10-29T14:12:12.005180Z",
    "lead_time": 6.601,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/bus/tests/test_loaders.py:AutowashLoaderTest.test_loader_twip__corporation",
    "text": "def test_loader_twip__corporation(self) -> None:\n    autowash = load(\"autowash_twip_corporation.json\")\n    loader = AutowashLoader()\n    station = loader.as_instance(autowash)[0]\n    assert_that(station.operator.seller_type, is_(seller_types.tmf))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 22,
    "score": "4",
    "annotator": 1,
    "annotation_id": 22,
    "created_at": "2025-10-29T14:12:19.725530Z",
    "updated_at": "2025-10-29T14:12:19.725555Z",
    "lead_time": 7.545,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_codes.py:ListTests.test_list",
    "text": "@vcr.use_cassette()\ndef test_list(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with ClimaxKiz panel\n        - a HssDriver\n    When:\n        - I list codes\n    Then:\n        - I get a list of dataclass Code\n        - I create the database Code objects\n    \"\"\"\n    Code.objects.all().delete()\n\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    driver = driver_factory.get_driver(hss)\n    codes = driver.codes.list()\n    assert_that(codes, only_contains(instance_of(GenericCode)))\n    assert_that(len(codes), is_(Code.objects.count()))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 9.0
    },
    "id": 23,
    "score": "3",
    "annotator": 1,
    "annotation_id": 23,
    "created_at": "2025-10-29T14:12:51.453944Z",
    "updated_at": "2025-10-29T14:12:51.453959Z",
    "lead_time": 31.553,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/replication/loaders/tests/test_loaders.py:KleenUserLoaderTestCase.test_update",
    "text": "def test_update(self) -> None:\n    \"\"\"\n    Given:\n        - an user loader\n        - an user\n        - a json from bus related to this user updated\n    When load json\n    Then user is updated\n    \"\"\"\n    loader = KleenUserLoader()\n    json = load(\"user.json\")\n    key = json[\"uri\"].split(\"/\")[-1]\n    user = loader.on_message(\"resource.kleen.user\", json, key)\n\n    assert_that(user, user_matcher(first_name=\"support\"))\n\n    json[\"data\"][\"given_name\"] = \"Updated Name\"\n    loader.on_message(\"resource.kleen.user\", json, key)\n    assert user, \"Should not be null\"\n    user.refresh_from_db()\n    assert_that(user, user_matcher(first_name=\"Updated Name\"))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 7.0
    },
    "id": 24,
    "score": "4",
    "annotator": 1,
    "annotation_id": 24,
    "created_at": "2025-10-29T14:13:13.374726Z",
    "updated_at": "2025-10-29T14:13:13.374744Z",
    "lead_time": 21.736,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/templatetags/tests/test_iwp_350.py:IWP350Tests.test_request_mail_header__tags",
    "text": "def test_request_mail_header__tags(self) -> None:\n    \"\"\"\n    Ensure request_mail_header template tags works\n    \"\"\"\n    context = Context({\"myroad_prefix\": \"test\", \"request\": self.request})\n    self.header_template.render(context)",
    "metrics": {
      "line_count": 2,
      "assertion_count": 0,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 2.0
    },
    "id": 25,
    "score": "2",
    "annotator": 1,
    "annotation_id": 25,
    "created_at": "2025-10-29T14:13:24.664735Z",
    "updated_at": "2025-10-29T14:13:24.664747Z",
    "lead_time": 11.127,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/private_api/v40/tests/test_api_powerswitch_honeywell.py:ErrorUpdatePowerSwitchApiTests.test_update_power_switch_status__when_bad_power_switch_id",
    "text": "@vcr.use_cassette()\ndef test_update_power_switch_status__when_bad_power_switch_id(self) -> None:\n    \"\"\"\n    Given a regular user account with Honeywell HSS,\n    when I update power switch status,\n    then the response is 404.\n    \"\"\"\n    self.when_i_update_power_switch_status(self.client.hss, 12345)\n\n    assert_that(self.last_response.status_code, is_(404))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 66,
      "docstring_strength": 4.0
    },
    "id": 26,
    "score": "4",
    "annotator": 1,
    "annotation_id": 26,
    "created_at": "2025-10-29T14:13:35.817097Z",
    "updated_at": "2025-10-29T14:13:35.817111Z",
    "lead_time": 10.997,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_api_promocode.py:PromoCodeTestCase.test_list_promocode",
    "text": "def test_list_promocode(self) -> None:\n    self.client = AuthenticatedClient()\n    code = self.any_promo_code(is_listed=True)\n    self.when_i_list_promo_code()\n    self.then_http_status_is(200)\n\n    promo_code = self.last_response.data\n    fields = promo_code[0][\"fields\"]\n    self.assertTrue(fields[\"code\"])\n    self.assertEqual(fields[\"code\"], code.code)\n    self.assertTrue(fields[\"price\"])",
    "metrics": {
      "line_count": 9,
      "assertion_count": 3,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 27,
    "score": "2",
    "annotator": 1,
    "annotation_id": 27,
    "created_at": "2025-10-29T14:13:46.401154Z",
    "updated_at": "2025-10-29T14:13:46.401171Z",
    "lead_time": 10.398,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/notifications/bus/tests/test_serializers.py:SerializerTests.test_subscriber_serializer",
    "text": "def test_subscriber_serializer(self) -> None:\n    serializer = SubscriberSerializer(data=self.subscriber_json)\n    assert_that(serializer.is_valid(), serializer.errors)",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 59,
      "docstring_strength": 0.0
    },
    "id": 28,
    "score": "1",
    "annotator": 1,
    "annotation_id": 28,
    "created_at": "2025-10-29T14:14:10.289111Z",
    "updated_at": "2025-10-29T14:14:10.289123Z",
    "lead_time": 23.72,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_climax_kiz.py:ListScenarioDevicesApiTestCase.test_list_scenario_devices",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_devices(self) -> None:\n    \"\"\"\n    Given : A panel with devices\n    When : I list scenario devices, for this panel\n    Then : I get a 200 HTTP response\n    \"\"\"\n    last_response = self.when_i_list_scenario_devices()\n    assert_that(last_response.status_code, is_(200), last_response.content)\n    assert_that(last_response.json(), has_length(greater_than(0)), last_response.content)\n    assert_that(\n        last_response.json()[0],\n        has_entries({\"pk\": instance_of(str), \"model\": is_(\"hss.scenario.device\"), \"fields\": instance_of(dict)}),\n    )\n    assert_that(\n        last_response.json()[0][\"fields\"],\n        has_entries({\"name\": instance_of(str), \"id\": instance_of(str), \"device_type\": instance_of(str)}),\n    )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 4.0
    },
    "id": 29,
    "score": "3",
    "annotator": 1,
    "annotation_id": 29,
    "created_at": "2025-10-29T14:14:54.751746Z",
    "updated_at": "2025-10-29T14:14:54.751759Z",
    "lead_time": 44.3,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_refuse_form.py:RequestRefuseFormTests.test_load__not_found",
    "text": "def test_load__not_found(self) -> None:\n    \"\"\"\n    given unknown request pk\n    when loading the page\n    then not found exception is thrown\n    \"\"\"\n    pk = uuid.uuid4()\n    site = self.any_site()\n    with self.assertRaises(NotFoundException):\n        RequestRefusePage.get(client=self.client, site_slug=site.slug, pk=pk)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 30,
    "score": "5",
    "annotator": 1,
    "annotation_id": 30,
    "created_at": "2025-10-29T14:15:00.844383Z",
    "updated_at": "2025-10-29T14:15:00.844395Z",
    "lead_time": 5.935,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderItemCreditsPackPrices.test_credits_pack__only_bonus__no_discount__prices",
    "text": "def test_credits_pack__only_bonus__no_discount__prices(self) -> None:\n    \"\"\"\n    Given any credits pack scheduler in progress without promocode\n    When I buy credit pack\n    Then orderitem has:\n        - corrected_price_before_discount is equal to credits_pack_price\n        - corrected_price_before_discount is not equal to price_before_discount\n        - price_after_discount is equal to corrected_price_after_discount\n    \"\"\"\n\n    credits_pack = self.any_credits_pack(credits=100)\n    deal = self.any_deal(\n        price_after_discount=decimal.Decimal(\"10\"),\n        price_before_discount=decimal.Decimal(\"15\"),\n        profile=deal_profiles.credits_pack,\n        credits_pack=credits_pack,\n    )\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n    assert_that(order.promocode_type, is_(None))\n    assert_that(order.offer_type, is_(None))\n\n    orderitem = order.orderitem_set.get()\n    assert_that(orderitem.corrected_price_before_discount, is_(orderitem.credits_pack_price))\n    assert_that(orderitem.corrected_price_before_discount, not_(orderitem.price_before_discount))\n    assert_that(orderitem.price_after_discount, is_(orderitem.corrected_price_after_discount))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 87,
      "docstring_strength": 7.0
    },
    "id": 31,
    "score": "4",
    "annotator": 1,
    "annotation_id": 31,
    "created_at": "2025-10-29T14:15:16.376626Z",
    "updated_at": "2025-10-29T14:15:16.376647Z",
    "lead_time": 15.367,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/subscriptions/bus/tests/test_writers.py:SubscriptionWriterTests.test_writer_event",
    "text": "def test_writer_event(self) -> None:\n    bo = MangoPayFixture().any_browser_info()\n    ip_a = \"192.168.1.1\"\n    us = self.any_user_subscription(state=UserSubscriptionState.NEED_CIT_PAYMENT)\n    with assert_signal_called(\n        obj_published, matcher=1, kwargs_matchers={\"obj\": instance_of(SubscriptionOrderGeneratedEvent)}\n    ):\n        us.start_cit_payment(bo, ip_a)\n    so = SubscriptionOrder.objects.get(user_subscription=us)\n    obj = SubscriptionOrderGeneratedEvent(subscription_order=so)\n    key = SubscriptionOrderGeneratedEventWriter().key(obj=obj)\n    topic = SubscriptionOrderGeneratedEventWriter().topic(obj=obj)\n    partition = SubscriptionOrderGeneratedEventWriter().partition(obj=obj)\n    data = SubscriptionOrderGeneratedEventWriter().data(obj=obj)\n    assert_that(\n        data,\n        has_entries(\n            {\n                \"uuid\": instance_of(str),\n                \"event\": \"subscription_order_generated\",\n                \"timestamp\": instance_of(int),\n                \"version\": is_(1),\n                \"revision\": is_(1),\n                \"data\": anything(),\n            }\n        ),\n    )\n    assert_that(topic, is_(\"events.kleen.subscriptionorder\"))\n    assert_that(key, is_(str(so.pk)))\n    assert_that(partition, is_(0))",
    "metrics": {
      "line_count": 15,
      "assertion_count": 5,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 32,
    "score": "2",
    "annotator": 1,
    "annotation_id": 32,
    "created_at": "2025-10-29T14:15:24.956882Z",
    "updated_at": "2025-10-29T14:15:24.956895Z",
    "lead_time": 8.415,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_api_codes.py:CodeTests.test_list_codes_assigned",
    "text": "@vcr.use_cassette()\ndef test_list_codes_assigned(self) -> None:\n    \"\"\"\n    Given  essentielle code\n    Given a bec person person with this code_pk\n    When i list codes\n    then I get an reponse with status 200 and the code assign\n    \"\"\"\n    hss = self.any_hss(contract=self.client.hss.site.contract)\n    contract_number = hss.site.contract.contract_number\n    code = self.any_essentielle_code(hss=self.client.hss, code=\"4321\", index=1)\n    contract = self.any_remote_contract(contract_number=contract_number)\n    assert contract.persons\n    person = contract.persons[0]\n    data = self.any_update_person_data(index=person.index, code_pk=f\"1_{code.index}\")\n    self.when_i_update_person(contract_number=contract_number, person_uuid=person.uuid, data=data)\n    self.when_i_list_codes(hss=self.client.hss)\n    assert_that(self.last_response.status_code, is_(status.HTTP_200_OK))\n    assert_that(self.last_response.json()[0], has_entry(\"fields\", has_entry(\"person_pk\", is_(person.uuid))))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 5.0
    },
    "id": 33,
    "score": "3",
    "annotator": 1,
    "annotation_id": 33,
    "created_at": "2025-10-29T14:16:10.180472Z",
    "updated_at": "2025-10-29T14:16:10.180485Z",
    "lead_time": 45.051,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_serializers.py:CreateUpdateScenarioSerializerTestCase.test_serialize_scenario_create__action_take_picture_all_cameras",
    "text": "@vcr.use_cassette()\ndef test_serialize_scenario_create__action_take_picture_all_cameras(self) -> None:\n    \"\"\"\n    Given : Scenario data, with an action take_picture_all_cameras\n    When : I serialize this data, and create the corresponding scenario\n    Then : I get a new Scenario, corresponding to the data i gave\n    \"\"\"\n    hss = self.client.hss\n    driver = hss.driver\n    action = self.any_action(action_types.take_camera_picture, driver, {\"device_pk\": None})\n    info = self.any_scenario_info(\n        driver=driver,\n        actions=[\n            action,\n        ],\n    )\n    scenario = self.any_scenario(hss=hss, scenario_info=info, save=False)\n    data = self.any_scenario_data(scenario)\n    # data['actions'] = [{'type': action_types.take_camera_picture, 'fields': {'device_pk': None}}]\n    serializer = CreateUpdateScenarioSerializer(data=data, context={\"hss\": hss, \"driver\": driver.scenarios})\n    serializer.is_valid(raise_exception=True)\n    serializer.create()\n    assert_that(Scenario.objects.all(), has_length(1))\n    scenario = Scenario.objects.all().first()\n    assert_that(scenario.info.actions, has_length(1))\n    action = scenario.info.actions[0]\n    assert_that(action.device_pk, is_(none()))\n    assert_that(action.zone, is_(none()))",
    "metrics": {
      "line_count": 15,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 34,
    "score": "3",
    "annotator": 1,
    "annotation_id": 34,
    "created_at": "2025-10-29T14:16:22.596979Z",
    "updated_at": "2025-10-29T14:16:22.596995Z",
    "lead_time": 12.25,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/keychain/tests/test_models.py:TestModelsConsumer.test_consumer_make_token_same_random_password",
    "text": "def test_consumer_make_token_same_random_password(self) -> None:\n    consumer = self.any_consumer()\n    user = self.any_user()\n    with mock.patch.object(  # noqa: RMS102\n        Consumer, \"make_random_password\", side_effect=[\"123\", \"123\", \"123\", \"123\", \"321\"]\n    ):\n        token: Token = consumer.make_token(user=user, device_id=None)\n        token = consumer.make_token(user=user, device_id=None)\n        assert_that(token.key, is_(\"321\"))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 35,
    "score": "2",
    "annotator": 1,
    "annotation_id": 35,
    "created_at": "2025-10-29T14:16:34.008532Z",
    "updated_at": "2025-10-29T14:17:00.384023Z",
    "lead_time": 25.801,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/vehicles/api/v41/tests/test_api.py:VehicleModelAPITestCase.test_list_vehicle_models_is_frauder_by_phone_validation",
    "text": "def test_list_vehicle_models_is_frauder_by_phone_validation(self) -> None:\n    self.client = AuthenticatedClient()\n    self.client.user.is_frauder = True\n    self.client.user.frauder_reason = frauder_reasons.phone_validation_fail\n    self.client.user.last_frauder_update = timezone.now()\n    vehicle_model = self.any_vehicle_model()\n    self.when_i_list_vehicle_model(brand_pk=vehicle_model.vehicle_brand.pk)\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 36,
    "score": "4",
    "annotator": 1,
    "annotation_id": 36,
    "created_at": "2025-10-29T14:17:15.001294Z",
    "updated_at": "2025-10-29T14:17:15.001314Z",
    "lead_time": 13.106,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_models.py:ModelTests.test_promo_code_v2_offered_voucher__no_product_to_offer",
    "text": "def test_promo_code_v2_offered_voucher__no_product_to_offer(self) -> None:\n    \"\"\"\n    Given a v2 promocode type offered_voucher\n    When I try to set product_to_offer to None\n    Then it raise an ValidationError exception\n    \"\"\"\n    promo_code = self.any_promocode(version=2, profile=promocode_profiles.v2_offered_voucher)\n    promo_code.product_to_offer = None\n    with self.assertRaises(ValidationError) as e:\n        promo_code.clean()\n    assert_that(e.exception.error_dict, has_entry(\"product_to_offer\", not_(empty())))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 4.0
    },
    "id": 37,
    "score": "5",
    "annotator": 1,
    "annotation_id": 37,
    "created_at": "2025-10-29T14:17:25.905038Z",
    "updated_at": "2025-10-29T14:17:25.905051Z",
    "lead_time": 10.757,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/maia/tests/test_fixtures.py:TestFixtures.test_any_remote_connection_connecting",
    "text": "@vcr.use_cassette()\ndef test_any_remote_connection_connecting(self) -> None:\n    \"\"\"\n    Given any remote connection with connecting args\n    Then I have connecting connection\n    \"\"\"\n    connection = self.any_remote_connection(state=ConnectionState.connecting)\n    assert_that(connection.state, is_(ConnectionState.connecting))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 3.0
    },
    "id": 38,
    "score": "4",
    "annotator": 1,
    "annotation_id": 38,
    "created_at": "2025-10-29T14:17:35.658858Z",
    "updated_at": "2025-10-29T14:17:35.658873Z",
    "lead_time": 9.588,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderItemWashingPrices.test_offered_product__corrected_prices__discount_limit__valid_product",
    "text": "def test_offered_product__corrected_prices__discount_limit__valid_product(self) -> None:\n    \"\"\"\n    Given any order with product voucher\n    Then promocode_type is product_discount\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    product = self.any_product()\n    wp = self.any_washing_program(product=product)\n    promocode = self.any_promocode(profile=promocode_profiles.v2_cart_discount_percentage, version=2)\n    promocode.discount_percentage = 100\n    promocode.rules.append(promo_code_rules.valid_for_a_certain_ammount)\n    promocode.rules.append(promo_code_rules.valid_for_any_product_purchase)\n    promocode.discount_limit = 2\n    promocode.save()\n    promocode.products.add(product)\n\n    deal = self.any_deal(\n        washing_program=wp,\n        price_before_discount=decimal.Decimal(5),\n        price_after_discount=decimal.Decimal(5),\n    )\n\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n    cart.update(promocode=promocode)\n\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n    orderitem = order.orderitem_set.get()\n    assert_that(orderitem.corrected_price_after_discount, is_(3))\n    assert_that(orderitem.price_after_discount, not_(orderitem.corrected_price_after_discount))\n    assert_that(orderitem.price_before_discount, is_(orderitem.corrected_price_before_discount))\n    assert_that(order.discount, is_(2))",
    "metrics": {
      "line_count": 21,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 4,
      "dc_coherence_codet5": 69,
      "docstring_strength": 3.0
    },
    "id": 39,
    "score": "2",
    "annotator": 1,
    "annotation_id": 39,
    "created_at": "2025-10-29T14:17:48.378302Z",
    "updated_at": "2025-10-29T14:17:48.378316Z",
    "lead_time": 12.542,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/tests/test_admin.py:PrepaidAccountAdminActionTests.test_add_credits_to_fleet_prepaid_accounts_without_bill__not_fleet_owner",
    "text": "def test_add_credits_to_fleet_prepaid_accounts_without_bill__not_fleet_owner(self) -> None:\n    fleet_prepaid_account = self.any_prepaid_account__fleet()\n    user = fleet_prepaid_account.owner\n    user.is_fleet_owner = False\n    user.save()\n    self.when_i_add_credits_to_fleet_prepaid_accounts_without_bill(ids=[fleet_prepaid_account.pk])",
    "metrics": {
      "line_count": 5,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 40,
    "score": "1",
    "annotator": 1,
    "annotation_id": 40,
    "created_at": "2025-10-29T14:18:07.374986Z",
    "updated_at": "2025-10-29T14:18:07.375002Z",
    "lead_time": 18.828,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_framed.py:FramedRequestActionTests.test_leave",
    "text": "def test_leave(self) -> None:\n    state_scenarios = [\n        {\"actual\": request_states.initial, \"expected\": request_states.dropped},\n    ]\n    for scenario in state_scenarios:\n        with self.subTest(scenario=scenario):\n            request = self.any_framed_request(state=scenario[\"actual\"], creator=self.client.user)\n            RequestActionPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk).form.leave()\n            request.refresh_from_db()\n            assert_that(request.state, is_(scenario[\"expected\"]))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 41,
    "score": "4",
    "annotator": 1,
    "annotation_id": 41,
    "created_at": "2025-10-29T14:18:16.160649Z",
    "updated_at": "2025-10-29T14:18:16.160660Z",
    "lead_time": 8.622,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/serializers/tests/test_codes.py:CodeSerializerTests.test_serializer__list",
    "text": "def test_serializer__list(self) -> None:\n    \"\"\"\n    Given :\n            - any hss\n            - 2 honeywell codes associated to this hss\n            - data corresponding to one of this code\n    When I serialize it\n    Then only the serialize code is in database\n    \"\"\"\n    hss = self.any_hss()\n    code1 = self.any_honeywell_code(hss=hss)\n    code2 = self.any_honeywell_code(hss=hss)\n    data = [{\"id\": code1.index, \"keypadCode\": code1.code, \"label\": \"label1\", \"zone\": 1, \"isEnabled\": True}]\n    serializer = CodeSerializer(data=data, many=True)\n    serializer.is_valid(raise_exception=True)\n    codes = serializer.list(hss)\n    code1.refresh_from_db()\n    assert_that(codes, not_(empty()))\n    assert_that(code1.label, is_(\"label1\"))\n    assert_that(Code.objects.filter(pk=code2.pk).exists(), is_(False))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 7.0
    },
    "id": 42,
    "score": "4",
    "annotator": 1,
    "annotation_id": 42,
    "created_at": "2025-10-29T14:19:04.867924Z",
    "updated_at": "2025-10-29T14:19:04.867946Z",
    "lead_time": 48.528,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:ScenarioTypeUniverseApi40Tests.test_list_scenario_type_universe__no_scenario_type_univers",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_type_universe__no_scenario_type_univers(self) -> None:\n    \"\"\"\n    Given : 0 inital scenarios type universe\n    When : I list scenario type universe\n    Then : Http response is 200, response contain 0 Scenario Type\n    \"\"\"\n    ScenarioTypeUniverse.objects.all().delete()\n    last_response = self.when_i_list_scenario_type_universe()\n    assert_that(last_response.status_code, is_(200))\n    assert_that(last_response.json(), has_length(0))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 43,
    "score": "4",
    "annotator": 1,
    "annotation_id": 43,
    "created_at": "2025-10-29T14:19:16.376935Z",
    "updated_at": "2025-10-29T14:19:16.376948Z",
    "lead_time": 11.32,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_promotional_offer.py:CartPromotionalOfferTwoRequiredDiscountedTestCase.test_promotional_offer_two_required_discounted_multiple_sequential",
    "text": "def test_promotional_offer_two_required_discounted_multiple_sequential(self) -> None:\n    \"\"\"\n    Given a station with promotional offer\n        for a discounted item with two required items\n    When\n        I add two of each required item to cart\n        I add discounted items to cart\n        I add discounted items to cart\n    Then the discounted items are discounted automatically\n    \"\"\"\n    cart = self.any_cart()\n    promotional_offer = self.promotional_offer_multiple_discounted\n    station = self.station\n    required_deals, discounted_deals = promotional_offer.get_deals_for_station(station)\n    discounted_deal = discounted_deals[0]\n    required_deal_1 = required_deals[0]\n    required_deal_2 = required_deals[1]\n\n    self.add_item(cart, required_deal_1)\n    self.add_item(cart, required_deal_2)\n    self.add_item(cart, required_deal_1)\n    self.add_item(cart, required_deal_2)\n    self.add_item(cart, discounted_deal)\n    self.add_item(cart, discounted_deal)\n\n    assert_that(cart.cartitem_set.count(), is_(3))\n    for cart_item in cart.cartitem_set.all():\n        assert_that(cart_item.quantity, is_(2))",
    "metrics": {
      "line_count": 16,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 18,
      "dc_coherence_codet5": 81,
      "docstring_strength": 8.0
    },
    "id": 44,
    "score": "4",
    "annotator": 1,
    "annotation_id": 44,
    "created_at": "2025-10-29T14:19:37.315973Z",
    "updated_at": "2025-10-29T14:19:37.315985Z",
    "lead_time": 20.763,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/bec/tests/test_driver.py:BecDriverTests.test_get_person_image__not_found",
    "text": "def test_get_person_image__not_found(self) -> None:\n    bec_driver = BecDriverV4()\n    contract = self.any_remote_contract(contract_number=default_climax_account.contract_numbers[0])\n    person = self.any_remote_person(contract_number=contract.contract_number)\n    with self.assertRaises(NotFound):\n        bec_driver.get_person_image(\n            contract_number=contract.contract_number,\n            image_path=f\"/bec/private-media/person/{person.uuid}/74d8346e-bee4-4c9b-b589-5e02be9fdbef.png\",\n        )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 45,
    "score": "4",
    "annotator": 1,
    "annotation_id": 45,
    "created_at": "2025-10-29T14:20:04.837349Z",
    "updated_at": "2025-10-29T14:20:04.837367Z",
    "lead_time": 27.349,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/faq/api/v10/tests/test_views.py:CustomerServiceSubjectAPITests.test_get_all_customer_service_subjects",
    "text": "def test_get_all_customer_service_subjects(self) -> None:\n\n    self.client = AuthenticatedClient()\n    self.any_customer_service_subject()\n    self.any_customer_service_subject()\n\n    self.when_i_list_customer_service_subjects()\n\n    assert_that(self.last_response.status_code, is_(200))\n    assert_that(self.last_response.data[0], is_pmf(model_name=\"faq.customer_service_subject\"))\n    assert_that(\n        self.last_response.data[0][\"fields\"],\n        has_entries(\n            {\n                \"slug\": not_(empty()),\n                \"title\": not_(empty()),\n                \"article_title\": not_(empty()),\n                \"article_slug\": not_(empty()),\n                \"parent_slug\": empty(),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 3,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 14,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 46,
    "score": "4",
    "annotator": 1,
    "annotation_id": 46,
    "created_at": "2025-10-29T14:20:20.307728Z",
    "updated_at": "2025-10-29T14:20:20.307744Z",
    "lead_time": 15.272,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/vehicles/tests/test_models.py:VehicleModelTestCase.test_vehicle_model_str",
    "text": "def test_vehicle_model_str(self) -> None:\n    vehicle = self.any_vehicle_model()\n    assert_that(str(vehicle), instance_of(str))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 56,
      "docstring_strength": 0.0
    },
    "id": 47,
    "score": "4",
    "annotator": 1,
    "annotation_id": 47,
    "created_at": "2025-10-29T14:20:37.701932Z",
    "updated_at": "2025-10-29T14:20:37.701951Z",
    "lead_time": 17.217,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_api_scenario_type.py:ScenarioTypeUniverseApi60Tests.test_list_scenario_type_universe__no_matching_scenario_type_universe",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_type_universe__no_matching_scenario_type_universe(self) -> None:\n    \"\"\"\n    Given : 4 scenarios type universe with target == 'pad_web'\n    When : I list scenario type unive\n    Then : Http response is 200, response contain 0 Scenario Type universe with target == 'pad_mobile'\n    \"\"\"\n    ScenarioTypeUniverse.objects.filter(target=targets.pad_mobile).delete()\n    last_response = self.when_i_list_scenario_type_universe()\n    assert_that(last_response.status_code, is_(200))\n    assert_that(last_response.json(), has_length(0))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 48,
    "score": "4",
    "annotator": 1,
    "annotation_id": 48,
    "created_at": "2025-10-29T14:20:52.688325Z",
    "updated_at": "2025-10-29T14:20:52.688337Z",
    "lead_time": 14.812,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/sites/management/tests/test_export_sites.py:ExportSitesCommandTests.test_command",
    "text": "def test_command(self) -> None:\n    \"\"\"\n    Given any site\n    When I call export_sites command\n    Then csv contains site\n    \"\"\"\n    site = self.any_site()\n    management.call_command(\"export_sites\")\n    with open(\"export_sites.csv\", \"rt\") as f:\n        lines = f.readlines()\n    lines.pop(0)\n    assert_that(\n        lines,\n        contains_exactly(f\"{site.uuid},{site.name},{site.raw['data']['description'] if site.raw else ''}\\n\"),\n    )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 49,
    "score": "5",
    "annotator": 1,
    "annotation_id": 49,
    "created_at": "2025-10-29T14:21:10.232509Z",
    "updated_at": "2025-10-29T14:21:10.232521Z",
    "lead_time": 17.395,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/drivers/tests/test_driver_model.py:PanelStatusDriverModelTestCase.test_read_not_implemented",
    "text": "def test_read_not_implemented(self) -> None:\n    hss = self.any_hss()\n    driver = PanelStatusDriver(hss)\n    with self.assertRaises(NotImplementedError):\n        driver.read()",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 49,
      "docstring_strength": 0.0
    },
    "id": 50,
    "score": "4",
    "annotator": 1,
    "annotation_id": 50,
    "created_at": "2025-10-29T14:21:19.743971Z",
    "updated_at": "2025-10-29T14:21:19.743989Z",
    "lead_time": 9.33,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/quoted/test_planned.py:TeamRequestQuotedPermissionBackendTest.test_permissions__team_request",
    "text": "def test_permissions__team_request(self) -> None:\n    \"\"\"\n    Tests every quoted permission on every state for every roles and every request types (my / team / other)\n    \"\"\"\n\n    request_permissions_without_cancel = [\n        perm for perm in request_permissions.all if perm != request_permissions.can_cancel\n    ]\n\n    team_request = self.any_quoted_request(creator=self.u2, state=state)\n    for role in permission_roles.all:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        for perm in request_permissions_without_cancel:\n            with self.subTest(role=role, perm=perm):\n                team_expected = perm in expected.get(role, {}).get(\"team_request\", {})\n                assert_that(u1.has_perm(perm, obj=team_request), is_(team_expected))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 5,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 2.0
    },
    "id": 1,
    "score": "4",
    "annotator": 1,
    "annotation_id": 51,
    "created_at": "2025-10-29T14:23:32.449945Z",
    "updated_at": "2025-10-29T14:23:32.449958Z",
    "lead_time": 7.686,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/faq/api/v10/tests/test_views.py:CategoryAPITestCase.test_get_category",
    "text": "def test_get_category(self) -> None:\n    \"\"\"\n    Given any category\n    When I get category\n    then I get\n        an HTTP 200\n        containing one category\n    \"\"\"\n    category = self.any_category()\n    self.client = AuthenticatedClient()\n    self.when_i_get_category(slug=category.slug)\n\n    assert_that(self.last_response.status_code, is_(200))\n    assert_that(self.last_response.data, is_pmf(model_name=\"faq.category\"))\n    assert_that(self.last_response.data[\"pk\"], is_(category.uuid))\n    assert_that(\n        self.last_response.data[\"fields\"],\n        has_entries(\n            {\n                \"slug\": not_(empty()),\n                \"title\": not_(empty()),\n                \"slug_icon\": not_(empty()),\n                \"order\": not_(empty),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 6.0
    },
    "id": 2,
    "score": "5",
    "annotator": 1,
    "annotation_id": 52,
    "created_at": "2025-10-29T14:23:44.302980Z",
    "updated_at": "2025-10-29T14:23:44.303000Z",
    "lead_time": 11.686,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/policy/api/v30/tests/test_api_list_policies_to_accept.py:PolicyToAcceptApiTestCase.test_list_policies_to_accept__never_accepted",
    "text": "def test_list_policies_to_accept__never_accepted(self) -> None:\n    \"\"\"\n    Given a policy, an authenticated user wich never accepted policies\n    When I list policies to accept\n    Then I get a response with a status code 200, a list with a policy\n    \"\"\"\n    policy = self.any_policy(tos_type=TosType.KLEEN_TOU)\n    self.when_i_list_policies_to_accept()\n    assert_that(self.last_response, http(200))\n    assert_that(self.last_response.json(), has_length(1))\n    assert_that(\n        self.last_response.json()[0],\n        has_entries({\"model\": \"policy.policy\", \"fields\": not_none(), \"pk\": is_(policy.model_pk)}),\n    )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 3,
    "score": "5",
    "annotator": 1,
    "annotation_id": 53,
    "created_at": "2025-10-29T14:23:51.668854Z",
    "updated_at": "2025-10-29T14:23:51.668868Z",
    "lead_time": 7.187,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestModelManagerTests.test_initial__pickup_address_default",
    "text": "def test_initial__pickup_address_default(self) -> None:\n    \"\"\"\n    Given:\n        - any site\n        - with request_type with pickup default address\n    When i have create a request\n    Then first step address is equal to pickup default address\n    \"\"\"\n    site = self.any_site(with_request_type=True)\n    address = self.any_address(with_site=site)\n    request_type_framed = site.requesttype_set.filter(name=\"framed\").first()\n    request_type_framed.pickup_default = address\n    request_type_framed.save()\n\n    user = self.any_user(sites=[site.pk])\n    request = Request.objects.initial(site=site, creator=user, type=request_types.framed)\n    step = request.steps.filter(position=0).first()\n    assert_that(\n        step,\n        has_properties(\n            {\n                \"address_name\": address.name,\n                \"address_1\": address.address_1,\n                \"address_2\": address.address_2,\n                \"postal_code\": address.postal_code,\n                \"city\": address.city,\n                \"country\": address.country,\n                \"contact\": address.default_contact,\n                \"comment\": address.default_comment,\n                \"timezone\": address.timezone,\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 9,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 6.0
    },
    "id": 4,
    "score": "4",
    "annotator": 1,
    "annotation_id": 54,
    "created_at": "2025-10-29T14:24:29.175809Z",
    "updated_at": "2025-10-29T14:24:29.175825Z",
    "lead_time": 37.326,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/private_api/v34/tests/test_resynchro_task_api.py:ResynchroTaskAPITests.test_create_resynchro_task__already_in_progress",
    "text": "def test_create_resynchro_task__already_in_progress(self) -> None:\n    hss = self.any_hss()\n    self.any_resynchro_task(hss=hss, source=resynchro_task_sources.private_api)\n    url = reverse(\"private:v34:scenarios:resynchrotask-list\")\n    response = self.client.post(url, data={\"contract_number\": hss.site.contract.contract_number})\n    assert_that(response.status_code, is_(409), response.content)\n    assert_that(ResynchroTask.objects.count(), is_(1))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 5,
    "score": "4",
    "annotator": 1,
    "annotation_id": 55,
    "created_at": "2025-10-29T14:24:40.980693Z",
    "updated_at": "2025-10-29T14:24:40.980711Z",
    "lead_time": 11.627,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/transitions/request/framed/test_begin.py:FramedStateMachineBeginTests.test_begin__from_planned",
    "text": "def test_begin__from_planned(self) -> None:\n    request = self.any_framed_request(state=request_states.planned)\n    with handle_shipping_record_notifications():\n        request = request.state_machine(user=request.creator).begin().request\n    request.refresh_from_db()\n    assert_that(request.state, is_(request_states.in_progress))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 6,
    "score": "4",
    "annotator": 1,
    "annotation_id": 56,
    "created_at": "2025-10-29T14:24:46.854634Z",
    "updated_at": "2025-10-29T14:24:46.854646Z",
    "lead_time": 5.714,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/hik/drivers/tests/test_drivers.py:HikDriverTests.test_driver_factory_hik",
    "text": "def test_driver_factory_hik(self) -> None:\n    hss = self.any_hss(remote_proxy=remote_proxies.hik)\n    driver = driver_factory.get_driver(hss)\n    assert_that(driver, instance_of(HssDriver))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 7,
    "score": "4",
    "annotator": 1,
    "annotation_id": 57,
    "created_at": "2025-10-29T14:25:00.239099Z",
    "updated_at": "2025-10-29T14:25:00.239111Z",
    "lead_time": 13.233,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/notifications/tests/rules/test_global.py:GlobalRulesTests.test_rules__no_permission",
    "text": "def test_rules__no_permission(self) -> None:\n    \"\"\"\n    Given\n        a user creator u1 with no role\n        a global rule ON\n        a request\n    When I find users\n    Then nothing is returned\n    \"\"\"\n    u1 = self.any_user(roles=[])\n    request = self.any_request(state=\"draft\", creator=u1)\n    self.any_global_rule(request_type=request.type, event=events.on_enter_state, state=request.state)\n\n    users = notification_rules._find_users_to_notify(\n        request=request, event=events.on_enter_state, old_state=request.state, state=request.state\n    )\n\n    assert_that(users, empty())",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 7.0
    },
    "id": 8,
    "score": "5",
    "annotator": 1,
    "annotation_id": 58,
    "created_at": "2025-10-29T14:25:50.570481Z",
    "updated_at": "2025-10-29T14:25:50.570497Z",
    "lead_time": 21.148,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/transitions/request/quoted/test_save_and_quit.py:QuotedStateMachineSaveAndQuitTests.test_save_and_quit_increment_request_version",
    "text": "def test_save_and_quit_increment_request_version(self) -> None:\n    request = self.any_quoted_request(state=request_states.qualification)\n    request_version = request.version\n    request = request.state_machine(user=request.creator).save_and_quit().request\n    assert_that(request.version > request_version)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 9,
    "score": "4",
    "annotator": 1,
    "annotation_id": 59,
    "created_at": "2025-10-29T14:25:57.968647Z",
    "updated_at": "2025-10-29T14:25:57.968660Z",
    "lead_time": 7.23,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/crm/tests/test_task_buyer_notifier.py:BuyerNotifierTestCase.test_user_needs_notify__dont_allow_crm",
    "text": "def test_user_needs_notify__dont_allow_crm(self) -> None:\n    \"\"\"\n    Given a registered user with one order sold and with push token\n          an active notifier\n    When refreshing notifier\n    Then notifier is still in inactive state\n    \"\"\"\n    zone_context = ZoneContextMixin().any_zone_context()\n    user = self.any_user(mangopay_card=mangopay_cards.normal)\n    self.client = AuthenticatedClient(user=user)\n    self.any_order_sold(zone_context=zone_context)\n    reminder = user.occasional_buyer_notifier_set.first()\n    reminder.refresh_from_db()\n    reminder.state = occasional_buyer_notifier_states.needs_notify\n    reminder.save()\n    user.allow_crm = False\n    user.save()\n    launch_all_occasional_buyer_notifier()\n    reminder.refresh_from_db()\n    assert_that(reminder.state, is_(occasional_buyer_notifier_states.inactive))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 7,
      "dc_coherence_codet5": 71,
      "docstring_strength": 5.0
    },
    "id": 10,
    "score": "3",
    "annotator": 1,
    "annotation_id": 60,
    "created_at": "2025-10-29T14:26:20.923888Z",
    "updated_at": "2025-10-29T14:26:20.923906Z",
    "lead_time": 22.798,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_api_scenario_type.py:ScenarioTypeUniverseApi60Tests.test_list_scenario_type_universe__no_scenario_type_univers",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_type_universe__no_scenario_type_univers(self) -> None:\n    \"\"\"\n    Given : 0 inital scenarios type universe\n    When : I list scenario type universe\n    Then : Http response is 200, response contain 0 Scenario Type\n    \"\"\"\n    ScenarioTypeUniverse.objects.all().delete()\n    last_response = self.when_i_list_scenario_type_universe()\n    assert_that(last_response.status_code, is_(200))\n    assert_that(last_response.json(), has_length(0))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 11,
    "score": "4",
    "annotator": 1,
    "annotation_id": 61,
    "created_at": "2025-10-29T14:26:38.134043Z",
    "updated_at": "2025-10-29T14:26:38.134071Z",
    "lead_time": 17.04,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_promotional_offer.py:CartPromotionalOfferDiscountedTestCase.test_promotional_offer_discounted_multiple_inverse",
    "text": "def test_promotional_offer_discounted_multiple_inverse(self) -> None:\n    \"\"\"\n    Given a station with promotional offer for a discounted item\n    When\n        I add two discounted item to cart\n        I add two required item to cart\n    Then the discounted items are discounted automatically\n    \"\"\"\n    cart = self.any_cart()\n    promotional_offer = self.promotional_offer_discounted\n    station = self.station\n    required_deal, discounted_deals = promotional_offer.get_deals_for_station(station)\n    discounted_deal = discounted_deals[0]\n    required_deal = required_deal[0]\n    self.add_item(cart, discounted_deal.washing_program.best_deal, quantity=2)\n    self.add_item(cart, required_deal, quantity=2)\n    assert_that(cart.cartitem_set.count(), is_(2))\n    for cart_item in cart.cartitem_set.all():\n        assert_that(cart_item.quantity, is_(2))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 6.0
    },
    "id": 12,
    "score": "3",
    "annotator": 1,
    "annotation_id": 62,
    "created_at": "2025-10-29T14:27:06.452285Z",
    "updated_at": "2025-10-29T14:27:06.452296Z",
    "lead_time": 28.162,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/faq/tests/test_admin.py:CategoryAdminTests.test_form__duplicate",
    "text": "def test_form__duplicate(self) -> None:\n    \"\"\"\n    Given :\n        a category\n        a dict with a representation of a category with same title\n    when I save the form\n    Then I have an error\n    \"\"\"\n    category_1 = self.any_category()\n    data = {\n        \"title\": category_1.title,\n        \"slug_icon\": subjects_slug.card,\n        \"order\": 1,\n    }\n    form = CategoryForm(data)\n    form_valid = form.is_valid()\n\n    assert_that(form_valid, is_(False))\n    assert_that(str(form.errors), contains_string(\"Une catégorie avec ce titre existe déjà:\"))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 13,
    "score": "5",
    "annotator": 1,
    "annotation_id": 63,
    "created_at": "2025-10-29T14:27:15.285509Z",
    "updated_at": "2025-10-29T14:27:15.285520Z",
    "lead_time": 8.69,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/quoted/test_planned.py:MyRequestQuotedPermissionBackendTest.test_can_cancel__my_request__with_notice_period__from_planned",
    "text": "def test_can_cancel__my_request__with_notice_period__from_planned(self) -> None:\n    \"\"\"\n    Given a state_machine in 'planned' state\n    When i cancel before the notice perioed\n    then permission is false\n    else permission is true\n    \"\"\"\n    for role in {\n        permission_roles.user,\n        permission_roles.supervisor,\n        permission_roles.idea_supervisor,\n        permission_roles.manager,\n        permission_roles.manager,\n        permission_roles.third_party_operator,\n        permission_roles.tms_operator,\n    }:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        first_january = datetime.datetime(2018, 1, 1, 9, 0, 0)\n        with freeze_time(first_january):\n            my_request = self.any_quoted_request(creator=u1, state=request_states.planned)\n\n        # the scheduled_time for this test is computed in\n        # iwp_myroad.test.context_managers.NotificationMock line 191\n        # wich corresponds to datetime.datetime(2018, 1, 10, 9, 0, 0)\n\n        with freeze_time(datetime.datetime(2018, 1, 3, 8, 59, 59)):  # Before notice period start\n            assert_that(\n                u1.has_perm(request_permissions.can_cancel, obj=my_request),\n                is_(can_cancel_from_planned_expected_result[role][\"my_request\"]),\n            )\n\n        with freeze_time(datetime.datetime(2018, 1, 3, 9, 0, 0)):  # After notice period start\n            expected_matcher = (\n                is_(can_cancel_from_planned_expected_result[role][\"my_request\"])\n                if role is permission_roles.tms_operator\n                else is_(False)\n            )\n            assert_that(\n                u1.has_perm(request_permissions.can_cancel, obj=my_request),\n                expected_matcher,\n            )",
    "metrics": {
      "line_count": 11,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 5,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 5.0
    },
    "id": 14,
    "score": "2",
    "annotator": 1,
    "annotation_id": 64,
    "created_at": "2025-10-29T14:27:52.526056Z",
    "updated_at": "2025-10-29T14:27:52.526071Z",
    "lead_time": 37.064,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/test_models.py:UserTestCase.test_first_last_order_date",
    "text": "def test_first_last_order_date(self) -> None:\n    \"\"\"\n    Given a user with 2 order\n    When I get first and last order date\n    Then it matches with the orders date\n    \"\"\"\n    user = self.any_user()\n    order_1 = self.any_order(user=user)\n    order_2 = self.any_order(user=user)\n    assert_that(user.first_order_date, is_(order_1.sold_date))\n    assert_that(user.last_order_date, is_(order_2.sold_date))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 15,
    "score": "5",
    "annotator": 1,
    "annotation_id": 65,
    "created_at": "2025-10-29T14:28:01.990517Z",
    "updated_at": "2025-10-29T14:28:01.990529Z",
    "lead_time": 9.302,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_quoted.py:QuotedRequestActionTests.test_no_step_pu",
    "text": "@unittest.skip(\"Impossible to have that use case by design ! Should be delete ?\")\ndef test_no_step_pu(self) -> None:  # pragma: no cover # noqa: RMS201\n    \"\"\"\n    When submit form without step pu\n    Then an alert must be shown\n    \"\"\"\n    request = self.any_quoted_request(state=request_states.initial, creator=self.client.user)\n    [step.step_packaging_units.all().delete() for step in request.steps.all()]\n    with self.assertRaises(RequestActionPage.RequestForm.Error) as em:\n        RequestActionPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk).form.submit()\n    assert_that(em.exception.soup.find(\"button\", attrs={\"id\": \"update-steps-error-alert-button\"}), not_none())",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 3.0
    },
    "id": 16,
    "score": "1",
    "annotator": 1,
    "annotation_id": 66,
    "created_at": "2025-10-29T14:28:14.119433Z",
    "updated_at": "2025-10-29T14:28:14.119446Z",
    "lead_time": 11.964,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/tests/test_hss_model.py:HssModelTests.test_resynchro_scenario_with_exception",
    "text": "@vcr.use_cassette()\ndef test_resynchro_scenario_with_exception(self) -> None:\n    \"\"\"\n    Given the hss of account test.ripplemotion@gmail.com\n          with a scenario published with is_on == True and unknow source_id list\n          with a scenario published with is_on == True and correct source_id\n    When I resynchro scenarios\n    Then the scenario with unknow source_id list is in state ready, is_on == False, source_id == None\n         the scenario with correct source_id is unchanged\n    \"\"\"\n    hss = ClimaxHandlerClient().hss\n    hss.remote_proxy = remote_proxies.climax_kiz\n    hss.save()\n    scenario_correct = self.any_scenario(hss=hss, state=states.published)\n    scenario = self.any_scenario(hss=hss)\n    scenario.source_id = []\n    scenario.is_on = True\n    scenario.state = states.published\n\n    scenario.save()\n    with mock.patch.object(HomeSecuritySystem, \"scenarios\", return_value=None):  # noqa: RMS102\n        with mock.patch(  # noqa: RMS102\n            \"django.db.models.query.QuerySet.delete\", side_effect=[Exception, Exception, Exception, Exception]\n        ):\n            # with mock.patch(\"\", return_value=[0]):\n            hss = hss.resynchro_scenario()\n    scenario.refresh_from_db()\n    assert_that(scenario.state, is_(states.published))\n    assert_that(scenario.is_on, is_(True))\n    assert_that(scenario_correct.state, is_(states.published))\n    assert_that(scenario_correct.is_on, is_(True))\n    assert_that(scenario_correct.source_id, is_not(none()))",
    "metrics": {
      "line_count": 18,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 3,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 87,
      "docstring_strength": 7.0
    },
    "id": 17,
    "score": "1",
    "annotator": 1,
    "annotation_id": 67,
    "created_at": "2025-10-29T14:28:28.222910Z",
    "updated_at": "2025-10-29T14:28:28.222931Z",
    "lead_time": 13.93,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_honeywell_calendar.py:UpdateScenarioApiTestCase.test_update_scenarios",
    "text": "@vcr.use_cassette()\ndef test_update_scenarios(self) -> None:\n    \"\"\"\n    Given : A scenario with two actions\n            A new dict representing this scenario with only one action\n    When : I put this dict\n    Then : I get a 200 HTTP response, a dict representing the scenario with only one action\n    \"\"\"\n    action = self.initial_scenario.info.actions[0]\n    new_scenario_info = ScenarioInfo(\n        condition=self.initial_scenario.info.condition,\n        actions=[\n            action,\n        ],\n        remote_proxy=self.driver.hss.remote_proxy,\n    )\n    self.initial_scenario.info = new_scenario_info\n    data = self.any_scenario_data(self.initial_scenario)\n    self.initial_scenario.scenario_type.action_type.append(ActionType.CHANGE_PANEL_STATUS_ON)\n    self.initial_scenario.scenario_type.save()\n    last_response = self.when_i_update_scenario(data, self.initial_scenario.pk)\n    assert_that(last_response.status_code, is_(200), last_response.content)\n    assert_that(last_response.json(), is_(not_none()))\n    assert_that(last_response.json(), has_entry(\"fields\", not_none()))\n    fields = last_response.json()[\"fields\"]\n    assert_that(fields, has_entry(\"actions\", not_none()))\n    assert_that(fields[\"actions\"], has_length(1))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 5.0
    },
    "id": 18,
    "score": "3",
    "annotator": 1,
    "annotation_id": 68,
    "created_at": "2025-10-29T14:28:34.345484Z",
    "updated_at": "2025-10-29T14:28:34.345503Z",
    "lead_time": 5.961,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_myr_285.py:MYR285Tests.test_issue_is_fixed__user",
    "text": "def test_issue_is_fixed__user(self) -> None:\n    site = self.any_site()\n    u1 = self.any_user(roles=[permission_roles.tms_operator], sites=[site.pk])\n    u2 = self.any_user(roles=[permission_roles.idea_supervisor], sites=[site.pk])\n    self.client = AuthenticatedClient(user=u1)\n\n    request = self.any_quoted_request(\n        state=request_states.qualification,\n        creator=u2,\n        site=site,\n        with_additional_quotes=True,\n        with_attachments=[request_attachments.carriage_adr],\n    )\n    page = RequestActionPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk)\n    file_browse_button = page.soup.find(\"button\", attrs={\"name\": \"additionalquote_set-0-attachment-file-browse\"})\n    file_input = page.soup.find(\"input\", attrs={\"name\": \"additionalquote_set-0-attachment-file-input\"})\n    assert_that(file_browse_button.has_attr(\"readonly\"), is_(True))\n    assert_that(file_input.has_attr(\"disabled\"), is_(True))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 19,
    "score": "4",
    "annotator": 1,
    "annotation_id": 69,
    "created_at": "2025-10-29T14:29:24.574461Z",
    "updated_at": "2025-10-29T14:29:24.574472Z",
    "lead_time": 50.061,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/bec/api/v50/tests/test_serializers.py:PersonSerializersTests.test_update_person_serializers",
    "text": "def test_update_person_serializers(self) -> None:\n    \"\"\"\n    Given a hss\n    Given a code associated to the hss\n    Given data with code_index\n    When I serialize data\n    Then data is valid\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    code = self.any_climax_kiz_code(hss=hss)\n    data = {\"code_pk\": f\"1_{code.index}\"}\n    serializer = UpdatePersonSerializer(context={\"contract\": hss.site.contract}, data=data)\n    serializer.is_valid(raise_exception=True)\n    assert_that(serializer.validated_data, has_entry(\"code_pk\", code.index))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 6.0
    },
    "id": 20,
    "score": "5",
    "annotator": 1,
    "annotation_id": 70,
    "created_at": "2025-10-29T14:29:30.860849Z",
    "updated_at": "2025-10-29T14:29:30.860863Z",
    "lead_time": 6.122,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_captures.py:ListTests.test_list__invalid_response_json",
    "text": "@vcr.use_cassette()\ndef test_list__invalid_response_json(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with Essentielle panel\n        - a HssDriver\n    When:\n        - I list captures an invalid json response (bad values into body from cassette)\n    Then:\n        - I get a BadResponse exception\n    \"\"\"\n    hss = self.any_configured_hss(account=papillon_essentielle_account)\n    driver = driver_factory.get_driver(hss)\n    with mock.patch.object(ListResponseSerializer, \"is_valid\", side_effect=ValidationError):  # noqa: RMS102\n        assert_that(calling(driver.captures.list), raises(BadResponse))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 8.0
    },
    "id": 21,
    "score": "2",
    "annotator": 1,
    "annotation_id": 71,
    "created_at": "2025-10-29T14:29:53.452476Z",
    "updated_at": "2025-10-29T14:29:53.452488Z",
    "lead_time": 22.418,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/payline/api/v40/tests/test_serializers.py:WidgetCancelSerializerTestCase.test_error",
    "text": "def test_error(self) -> None:\n    serializer = WidgetCancelURLSerializer(data={})\n    call = calling(serializer.is_valid).with_args(raise_exception=True)\n    assert_that(call, raises(serializers.ValidationError))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 48,
      "docstring_strength": 0.0
    },
    "id": 22,
    "score": "4",
    "annotator": 1,
    "annotation_id": 72,
    "created_at": "2025-10-29T14:30:07.407914Z",
    "updated_at": "2025-10-29T14:30:07.407928Z",
    "lead_time": 13.778,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_toast_messages.py:ToastMessagesTests.test_save_initial__message",
    "text": "def test_save_initial__message(self) -> None:\n    \"\"\"\n    Given any request in initial state\n    When I save the form\n    Then :\n        - toast message is \"Brouillon enregistré\"\n        - toast message tag is \"info\"\n    \"\"\"\n    self.client = AuthenticatedClient()\n    request = self.any_request(state=request_states.initial, creator=self.client.user)\n    page = RequestActionPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk).form.save()\n    request.refresh_from_db()\n    assert_that(request.state, is_(request_states.draft))\n    toast_messages = [m for m in messages.get_messages(page.initial_response.wsgi_request)][0]\n    assert_that(toast_messages.message, is_(\"Brouillon enregistré\"))\n    assert_that(toast_messages.tags, is_(\"default\"))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 23,
    "score": "5",
    "annotator": 1,
    "annotation_id": 73,
    "created_at": "2025-10-29T14:30:16.875055Z",
    "updated_at": "2025-10-29T14:30:16.875073Z",
    "lead_time": 9.306,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v70/tests/cards/test_api_update.py:UpdateMangopayCardRegistrationAPITestCase.test_update__anonymous",
    "text": "@override_settings(NEED_DEFAULT_PROMOCODE=True)\ndef test_update__anonymous(self) -> None:\n    self.client = AnonymousClient()\n    self.when_i_create_card_registration()\n\n    assert_that(self.last_response, http(403))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 59,
      "docstring_strength": 0.0
    },
    "id": 24,
    "score": "4",
    "annotator": 1,
    "annotation_id": 74,
    "created_at": "2025-10-29T14:30:23.571807Z",
    "updated_at": "2025-10-29T14:30:23.571820Z",
    "lead_time": 6.546,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/request_update_steps/test_step_form.py:StepFormTests.test_form__merge_carriage",
    "text": "def test_form__merge_carriage(self) -> None:\n    \"\"\"\n    Given a request with 2 step carriage\n    When i save step form with one updated, one deleted and one new carriage\n    Then it has been merged\n    \"\"\"\n    request = self.any_request(\n        state=request_states.draft,\n        ready_to_submit=True,\n        with_packaging_units=False,\n        with_carriages=True,\n        with_step_units=False,\n    )\n    src_step, trg_step = request.steps.all()\n    assert src_step\n    assert src_step.step_packaging_units.count() == 0\n    c_1 = request.carriages.first()\n    assert c_1\n    self.any_step_carriage(step=src_step, carriage=c_1)\n    data = self.any_step_form_data(steps=request.steps.all())\n    formset = make_step_formset_class(instance=request, user=request.creator)(instance=request, data=data)\n\n    formset._merge_step_carriages(carriages=[c_1])\n\n    assert_that(StepCarriage.objects.filter(step=src_step).all(), has_length(1))\n    assert_that(StepCarriage.objects.filter(step=trg_step).all(), has_length(1))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 25,
    "score": "3",
    "annotator": 1,
    "annotation_id": 75,
    "created_at": "2025-10-29T14:31:00.688712Z",
    "updated_at": "2025-10-29T14:31:00.688724Z",
    "lead_time": 36.958,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/mangopay/test_buy.py:Simple3DSBuyTestCase.test_buy_deal__mocked",
    "text": "@with_mango_mocks()\ndef test_buy_deal__mocked(self) -> None:\n    \"\"\"\n    Given\n        a deal\n        a user with 3DS card\n    When i buy deal\n    Then order is success\n    \"\"\"\n    user = self.any_user(\n        mangopay_card=mangopay_cards.secure, secure_mode_version=secure_mode_versions.secure_mode_3ds2\n    )\n    deal = self.any_deal()\n\n    order = self.when_i_buy(deal=deal, user=user, payment_method=payment_methods.mangopay)\n\n    transaction = order.transaction.wait_for_completion()\n    order.refresh_from_db()\n\n    assert_that(transaction.state, is_(transaction_states.success))\n    assert_that(order.status, is_(order_states.success))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 6.0
    },
    "id": 26,
    "score": "4",
    "annotator": 1,
    "annotation_id": 76,
    "created_at": "2025-10-29T14:31:26.457652Z",
    "updated_at": "2025-10-29T14:31:26.457666Z",
    "lead_time": 25.613,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/replication/tests/test_serializers.py:RequestSerializerTests.test_request__created_step__position__str",
    "text": "def test_request__created_step__position__str(self) -> None:\n    request = self.any_request(state=request_states.draft)\n    Step.objects.create_at_position(\n        request=request, type=step_types.pickup, position=\"1\", perform_validation=False\n    )\n    serializer = RequestSerializer(request)\n    assert_that(serializer.data, is_(request_data(request=request)))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 27,
    "score": "4",
    "annotator": 1,
    "annotation_id": 77,
    "created_at": "2025-10-29T14:31:34.053296Z",
    "updated_at": "2025-10-29T14:31:34.053310Z",
    "lead_time": 7.401,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_parsers.py:ParserKiz3PadMobileActionTestCase.test_parse_action_power_switch__onduring",
    "text": "@vcr.use_cassette()\ndef test_parse_action_power_switch__onduring(self) -> None:\n    contract = ContractMixin().any_climax_contract()\n    hss = HssMixin().any_hss(user=contract.user, contract=contract, remote_proxy=remote_proxies.climax_kiz)\n    parsed_action = Kiz3PadMobileParser().parse_action(\n        1, \"a=1&z=4&sw=on&pd=100\", hss.driver.scenarios.list_scenario_devices()\n    )\n    assert_that(parsed_action, instance_of(PowerSwitchActionClimax))\n    assert_that(parsed_action.status, is_(\"on\"))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 28,
    "score": "4",
    "annotator": 1,
    "annotation_id": 78,
    "created_at": "2025-10-29T14:31:42.633660Z",
    "updated_at": "2025-10-29T14:31:42.633677Z",
    "lead_time": 8.426,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/test_replication.py:ReplicationTests.test_not_publish_framed",
    "text": "def test_not_publish_framed(self) -> None:\n    for state in {request_states.initial, request_states.dropped}:\n        with self.subTest(state=state):\n            with mock.patch(\"iwp.replication.sites.client.publish\") as m:  # noqa: RMS102\n                self.any_framed_request(state=state, creator=self.user)\n            m.assert_not_called()",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 2,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 29,
    "score": "2",
    "annotator": 1,
    "annotation_id": 79,
    "created_at": "2025-10-29T14:31:50.958759Z",
    "updated_at": "2025-10-29T14:31:50.958779Z",
    "lead_time": 8.156,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v60/tests/test_api_powerswitch_honeywell.py:PowerSwitchTests.test_change_power_switch_icon",
    "text": "@vcr.use_cassette()\ndef test_change_power_switch_icon(self) -> None:\n    power_switch_data = self.when_i_list_power_switches_for_hss(self.client.hss)[0]\n    new_icon = \"light\" if power_switch_data[\"fields\"][\"icon\"] == \"toy\" else \"toy\"\n\n    self.when_i_update_power_switch_icon(self.client.hss.pk, power_switch_data[\"pk\"], new_icon)\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_204_NO_CONTENT))\n    self.then_power_switch_icon_is(self.client.hss, power_switch_data[\"pk\"], new_icon)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 30,
    "score": "3",
    "annotator": 1,
    "annotation_id": 80,
    "created_at": "2025-10-29T14:32:00.902818Z",
    "updated_at": "2025-10-29T14:32:00.902831Z",
    "lead_time": 9.783,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/maia/tests/test_models.py:ConnectionModelTests.test_delete_from_remote_and_local_given_remote_connection",
    "text": "@vcr.use_cassette()\ndef test_delete_from_remote_and_local_given_remote_connection(self) -> None:\n    \"\"\"\n    Given any remote connection\n    When I delete it from remote and local\n    Then the connection is deactivate from remote\n    Then the connection is deleted from db\n    \"\"\"\n    connection = self.any_remote_connection()\n    connection_pk = connection.id\n    hss = connection.hss\n\n    connection.delete_from_remote_and_local()\n\n    list_connections = MaiaDriver(contract=hss.site.contract).list_connections(hss)\n    assert_that(list_connections, not_(has_item(has_property(\"id\", connection_pk))))\n    assert_that(\n        calling(Connection.objects.get).with_args(pk=connection_pk),\n        raises(Connection.DoesNotExist),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 5.0
    },
    "id": 31,
    "score": "4",
    "annotator": 1,
    "annotation_id": 81,
    "created_at": "2025-10-29T14:32:13.294869Z",
    "updated_at": "2025-10-29T14:32:13.294884Z",
    "lead_time": 12.238,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_models.py:GlobalPromoCodeTestCase.test_global_promo_code_passed_and_no_expiration",
    "text": "def test_global_promo_code_passed_and_no_expiration(self) -> None:\n    user = self.any_user()\n    promocode = self.any_promo_code_passed_no_expiration(user)\n\n    self.when_i_fetch_specific_promo_codes_for_user(user, promocode.code)\n    self.then_there_are_n_promocodes(1)\n    self.when_i_fetch_listed_promo_codes_for_user(user)\n    self.then_there_are_n_promocodes(1)",
    "metrics": {
      "line_count": 6,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 16,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 32,
    "score": "2",
    "annotator": 1,
    "annotation_id": 82,
    "created_at": "2025-10-29T14:42:28.676074Z",
    "updated_at": "2025-10-29T14:42:28.676087Z",
    "lead_time": 615.148,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart.py:CartTestCase.test_cart__update__promocode__offered_product",
    "text": "def test_cart__update__promocode__offered_product(self) -> None:\n    \"\"\"\n    Given\n        a cart\n        a promocode offering a product\n    When i update cart\n    Then a cart item has been added linked to a deal type offered washing\n    \"\"\"\n    station = self.any_station()\n    washing_program_to_be_offered = self.any_washing_program(station=station)\n    purchased_washing_program = self.any_washing_program(station=station)\n    deal = self.any_deal(washing_program=purchased_washing_program)\n    promocode = self.any_promocode(\n        profile=promocode_profiles.v2_offered_product,\n        version=2,\n        product_to_offer=washing_program_to_be_offered.product,\n    )\n    cart = self.any_cart(profile=cart_profiles.deal_washing, state=cart_states.active, deal=deal)\n\n    cart.update(promocode=promocode)\n\n    assert_that(cart.state, is_(cart_states.active))\n    assert_that(cart.offered_cartitems, has_length(1))\n    assert_that(cart.offered_cartitems.first().deal.type, is_(deal_types.offered_washing))\n    assert_that(cart.offered_cartitems.first().deal.washing_program, is_(washing_program_to_be_offered))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 6.0
    },
    "id": 33,
    "score": "4",
    "annotator": 1,
    "annotation_id": 83,
    "created_at": "2025-10-29T14:43:55.298653Z",
    "updated_at": "2025-10-29T14:43:55.298668Z",
    "lead_time": 86.433,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/maia/tests/test_drivers.py:MaiaScenarioDriverTests.test_activate_unexisting_scenario",
    "text": "@vcr.use_cassette()\ndef test_activate_unexisting_scenario(self) -> None:\n    \"\"\"\n    Given a unexisting scenario in maia\n    When I try to activate it\n    Then NotFound\n    \"\"\"\n    assert_that(\n        calling(self.maia_scenario_driver.activate_scenario).with_args(\n            scenario=MaiaScenario(\n                uuid=UUID(\"2eb28e47-6794-4f01-a5c8-541e2258fe76\"),\n                mirror_scenario_uuid=UUID(\"2eb28e47-6794-4f01-a5c8-541e2258fe76\"),\n            ),\n        ),\n        raises(NotFound),\n    )",
    "metrics": {
      "line_count": 1,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 34,
    "score": "4",
    "annotator": 1,
    "annotation_id": 84,
    "created_at": "2025-10-29T14:44:10.549181Z",
    "updated_at": "2025-10-29T14:44:10.549197Z",
    "lead_time": 15.074,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/transitions/request/framed/test_cancel.py:FramedStateMachineTests.test_cancel_increment_request_version",
    "text": "def test_cancel_increment_request_version(self) -> None:\n    request = self.any_framed_request(state=request_states.draft, ready_to_submit=False)\n    request_version = request.version\n    request = request.state_machine(user=request.creator).cancel(\"test\").request\n    assert_that(request.version > request_version)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 35,
    "score": "4",
    "annotator": 1,
    "annotation_id": 85,
    "created_at": "2025-10-29T14:44:17.493012Z",
    "updated_at": "2025-10-29T14:44:17.493029Z",
    "lead_time": 6.779,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_scenario_type_models.py:ScenarioTypeManagerTestCase.test_power_condition_keeped",
    "text": "def test_power_condition_keeped(self) -> None:\n    self.any_scenario_type_with_status_condition_type(StatusConditionType.POWER_GREATER_THAN)\n    condition = PowerCondition(pk=1, area=1, zone=1, power=1000)\n    scenario = Scenario(pk=1, condition=condition, action=None)\n\n    scenario_types = ScenarioType.objects.scenario_types_for_scenario(self.hss.remote_proxy, scenario)\n\n    self.assertEqual(scenario_types.count(), 1)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 36,
    "score": "4",
    "annotator": 1,
    "annotation_id": 86,
    "created_at": "2025-10-29T14:44:22.729447Z",
    "updated_at": "2025-10-29T14:44:22.729463Z",
    "lead_time": 5.061,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/test_iwp_238.py:Issue238Tests.test_issue_is_fixed",
    "text": "def test_issue_is_fixed(self) -> None:\n    \"\"\"\n    load fixture pack corresponding to our test data\n    \"\"\"\n    load_fixture_pack(\"iwp_238\", root=Path(__file__).parent)\n    request = Request.objects.get(uuid=\"6016c7c3-ae03-4a4b-8878-6b82ad72edb5\")\n    assert_that(request.state, is_(request_states.completed))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 59,
      "docstring_strength": 2.0
    },
    "id": 37,
    "score": "5",
    "annotator": 1,
    "annotation_id": 87,
    "created_at": "2025-10-29T14:44:27.997508Z",
    "updated_at": "2025-10-29T14:44:27.997530Z",
    "lead_time": 5.103,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_item.py:CartItemModelTestCase.test_add_cart_item_product_voucher__affected_by_promocode",
    "text": "def test_add_cart_item_product_voucher__affected_by_promocode(self) -> None:\n    \"\"\"\n    Given a user with\n        - An empty cart\n        - A product voucher for product P1\n        - A deal affected by a promocode\n    When I add a washing program for product P1 to the cart\n    Then the cart have a deal without product voucher\n    \"\"\"\n    self.any_product_voucher(\n        product=self.product, product_voucher_account=self.user.product_voucher_account_set.first()\n    )\n    cart = self.any_cart(state=cart_states.empty, user=self.user, with_promocode=True)\n\n    cart.add_item(deal=self.deal)\n\n    deal = cart.cartitem_set.first().deal\n    assert_that(deal.product_voucher, is_(none()))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 7.0
    },
    "id": 38,
    "score": "5",
    "annotator": 1,
    "annotation_id": 88,
    "created_at": "2025-10-29T14:44:40.194674Z",
    "updated_at": "2025-10-29T14:44:40.194734Z",
    "lead_time": 12.036,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/featured_promotions/test_models.py:FeaturedPromotionModelTestCase.test_featured_promotion__without_promotion",
    "text": "def test_featured_promotion__without_promotion(self) -> None:\n    \"\"\"\n    Create a featured promotion without promocode\n    \"\"\"\n    fp = FeaturedPromotion.objects.create(\n        title=\"Lavage gratuit\", description=\"Profitez d'un lavage gratuit\", slug=\"free_washing\"\n    )\n    assert_that(FeaturedPromotion.objects.get(uuid=fp.uuid), is_(fp))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 2.0
    },
    "id": 39,
    "score": "5",
    "annotator": 1,
    "annotation_id": 89,
    "created_at": "2025-10-29T14:44:46.658988Z",
    "updated_at": "2025-10-29T14:44:46.659004Z",
    "lead_time": 6.319,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:AlarmStatusConditionFormTestCase.test_form_other_invalid",
    "text": "def test_form_other_invalid(self) -> None:\n    data = {\n        \"status\": \"456\",  # bad value\n    }\n\n    form = AlarmStatusConditionForm(data=data)\n\n    self.assertFalse(form.is_valid())",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 48,
      "docstring_strength": 0.0
    },
    "id": 40,
    "score": "2",
    "annotator": 1,
    "annotation_id": 90,
    "created_at": "2025-10-29T14:45:24.772294Z",
    "updated_at": "2025-10-29T14:45:24.772315Z",
    "lead_time": 17.47,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_emails.py:EmailsTestCase.test_send_email_twip_booking_confirmation",
    "text": "@override_settings(ALLOW_SEND_EMAIL=True)\ndef test_send_email_twip_booking_confirmation(self) -> None:\n    \"\"\"\n    Given an order with booking\n    When i call send_email_twip_booking_confirmation\n    Then Message send method is called\n    \"\"\"\n    order = self.any_order(profile=order_profiles.dummy_booking, payment_method=payment_methods.dummy_booking)\n    with self.captureOnCommitCallbacks(execute=True):\n        order.send_email_twip_booking_confirmation()\n    self.assertEqual(len(mail.outbox), 1)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 41,
    "score": "5",
    "annotator": 1,
    "annotation_id": 91,
    "created_at": "2025-10-29T14:45:32.016259Z",
    "updated_at": "2025-10-29T14:45:32.016282Z",
    "lead_time": 7.088,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/serializers/tests/test_keypads.py:UpdateResponseSerializerTests.test_serializer__valid",
    "text": "def test_serializer__valid(self) -> None:\n    climax_panel_cond_post_json = load(\"climax_panel_device_post_valid.json\")\n    serializer = UpdateResponseSerializer(data=climax_panel_cond_post_json)\n    serializer.is_valid(raise_exception=True)\n    assert_that(serializer.data[\"message\"], is_(\"OK\"))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 42,
    "score": "4",
    "annotator": 1,
    "annotation_id": 92,
    "created_at": "2025-10-29T14:45:43.855101Z",
    "updated_at": "2025-10-29T14:45:43.855114Z",
    "lead_time": 11.684,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_filter_status.py:FilterStatesViewTests.test_load__not_found",
    "text": "def test_load__not_found(self) -> None:\n    with self.assertRaises(NotFoundException):\n        RequestFilterStatesPage.get(client=self.client, site_slug=\"unknown\")",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 58,
      "docstring_strength": 0.0
    },
    "id": 43,
    "score": "4",
    "annotator": 1,
    "annotation_id": 93,
    "created_at": "2025-10-29T14:45:55.466939Z",
    "updated_at": "2025-10-29T14:45:55.466977Z",
    "lead_time": 11.459,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_hss_api.py:HSSAPITests.test_update_hss",
    "text": "def test_update_hss(self) -> None:\n    self.when_i_update_hss(self.client.hss, \"updated favourites 123\")\n\n    assert_that(self.last_response.status_code, is_(204))\n    self.client.hss.refresh_from_db()\n    self.assertEqual(self.client.hss.favourite_elements, \"updated favourites 123\")",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 44,
    "score": "2",
    "annotator": 1,
    "annotation_id": 94,
    "created_at": "2025-10-29T14:46:06.449540Z",
    "updated_at": "2025-10-29T14:46:06.449559Z",
    "lead_time": 10.808,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:DeleteScenarioApiTestCase.test_delete_scenario__incorrect_hss_pk",
    "text": "@vcr.use_cassette()\ndef test_delete_scenario__incorrect_hss_pk(self) -> None:\n    \"\"\"\n    Given : A scenario\n    When : I delete this scenario, for an hss that does not exist\n    Then : I get a 404 HTTP response\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss)\n    last_response = self.when_i_delete_scenario(scenario_pk=scenario.pk, hss_pk=1234)\n    assert_that(last_response.status_code, is_(404), last_response.content)\n    assert_that(Scenario.objects.all(), has_length(1))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 45,
    "score": "4",
    "annotator": 1,
    "annotation_id": 95,
    "created_at": "2025-10-29T14:46:15.335696Z",
    "updated_at": "2025-10-29T14:46:15.335715Z",
    "lead_time": 8.712,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_devices.py:ListTests.test_list__invalid_response_json_gsmget",
    "text": "@vcr.use_cassette()\ndef test_list__invalid_response_json_gsmget(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with an Essentielle panel\n        - a HssDriver\n    When:\n        - I list devices with bad data gsmGet json response\n    Then:\n        - I get a BadResponse exception\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_hm)\n    driver = driver_factory.get_driver(hss)\n    with requests_mock.Mocker(real_http=True) as m:\n        m.get(\n            re.compile(r\"/gsmGet\"),\n            status_code=200,\n            json={\"test\": \"test\"},\n        )\n        assert_that(calling(driver.devices.list), raises(BadResponse))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 8.0
    },
    "id": 46,
    "score": "2",
    "annotator": 1,
    "annotation_id": 96,
    "created_at": "2025-10-29T14:46:30.120059Z",
    "updated_at": "2025-10-29T14:46:30.120077Z",
    "lead_time": 14.633,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/tests/test_models.py:CaptureTests.test_from_generic",
    "text": "def test_from_generic(self) -> None:\n    capture = self.any_local_honeywell_capture()\n    assert_that(Capture.objects.from_generic(capture.to_generic()), is_(capture))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 55,
      "docstring_strength": 0.0
    },
    "id": 47,
    "score": "3",
    "annotator": 1,
    "annotation_id": 97,
    "created_at": "2025-10-29T14:46:38.322752Z",
    "updated_at": "2025-10-29T14:46:38.322765Z",
    "lead_time": 8.045,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_filters.py:RequestFilteringTests.test_filter_request__team_requests_in",
    "text": "def test_filter_request__team_requests_in(self) -> None:\n    self.any_request(creator=self.client.user)\n    requests_list = (\n        RequestListPage.get(client=self.client, site_slug=self.client.sites[0].slug)\n        .request_filter.apply(data={\"requests_type\": team_requests.mine}, next_page_class=RequestListPage)\n        .requests_list\n    )\n    assert_that(requests_list, has_length(1))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 48,
    "score": "4",
    "annotator": 1,
    "annotation_id": 98,
    "created_at": "2025-10-29T14:47:04.983768Z",
    "updated_at": "2025-10-29T14:47:04.983788Z",
    "lead_time": 11.612,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:BlindOrSwitchFormTestCase.test_form_valid_power_switch_action_with_duration",
    "text": "def test_form_valid_power_switch_action_with_duration(self) -> None:\n    data = {\n        \"area\": \"1\",\n        \"zone\": \"2\",\n        \"status\": \"on\",\n        \"duration\": \"20\",  # 20 seconds\n    }\n\n    form = BlindOrSwitchActionForm(data=data)\n    is_valid = form.is_valid()\n    power_switch = form.to_model(instance_pk=1, is_blind=False)\n\n    self.assertTrue(is_valid)\n    self.assertEqual(type(power_switch).__name__, \"PowerSwitchAction\")\n    self.assertEqual(power_switch.area, 1)\n    self.assertEqual(power_switch.zone, 2)\n    self.assertEqual(power_switch.status, \"onduring\")\n    self.assertEqual(power_switch.duration, 20)",
    "metrics": {
      "line_count": 10,
      "assertion_count": 6,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 49,
    "score": "2",
    "annotator": 1,
    "annotation_id": 99,
    "created_at": "2025-10-29T14:47:16.056696Z",
    "updated_at": "2025-10-29T14:47:16.056714Z",
    "lead_time": 10.903,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/promotional_offers/tests/test_models.py:PromotionalOfferModelTestCase.test_update_station_renderer",
    "text": "@override_settings(RENDERER_ENABLED=True)\ndef test_update_station_renderer(self) -> None:\n    \"\"\"\n    Given a promotional offer for a station,\n    When the title is updated,\n    Then the rendered station is updated\n    \"\"\"\n    offer = self.offer\n    offer.title = \"Test Promotional Offer\"\n    offer.save()\n\n    with mock.patch(\"kleen.renderers.renderers.Renderer._on_post_commit_update\") as m:  # noqa: RMS102\n        offer.update_stations()\n\n    m.assert_called_once()",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 50,
    "score": "2",
    "annotator": 1,
    "annotation_id": 100,
    "created_at": "2025-10-29T14:47:24.533024Z",
    "updated_at": "2025-10-29T14:47:24.533044Z",
    "lead_time": 8.31,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:PanelStatusConditionFormTestCase.test_create_form_off_valid",
    "text": "def test_create_form_off_valid(self) -> None:\n    data = {\n        \"status\": \"off\",\n    }\n\n    form = CreatePanelStatusConditionForm(data=data)\n    is_valid = form.is_valid()\n\n    self.assertTrue(is_valid)\n    self.assertEqual(form.to_grammar(), \"a1.mode==0\")  # 'off'",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 1,
    "score": "2",
    "annotator": 1,
    "annotation_id": 101,
    "created_at": "2025-10-29T14:48:11.906640Z",
    "updated_at": "2025-10-29T14:48:11.906660Z",
    "lead_time": 11.463,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_iwp_445.py:RequesterFormTests.test_phone_number_is_optional",
    "text": "def test_phone_number_is_optional(self) -> None:\n    \"\"\"\n    Given request requester form data with no requester phone number\n    When I validate\n    Then request_requester is valid\n    \"\"\"\n    request = self.any_request(state=\"draft\")\n    request.requester_phone_number = \"\"\n    request.save()\n    request_requester_data = self.any_request_requester_form_data(request=request)\n    request_requester_form = make_requester_form(\n        instance=request, user=request.creator, read_only=False, action=form_actions.submit\n    )(instance=request, data=request_requester_data)\n    request_requester_form.is_valid()\n    assert_that(request_requester_form.is_valid(), is_(True))\n    assert_that(request_requester_form[\"requester_phone_number\"].data, is_(\"\"))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 2,
    "score": "3",
    "annotator": 1,
    "annotation_id": 102,
    "created_at": "2025-10-29T14:48:53.359617Z",
    "updated_at": "2025-10-29T14:48:53.359628Z",
    "lead_time": 41.297,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_coders_climax.py:DriverClimaxScenarioCodecTestCase.test_serialize_cond_not_implemented_condition",
    "text": "@vcr.use_cassette()\ndef test_serialize_cond_not_implemented_condition(self) -> None:\n    \"\"\"\n    Given a driver climax scenario codec\n    When i serialize condition witho bad condtion\n    Then i have a not implemented error\n    \"\"\"\n    contract = ContractMixin().any_climax_contract()\n    hss = HssMixin().any_hss(user=contract.user, contract=contract, remote_proxy=remote_proxies.climax_kiz)\n    driver_decoder = self.any_driver_codec(hss.driver)\n    assert_that(calling(driver_decoder._serialize_cond).with_args(1), raises(NotImplementedError))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 3,
    "score": "4",
    "annotator": 1,
    "annotation_id": 103,
    "created_at": "2025-10-29T14:49:20.658516Z",
    "updated_at": "2025-10-29T14:49:20.658535Z",
    "lead_time": 7.679,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_codes.py:AddTests.test_add__code_conflict_error",
    "text": "@vcr.use_cassette()\ndef test_add__code_conflict_error(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with an Essentielle panel\n        - a HssDriver\n        - an existing code\n        - data to add a new code with the same code value\n    When:\n        - I add a new code\n    Then:\n        - a CodeConflict exception is raised\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_hm)\n    driver = driver_factory.get_driver(hss)\n    code = get_random_string(length=4, allowed_chars=(\"1234567890\"))\n    data = {\n        \"master_code\": \"1234\",\n        \"code\": code,\n        \"name\": get_random_string(length=7),\n    }\n    driver.codes.add(data=data)\n    assert_that(calling(driver.codes.add).with_args(data=data), raises(CodeConflict))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 10.0
    },
    "id": 4,
    "score": "4",
    "annotator": 1,
    "annotation_id": 104,
    "created_at": "2025-10-29T14:49:25.840191Z",
    "updated_at": "2025-10-29T14:49:25.840207Z",
    "lead_time": 5.017,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/amqp/tests/test_serializers.py:AMQPSerializersTests.test_delete_code_serializer",
    "text": "def test_delete_code_serializer(self) -> None:\n    \"\"\"\n    Given a hss with a code\n    Given delete code data\n    Given a hss delete code pending transaction\n    When I serialize data\n    Then no error\n    Then a code is delete\n    Then transaction is succeed\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.honeywell)\n    code = self.any_honeywell_code(hss=hss)\n\n    transaction = self.any_transaction(\n        hss=hss, type=transaction_types.delete_code, state=transaction_states.pending\n    )\n    data = {\"prom\": hss.prom_code, \"index\": code.index, \"label\": \"Tata\"}\n    serializer = EquipmentDeleteCodeEventSerializer(data=data)\n    serializer.is_valid(raise_exception=True)\n    serializer.process_event()\n    transaction.refresh_from_db()\n    assert_that(HoneywellCode.objects.filter(id=code.id).exists(), is_(False))\n    assert_that(transaction.state, is_(transaction_states.success))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 8.0
    },
    "id": 5,
    "score": "4",
    "annotator": 1,
    "annotation_id": 105,
    "created_at": "2025-10-29T14:49:35.554322Z",
    "updated_at": "2025-10-29T14:49:35.554338Z",
    "lead_time": 9.567,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/vendor/tests/test_backends.py:FRMobileAuthBackendTestCase.test_authenticated",
    "text": "@vcr.use_cassette()\ndef test_authenticated(self) -> None:\n    data: Dict[str, Any] = {\"email\": \"test.ripplemotion@gmail.com\", \"password\": \"Pa$$w0rd\", \"device_id\": \"123\"}\n    backend = PadMobileFRAuthBackend()\n    user = backend.authenticate(**data)\n    assert_that(user, not_none())\n    assert_that(user, is_(backend.get_user(user.id)))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 38,
      "docstring_strength": 0.0
    },
    "id": 6,
    "score": "2",
    "annotator": 1,
    "annotation_id": 106,
    "created_at": "2025-10-29T14:49:46.468392Z",
    "updated_at": "2025-10-29T14:49:46.468405Z",
    "lead_time": 10.763,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_panel_status_driver.py:UpdateTests.test_update__raises_bad_response_error_from_error_code",
    "text": "@vcr.use_cassette()\ndef test_update__raises_bad_response_error_from_error_code(self) -> None:\n    \"\"\"\n    Given:\n        - an Hss with Honeywell panel\n        - a HssDriver\n        - a status set to on\n    When:\n        - I update status\n        - I mock the serializer that generates a read_error_code != 0\n    Then:\n        - I get an BadResponse exception\n    \"\"\"\n    hss = self.any_configured_hss(account=default_honeywell_account)\n    driver = driver_factory.get_driver(hss=hss)\n\n    def read_error_code() -> int:\n        return 1\n\n    with mock.patch.object(  # noqa: RMS102\n        UpdateResponseSerializer, \"read_error_code\", side_effect=read_error_code\n    ):\n        with self.assertRaises(BadResponse):\n            driver.status.update(new_status=HssStatus.OFF, code=\"1001\")",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 85,
      "docstring_strength": 10.0
    },
    "id": 7,
    "score": "1",
    "annotator": 1,
    "annotation_id": 107,
    "created_at": "2025-10-29T14:50:01.401239Z",
    "updated_at": "2025-10-29T14:50:01.401258Z",
    "lead_time": 14.772,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_client.py:ClientTestCase.test_client_raises_message_lost_on_climax_message_lost_payload",
    "text": "def test_client_raises_message_lost_on_climax_message_lost_payload(self) -> None:\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    client = Client(hss)\n    with requests_mock.Mocker() as m:\n        m.get(\n            self._mock_endpoint,\n            status_code=200,\n            json={\"message\": \"Message non transmis a la centrale, veuillez réessayer plus tard.\"},\n        )\n        assert_that(calling(client.request).with_args(self._mock_endpoint), raises(MessageLost))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 8,
    "score": "2",
    "annotator": 1,
    "annotation_id": 108,
    "created_at": "2025-10-29T14:50:10.942008Z",
    "updated_at": "2025-10-29T14:50:10.942032Z",
    "lead_time": 9.346,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/templatetags/tests/test_templatetags.py:TemplateTagTests.test_alert_comment_refused",
    "text": "def test_alert_comment_refused(self) -> None:\n    \"\"\"\n    Given any framed request in cancelled state with an abort comment\n    When I call alert_comment passing the request comment\n    Then it return a dict containing :\n        alert_type = \"alert-danger\"\n        icon = \"ti ti-square-x\"\n    \"\"\"\n    abort_comment = \"Commentaire d'annulation\"\n    request = self.any_request(type=request_types.framed, state=request_states.cancelled)\n    request.abort_comment = abort_comment\n    request.save()\n\n    comment = request.comment\n\n    result = alert_comment(comment=comment)\n\n    assert_that(\n        result,\n        has_entries(\n            {\n                \"comment\": comment,\n                \"alert_type\": \"alert-danger\",\n                \"icon\": \"ti ti-square-x\",\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 85,
      "docstring_strength": 6.0
    },
    "id": 9,
    "score": "5",
    "annotator": 1,
    "annotation_id": 109,
    "created_at": "2025-10-29T14:50:24.284174Z",
    "updated_at": "2025-10-29T14:50:24.284186Z",
    "lead_time": 13.177,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/forms/test_create_cart_item_form.py:CartItemCreateFormTests.test_with_booking__good",
    "text": "def test_with_booking__good(self) -> None:\n    booking = self.any_booking()\n    data = {\"reference\": booking.pk, \"quantity\": 1, \"item_type\": create_cart_item_types.booking}\n    form = CartItemCreateForm(data=data, cart=self.cart)\n    assert_that(form.is_valid(), is_(True))\n    form.add(user=self.any_user(secure_mode_version=secure_mode_versions.secure_mode_3ds2))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 10,
    "score": "2",
    "annotator": 1,
    "annotation_id": 110,
    "created_at": "2025-10-29T14:50:52.570690Z",
    "updated_at": "2025-10-29T14:50:52.570708Z",
    "lead_time": 28.112,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_create_scenario_climax.py:CreateScenarioApiTestCase.test_create_scenario_on_and_partial",
    "text": "@vcr.use_cassette()\ndef test_create_scenario_on_and_partial(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario with on_and_partial condition\n    When : I post this dict\n    Then : I get a 201 HTTP response, a dict with one scenario\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss, save=False)\n    data = self.any_scenario_data(scenario)\n    data[\"scenario_type\"] = 79\n    data[\"condition\"][\"fields\"][\"status\"] = \"on_and_partial\"  # import constante\n    last_response = self.when_i_post_scenario(data)\n    assert_that(last_response.status_code, is_(201), last_response.content)\n    assert_that(last_response.json(), is_(not_none()))\n    assert_that(Scenario.objects.all(), has_length(1))\n    assert_that(MasterScenario.objects.count(), is_(1))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 11,
    "score": "3",
    "annotator": 1,
    "annotation_id": 111,
    "created_at": "2025-10-29T14:51:36.403215Z",
    "updated_at": "2025-10-29T14:51:36.403227Z",
    "lead_time": 43.676,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/amqp/tests/test_amqp.py:ConsumerTests.test_consumer__cancellation__contract_number",
    "text": "def test_consumer__cancellation__contract_number(self) -> None:\n    broker_url = settings.IMA_BROKER_URL_CRM\n    cancellation_queue = queues.cancellation\n\n    self.generate_change(broker_url=broker_url, queue=cancellation_queue, body={\"contract_numbers\": \"20160431006\"})\n\n    event = self.consume_event(broker_url=broker_url, event=events.cancellation, queue=cancellation_queue)\n\n    assert_that(event, has_property(\"state\", event_states.pending))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 12,
    "score": "4",
    "annotator": 1,
    "annotation_id": 112,
    "created_at": "2025-10-29T14:51:47.404592Z",
    "updated_at": "2025-10-29T14:51:47.404612Z",
    "lead_time": 10.835,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_list_scenario.py:LisTScenarioAPITests.test_list_scenarios_maia_error",
    "text": "def test_list_scenarios_maia_error(self) -> None:\n    \"\"\"\n    When I list scenario with maia error\n    Then 502\n    \"\"\"\n    with requests_mock.Mocker() as m:\n        m.get(requests_mock.ANY, status_code=500)\n        last_response = self.when_i_list_scenarios()\n    assert_that(last_response.status_code, is_(502))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 3.0
    },
    "id": 13,
    "score": "2",
    "annotator": 1,
    "annotation_id": 113,
    "created_at": "2025-10-29T14:51:55.576218Z",
    "updated_at": "2025-10-29T14:51:55.576237Z",
    "lead_time": 7.997,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v80/tests/forms/test_check_mobile_phone.py:CheckMobilePhoneFormTestCase.test_form__wrong_code__last_try",
    "text": "def test_form__wrong_code__last_try(self) -> None:\n    \"\"\"\n    Given\n        - a user without validate mobile phone with check retry equal to 5 (last try)\n        - an invalid code\n    When i valid\n    Then form is invalid and user is a frauder with phone_validation_fail\n    \"\"\"\n    user = self.any_user(with_mobile_phone_verified=False)\n    user.mobile_phone_to_verify_verification_retries = 5\n    user.save()\n    form = CheckMobilePhoneForm(data={\"code\": \"wron\"}, context={\"user\": user})\n    assert_that(form.is_valid(), is_(False))\n    assert_that(user.is_frauder, is_(True))\n    assert_that(user.mobile_phone_to_verify_verification_retries, equal_to(0))\n    assert_that(user.frauder_reason, is_(frauder_reasons.phone_validation_fail))\n    assert_that(user.last_frauder_update, is_(not_none()))\n    assert_that(user.last_frauder_update - timezone.now(), less_than(timedelta(minutes=1)))\n    assert_that(\n        form.errors,\n        is_(\n            {\n                \"code\": [\n                    \"\"\"Par mesure de sécurité, votre compte a été suspendu pendant 24H.\\nSi vous souhaitez le réactiver, vous pouvez nous contacter via la rubrique \"A propos\" > \"Aide et suggestions\" de l'application.\"\"\"  # noqa\n                ]\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 11,
      "assertion_count": 7,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 6.0
    },
    "id": 14,
    "score": "3",
    "annotator": 1,
    "annotation_id": 114,
    "created_at": "2025-10-29T14:52:14.605486Z",
    "updated_at": "2025-10-29T14:52:14.605498Z",
    "lead_time": 13.146,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/serializers/tests/test_scenarios.py:ListResponseSerializerTests.test_serializer__null_values",
    "text": "def test_serializer__null_values(self) -> None:\n    climax_json = load(\"climax_kiz_scenario_list.json\")\n    climax_json[\"has\"][\"ha\"][0][\"rule\"] = None\n    serializer = ListResponseSerializer(data=climax_json)\n    with self.assertRaises(ValidationError):\n        serializer.is_valid(raise_exception=True)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 15,
    "score": "4",
    "annotator": 1,
    "annotation_id": 115,
    "created_at": "2025-10-29T14:52:19.544917Z",
    "updated_at": "2025-10-29T14:52:19.544941Z",
    "lead_time": 4.784,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/rms_mangopay/tests/test_document.py:DocumentTestCase.test_add_file",
    "text": "def test_add_file(self, *mocks) -> None:\n    # given :\n    # - A user natural\n    # - A document with status CREATED of type IDENTITY_PROOF\n    # When :\n    # - I add file\n    # - I update document\n    # Then\n    # - Document is status validation_asked\n    mangopay_user = self.any_user_with_mangopay_account()\n    document = self.any_mangopay_document(\n        account=mangopay.get_account(mangopay_user),\n        type=DOCUMENTS_TYPE_CHOICES.identity_proof,\n        status=DOCUMENTS_STATUS_CHOICES.validation_asked,\n    )\n    self.assertEqual(document.status, DOCUMENTS_STATUS_CHOICES.validation_asked)",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 8,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 16,
    "score": "1",
    "annotator": 1,
    "annotation_id": 116,
    "created_at": "2025-10-29T14:52:24.854751Z",
    "updated_at": "2025-10-29T14:52:24.854769Z",
    "lead_time": 5.152,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/transaction/api/tests/test_serializer.py:TransactionSerializerTestCase.test_serialize_transaction",
    "text": "def test_serialize_transaction(self) -> None:\n    \"\"\"\n    Given : A transaction\n    When : I serialize this transaction\n    Then : I get a dict corresponding to the transaction i serialized\n    \"\"\"\n    hss = self.any_hss()\n    transaction = self.any_transaction(hss=hss)\n\n    serializer = TransactionSerializer(instance=transaction)\n    data = serializer.data\n    assert_that(data, has_entries({\"pk\": is_(transaction.pk), \"model\": \"hss.transaction\", \"fields\": not_none()}))\n    transaction_data = data[\"fields\"]\n    assert_that(\n        transaction_data,\n        has_entries(\n            {\n                \"state\": is_(transaction.state),\n                \"error_description\": is_(\"\"),\n                \"type\": is_(transaction.type),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 17,
    "score": "5",
    "annotator": 1,
    "annotation_id": 117,
    "created_at": "2025-10-29T14:52:42.678331Z",
    "updated_at": "2025-10-29T14:52:42.678344Z",
    "lead_time": 17.664,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/maxxing/tests/test_maxxing_client.py:SendWebTransactionAPITests.test_get_customer_informations",
    "text": "def test_get_customer_informations(self) -> None:\n    response = self.maxxing_client.send_transaction(\n        club_card=self.club_card,\n        price=\"25.00\",\n        ean=\"3425909001014\",\n        family_code=\"5021\",\n        payment_method=\"15\",\n        payment_method_detail=\"CB\",\n    )\n    assert_that(response.status_code, is_(200))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 18,
    "score": "4",
    "annotator": 1,
    "annotation_id": 118,
    "created_at": "2025-10-29T14:53:07.141791Z",
    "updated_at": "2025-10-29T14:53:07.141804Z",
    "lead_time": 24.306,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/shipping_records/authentications/tests/test_attachment.py:ThirdPartyOperatorAttachmentAuthenticationTests.test_has_perm",
    "text": "def test_has_perm(self) -> None:\n    \"\"\"\n    Given\n        s1 site\n        c1 a shipping charter\n        u1 a user 3rd party operator in s1 and c1\n        r1 a request in s1\n        a1 an attachment which is not linked to an additional quote\n    When i call has perm\n    Then\n        u1 has perm can_view a1\n        u1 has not perm can_update a1\n        u1 has not perm can_delete a1\n    \"\"\"\n\n    site = self.any_site()\n    u1 = self.any_user(roles=[permission_roles.third_party_operator], sites=[site.pk])\n    c1 = self.any_charter(with_users=[u1])\n    request = self.any_quoted_request(site=site, by_partner=c1, state=request_states._3rd_party_transmission)\n    attachment = self.any_attachment(user=u1, site=site, request=request)\n    assert_that(u1.has_perm(attachment_permissions.can_view, obj=attachment), is_(True))\n    assert_that(u1.has_perm(attachment_permissions.can_update, obj=attachment), is_(True))\n    assert_that(u1.has_perm(attachment_permissions.can_delete, obj=attachment), is_(False))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 84,
      "docstring_strength": 12.0
    },
    "id": 19,
    "score": "5",
    "annotator": 1,
    "annotation_id": 119,
    "created_at": "2025-10-29T14:53:15.306615Z",
    "updated_at": "2025-10-29T14:53:15.306630Z",
    "lead_time": 8.012,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_parsers.py:ParserKiz3PadMobileConditionTestCase.test_parse_condition_alarm_status__invalid",
    "text": "def test_parse_condition_alarm_status__invalid(self) -> None:\n    parsed_condition = Kiz3PadMobileParser().parse_condition(1, \"a1.alarm\")\n    assert_that(parsed_condition, is_(None))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 60,
      "docstring_strength": 0.0
    },
    "id": 20,
    "score": "2",
    "annotator": 1,
    "annotation_id": 120,
    "created_at": "2025-10-29T14:53:28.201972Z",
    "updated_at": "2025-10-29T14:53:28.201992Z",
    "lead_time": 12.736,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_climax_kiz.py:DeleteScenarioApiTestCase.test_delete_unexisting_maia_scenario",
    "text": "@vcr.use_cassette()\ndef test_delete_unexisting_maia_scenario(self) -> None:\n    \"\"\"\n    Given an unexisting maia scenario\n    When I delete this scenario\n    Then HTTP 404\n    \"\"\"\n    last_response = self.when_i_delete_scenario(scenario_pk=123456)\n    assert_that(last_response.status_code, is_(404))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 21,
    "score": "4",
    "annotator": 1,
    "annotation_id": 121,
    "created_at": "2025-10-29T14:53:38.894814Z",
    "updated_at": "2025-10-29T14:53:38.894828Z",
    "lead_time": 10.534,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestModelTests.test_requester_job_position_is_optional",
    "text": "def test_requester_job_position_is_optional(self) -> None:\n    \"\"\"\n    Given a tms_transmission request without requester job position\n    When I save\n    Then it doesn't crash\n    \"\"\"\n    request = self.any_framed_request(\n        state=request_states.tms_transmission, with_packaging_units=False, with_carriages=True\n    )\n    request.requester_job_position = \"\"\n    request.save()\n    assert_that(request.requester_job_position, is_(\"\"))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 22,
    "score": "5",
    "annotator": 1,
    "annotation_id": 122,
    "created_at": "2025-10-29T15:08:14.018726Z",
    "updated_at": "2025-10-29T15:08:14.018746Z",
    "lead_time": 874.87,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_notifications_page.py:RequestNotificationsPageTests.test_load__unauthenticated",
    "text": "def test_load__unauthenticated(self) -> None:\n    self.client = Client()\n    request = self.any_request()\n    with self.assertRaises(RedirectException):\n        RequestNotificationsPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 23,
    "score": "4",
    "annotator": 1,
    "annotation_id": 123,
    "created_at": "2025-10-29T15:08:24.641999Z",
    "updated_at": "2025-10-29T15:08:24.642014Z",
    "lead_time": 10.382,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/histories/tests/test_historical_records.py:RequestChangedSnapshotTest.test_snapshot_with_changes",
    "text": "def test_snapshot_with_changes(self) -> None:\n    \"\"\"\n    Given a request with previous snapshot\n    When I save with change\n    Then\n        - a RequestChangedSnapshot is created\n        - a HistoricalRecord is created\n    \"\"\"\n    request = self.any_request(state=request_states.tms_transmission)\n    n_snapshot_before = RequestChangedSnapshot.objects.filter(request=request).count()\n    n_record_before = HistoricalRecord.objects.filter(request=request).count()\n\n    request.client_id = uuid4().hex\n    request.save()\n    n_snapshot_after = RequestChangedSnapshot.objects.filter(request=request).count()\n    n_record_after = HistoricalRecord.objects.filter(request=request).count()\n    assert_that(n_snapshot_after, is_(n_snapshot_before + 1))\n    assert_that(n_record_after, is_(n_record_before + 1))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 6.0
    },
    "id": 24,
    "score": "4",
    "annotator": 1,
    "annotation_id": 124,
    "created_at": "2025-10-29T15:10:08.439076Z",
    "updated_at": "2025-10-29T15:10:08.439093Z",
    "lead_time": 103.628,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/bus/tests/test_loaders.py:AutowashLoaderTest.test_loader_station__delete",
    "text": "def test_loader_station__delete(self) -> None:\n    \"\"\"\n    Given a station loader and an autowash json from autowash-reference\n    When I load an autowash message without any value\n    Then station.enabled = False\n    \"\"\"\n    loader = AutowashLoader()\n    message = load(\"autowash.json\")\n    key = message[\"uri\"].split(\"/\")[-1]\n\n    loader.on_message(\"resource.tw.autowash\", message, key)\n\n    assert_that(\n        Station.objects.filter(source_id=message[\"uri\"]).get(),\n        has_property(\"enabled\", is_(True)),\n    )\n\n    loader.on_message(\"resource.tw.autowash\", None, key)\n\n    assert_that(\n        Station.objects.filter(source_id=message[\"uri\"]).get(),\n        has_property(\"enabled\", is_(False)),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 25,
    "score": "4",
    "annotator": 1,
    "annotation_id": 125,
    "created_at": "2025-10-29T15:10:36.123556Z",
    "updated_at": "2025-10-29T15:10:36.123569Z",
    "lead_time": 27.521,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/shipping_records/loaders/tests/test_loaders.py:ShippingRecordACSTransCalledEventLoaderTests.test_loader__error",
    "text": "def test_loader__error(self) -> None:\n    loader = ShippingRecordACSTransCalledEventLoader()\n    sr = self.any_shipping_record()\n    data = self.any_shipping_record_acs_trans_called_data(shipping_record=sr, error=\"API Error\")\n    event = loader.on_message(\"\", data)\n    assert event\n    assert_that(event.shipping_record.uri.value, starts_with(\"myroad://shipping_record/\"))\n    assert_that(event.timestamp, is_(instance_of(datetime.datetime)))\n    assert_that(event.data, instance_of(str))\n    assert_that(event.error, is_(\"API Error\"))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 4,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 26,
    "score": "4",
    "annotator": 1,
    "annotation_id": 126,
    "created_at": "2025-10-29T15:10:47.029035Z",
    "updated_at": "2025-10-29T15:10:47.029054Z",
    "lead_time": 10.736,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v60/tests/test_serializers.py:PowerSwitchSerializerTests.test_serializer__status_off",
    "text": "def test_serializer__status_off(self) -> None:\n    \"\"\"\n    Given\n        - a powerswitch with status set to off\n    When\n        - I serialize it\n    then\n        - I get a valid json with energy set to None\n    \"\"\"\n    powerswitch = self.any_powerswitch(status=powerswitch_status.off)\n    serializer = PowerSwitchSerializer(powerswitch)\n    data = serializer.data\n    assert_that(\n        data, has_entries({\"pk\": powerswitch.device_id, \"model\": \"hss.power_switch\", \"fields\": anything()})\n    )\n    assert_that(\n        data[\"fields\"],\n        has_entries(\n            {\n                \"area\": 1,\n                \"energy\": none(),\n                \"id2\": powerswitch.device_id,\n                \"name\": powerswitch.name,\n                \"status\": powerswitch.status,\n                \"type\": \"power_switch\",\n                \"icon\": powerswitch.icon,\n                \"faulty_states\": not_none(),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 7.0
    },
    "id": 27,
    "score": "5",
    "annotator": 1,
    "annotation_id": 127,
    "created_at": "2025-10-29T15:10:55.172832Z",
    "updated_at": "2025-10-29T15:10:55.172843Z",
    "lead_time": 7.975,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/corporation_invoice/tests/test_corporation_transaction.py:CorporationTransactionTestCase.test_transaction_creation__order",
    "text": "def test_transaction_creation__order(self) -> None:\n\n    transaction = self.any_transaction(order_profile=order_profiles.marketplace_tmf)\n    assert transaction\n\n    order = Order.objects.first()\n    oi = order.orderitem_first\n    assert_that(transaction.related_deal, is_(oi.washingprogram_name))\n    assert_that(transaction.related_tax, is_(order.sold_price_tax))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 28,
    "score": "3",
    "annotator": 1,
    "annotation_id": 128,
    "created_at": "2025-10-29T15:11:36.102091Z",
    "updated_at": "2025-10-29T15:11:36.102103Z",
    "lead_time": 40.778,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/news/tests/test_message_push.py:MessageTestCase.test_send_push_deeplink__unknown",
    "text": "@with_mango_mocks()\ndef test_send_push_deeplink__unknown(self) -> None:\n    # Given :\n    #  - a user\n    #  - a message with unknown deeplinks\n    # When i send push from message\n    # Then a NotImplementedError is raised\n\n    user = self.given_user_registered_with_card(\n        card_number=MangoPayFixture.TEST_car_number_without_3DS,\n        disable_secure_mode=True,\n        consumer=self.any_consumer(source=oauth_consumer_sources.kleen),\n        with_push_token=True,\n    )\n    template = Template.objects.create(event=\"unknown\")\n    message = self.any_message(\n        user=self.client.user,\n        template=template,\n        data={},\n        with_push_deep_link=True,\n        push_deep_link=message_deep_links.my_orders,\n    )\n    with self.assertRaises(NotImplementedError):\n        message.send_push(user=user)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 5,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 29,
    "score": "2",
    "annotator": 1,
    "annotation_id": 129,
    "created_at": "2025-10-29T15:11:44.684668Z",
    "updated_at": "2025-10-29T15:11:44.684689Z",
    "lead_time": 8.432,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_delete_scenario.py:DeleteScenarioApiTestCase.test_delete_scenario",
    "text": "@vcr.use_cassette()\ndef test_delete_scenario(self) -> None:\n    \"\"\"\n    Given : A scenario\n    When : I delete this scenario\n    Then : I get a 200 HTTP response, the scenario is deleted\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_master_scenario(hss=hss)\n    last_response = self.when_i_delete_scenario(scenario_pk=scenario.pk)\n    assert_that(last_response.status_code, is_(204), last_response.content)\n    assert_that(calling(scenario.panel_scenario.refresh_from_db), raises(Scenario.DoesNotExist))\n    assert_that(calling(scenario.maia_scenario.refresh_from_db), raises(MaiaScenario.DoesNotExist))\n    assert_that(calling(scenario.refresh_from_db), raises(MasterScenario.DoesNotExist))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 30,
    "score": "4",
    "annotator": 1,
    "annotation_id": 130,
    "created_at": "2025-10-29T15:11:51.669280Z",
    "updated_at": "2025-10-29T15:11:51.669291Z",
    "lead_time": 6.84,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__additional_quote_label_1",
    "text": "def test_request_formatter__additional_quote_label_1(self) -> None:\n    \"\"\"\n    Given a request\n    When I use RequestFormatter with 'additional_quote_label_1' field to export\n    Then it return a dict that contain request additional_quote_label_1\n    \"\"\"\n    request = self.any_request()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"additional_quote_label_1\"])\n    assert_that(request_csv[0], is_(\"Emballé\"))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 4.0
    },
    "id": 31,
    "score": "5",
    "annotator": 1,
    "annotation_id": 131,
    "created_at": "2025-10-29T15:11:56.401716Z",
    "updated_at": "2025-10-29T15:11:56.401729Z",
    "lead_time": 4.588,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/bus/tests/test_loaders.py:NoWashStationLoaderTests.test_loader",
    "text": "def test_loader(self) -> None:\n    json = load(\"no_wash_station.json\")\n    key = json[\"uri\"].split(\"/\")[-1]\n    no_wash_station = NoWashLoader().on_message(\"resource.tw.autowash\", json, key)\n    assert_that(\n        no_wash_station,\n        has_properties(\n            {\n                \"source_id\": \"autowash-ref://autowash/91d67138-8e18-11eb-8e4a-549f35079518\",\n                \"enabled\": True,\n                \"total_code\": \"NF081810\",\n            }\n        ),\n    )\n    self.any_no_wash_station()\n\n    assert_that(NoWashStation.objects.all().count(), equal_to(2))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 32,
    "score": "4",
    "annotator": 1,
    "annotation_id": 132,
    "created_at": "2025-10-29T15:12:10.492426Z",
    "updated_at": "2025-10-29T15:12:10.492440Z",
    "lead_time": 13.934,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/transitions/request/framed/test_cancel.py:FramedStateMachineTests.test_cancel__to_cancelled",
    "text": "def test_cancel__to_cancelled(self) -> None:\n    \"\"\"\n    Given a request without shipping record\n    When i cancel\n    Then request is in cancelled state\n    \"\"\"\n    for state in {request_states.refused, request_states.tms_transmission}:\n        with self.subTest(state=state):\n            request = self.any_framed_request(state=state)\n            request.state_machine(user=request.creator).cancel(comment=\"toto\")\n            assert_that(request.state, is_(request_states.cancelled))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 33,
    "score": "5",
    "annotator": 1,
    "annotation_id": 133,
    "created_at": "2025-10-29T15:12:17.914161Z",
    "updated_at": "2025-10-29T15:12:17.914176Z",
    "lead_time": 7.251,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_captures.py:DeleteCapture.test_delete_unknown_capture",
    "text": "@vcr.use_cassette()\ndef test_delete_unknown_capture(self) -> None:\n    hss = HssMixin().any_configured_hss(account=digital_alchon_account)\n    honeywell_capture = self.any_local_honeywell_capture(hss=hss)\n    capture = honeywell_capture.to_generic()\n    with self.assertRaises(ServerError):\n        hss.driver.captures.delete(capture_pk=capture.id)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 34,
    "score": "4",
    "annotator": 1,
    "annotation_id": 134,
    "created_at": "2025-10-29T15:12:27.745767Z",
    "updated_at": "2025-10-29T15:12:27.745786Z",
    "lead_time": 9.65,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/sites/authentications/tests/test_can_create_quoted_request.py:CanCreateQuotedRequestPermTests.test_perm",
    "text": "def test_perm(self) -> None:\n    site = self.any_site()\n    for role in permission_roles.all:\n        user = self.any_user(roles=[role], sites=[site.uuid])\n        with self.subTest(role=role):\n            expected_result = role in {\n                permission_roles.user,\n                permission_roles.tms_operator,\n                permission_roles.idea_supervisor,\n                permission_roles.supervisor,\n                permission_roles.manager,\n            }\n            has_perm = user.has_perm(site_permissions.can_create_quoted_request, obj=site)\n            assert_that(has_perm, is_(expected_result))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 35,
    "score": "4",
    "annotator": 1,
    "annotation_id": 135,
    "created_at": "2025-10-29T15:15:00.082388Z",
    "updated_at": "2025-10-29T15:15:00.082399Z",
    "lead_time": 152.178,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_myr_235.py:MYR235Tests.test_issue",
    "text": "def test_issue(self) -> None:\n    s1 = self.any_site()\n    s2 = self.any_site()\n    self.client = AuthenticatedClient(sites=[s1, s2])\n    data = self.any_json_filter()\n    RequestListPage.get(client=self.client, site_slug=s1.slug, data=data)\n    RequestListPage.get(client=self.client, site_slug=s2.slug)\n    s1_filter_model_pk = self.client.session[f\"{str(s1.pk)}_request_filters_pk\"]\n    s2_filter_model_pk = self.client.session[f\"{str(s2.pk)}_request_filters_pk\"]\n    assert_that(s1_filter_model_pk, not_(empty()))\n    assert_that(s2_filter_model_pk, not_(empty()))\n    assert_that(s1_filter_model_pk, not_(s2_filter_model_pk))\n    s1_filter_model = RequestFilterModel.objects.filter(pk=s1_filter_model_pk).first()\n    s2_filter_model = RequestFilterModel.objects.filter(pk=s2_filter_model_pk).first()\n    assert_that(s1_filter_model, not_none())\n    assert_that(s1_filter_model.state, contains_inanyorder(*data[\"state\"]))\n    assert_that(s1_filter_model, not_none())\n    assert_that(s2_filter_model.state, empty())",
    "metrics": {
      "line_count": 17,
      "assertion_count": 7,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 5,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 36,
    "score": "2",
    "annotator": 1,
    "annotation_id": 136,
    "created_at": "2025-10-29T15:15:07.837701Z",
    "updated_at": "2025-10-29T15:15:07.837719Z",
    "lead_time": 7.589,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_framed.py:FramedRequestActionTests.test_load__not_found",
    "text": "def test_load__not_found(self) -> None:\n    site = self.any_site()\n    with self.assertRaises(NotFoundException):\n        RequestActionPage.get(client=self.client, site_slug=site.slug, pk=uuid.uuid4())",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 49,
      "docstring_strength": 0.0
    },
    "id": 37,
    "score": "4",
    "annotator": 1,
    "annotation_id": 137,
    "created_at": "2025-10-29T15:15:17.191583Z",
    "updated_at": "2025-10-29T15:15:17.191604Z",
    "lead_time": 9.183,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/sites/authentications/tests/test_can_show_dashboard.py:CanShowDashboardPermTests.test_perm__dashboard__disabled",
    "text": "def test_perm__dashboard__disabled(self) -> None:\n    site = self.any_site()\n    site.dashboard_is_enable = False\n    site.save()\n    for role in permission_roles.all:\n        user = self.any_user(roles=[role], sites=[site.uuid])\n        with self.subTest(role=role):\n            has_perm = user.has_perm(site_permissions.can_view_dashboard, obj=site)\n            assert_that(has_perm, is_(False))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 38,
    "score": "4",
    "annotator": 1,
    "annotation_id": 138,
    "created_at": "2025-10-29T15:15:24.485624Z",
    "updated_at": "2025-10-29T15:15:24.485637Z",
    "lead_time": 7.139,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__merchandises",
    "text": "def test_request_formatter__merchandises(self) -> None:\n    \"\"\"\n    Given any request packaging units mode\n    When I use RequestFormatter with 'merchandises' field to export\n    Then it return a dict that contain request merchandises\n    \"\"\"\n    request = self.any_request(transport_service=transport_services.packaging_units)\n    packaging_unit = request.packaging_units.first()\n    assert isinstance(packaging_unit, PackagingUnit)\n    packaging_unit.full_clean()\n    packaging_unit.save()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"merchandises\"])\n    assert_that(request_csv[0], is_(packaging_unit.description))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 39,
    "score": "5",
    "annotator": 1,
    "annotation_id": 139,
    "created_at": "2025-10-29T15:15:27.872033Z",
    "updated_at": "2025-10-29T15:15:27.872049Z",
    "lead_time": 3.245,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/tests/test_models.py:CreditsPackValidationTests.test_unique_name__creation_visible_in_app",
    "text": "def test_unique_name__creation_visible_in_app(self) -> None:\n    \"\"\"\n    Given\n        - a credit pack visible in app\n    When I create credit pack with same name and visible in app\n    Then I get a Validation Error\n    \"\"\"\n    c1 = self.any_credits_pack(visible_in_app=True)\n\n    with self.assertRaises(ValidationError):\n        self.any_credits_pack(visible_in_app=True, name=c1.name)",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 5.0
    },
    "id": 40,
    "score": "5",
    "annotator": 1,
    "annotation_id": 140,
    "created_at": "2025-10-29T15:15:37.115822Z",
    "updated_at": "2025-10-29T15:15:37.115850Z",
    "lead_time": 9.08,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/serializers/tests/test_blinds.py:UpdateResponseSerializerTests.test_serializer__invalid",
    "text": "def test_serializer__invalid(self) -> None:\n    climax_panel_cond_post_json = load(\"climax_panel_device_post_invalid.json\")\n    serializer = UpdateResponseSerializer(data=climax_panel_cond_post_json)\n    assert_that(calling(serializer.is_valid).with_args(raise_exception=True), raises(ValidationError))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 41,
    "score": "4",
    "annotator": 1,
    "annotation_id": 141,
    "created_at": "2025-10-29T15:15:41.102731Z",
    "updated_at": "2025-10-29T15:15:41.102749Z",
    "lead_time": 3.817,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/featured_promotions/test_admin.py:FeaturedPromotionAdminTests.test_form",
    "text": "def test_form(self) -> None:\n    promocode = self.any_promocode()\n\n    data = {\n        \"title\": \"Featured Promotion 1\",\n        \"description\": \"Test\",\n        \"promocode\": promocode,\n        \"image\": \"\",\n        \"slug\": \"featured-promotion-1\",\n    }\n    form = FeaturedPromotionForm(data)\n    form.is_valid()\n    fp = form.save()\n\n    assert_that(fp.deeplink, starts_with(\"com.kleen.app://featured-promotion-details/\"))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 42,
    "score": "4",
    "annotator": 1,
    "annotation_id": 142,
    "created_at": "2025-10-29T15:15:49.246476Z",
    "updated_at": "2025-10-29T15:15:49.246490Z",
    "lead_time": 7.974,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/www/tests/test_invitation.py:InvitationPageTests.test_page__delegation_disabled",
    "text": "def test_page__delegation_disabled(self) -> None:\n    delegation = self.any_delegation(enabled=False)\n    with self.assertRaises(Redirect) as e:\n        assert_that(InvitationPage.get(token=delegation.token))\n    response = e.exception.args[0]\n    assert_that(response.status_code, is_(302))\n    assert_that(response.url, reverse(\"www:error\", kwargs={\"token\": delegation.token}))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 4,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 43,
    "score": "4",
    "annotator": 1,
    "annotation_id": 143,
    "created_at": "2025-10-29T15:15:55.854978Z",
    "updated_at": "2025-10-29T15:15:55.855000Z",
    "lead_time": 6.433,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_address_api.py:ListTests.test_list__unauthenticated",
    "text": "def test_list__unauthenticated(self) -> None:\n    self.client = Client()\n    self.when_i_list_addresses()\n    assert_that(self.last_response.status_code, is_(status.HTTP_403_FORBIDDEN))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 52,
      "docstring_strength": 0.0
    },
    "id": 44,
    "score": "4",
    "annotator": 1,
    "annotation_id": 144,
    "created_at": "2025-10-29T15:16:01.879413Z",
    "updated_at": "2025-10-29T15:16:01.879425Z",
    "lead_time": 5.863,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_model.py:RequestExportSettingTest.test_columns_to_export__invoice_reference__label",
    "text": "def test_columns_to_export__invoice_reference__label(self) -> None:\n    \"\"\"\n    Given\n        a site configuration for invoice_reference definition\n        a request export setting with invoice_reference to export\n    When I get columns_to_export\n    Then a dict that contain custom label is return\n    \"\"\"\n    site = self.any_site()\n    user = self.any_user(sites=[site.pk])\n    invoice_reference_definition = Definition.objects.get(name=\"request.invoice_reference\")\n    conf = self.any_site_configuration(definition=invoice_reference_definition, site=site)\n    conf.label = \"CustomLabel\"\n    conf.full_clean()\n    conf.save()\n    with activate(site=site):\n        assert_that(p_(name=\"request.invoice_reference\").label == \"CustomLabel\")\n        export_setting = self.any_request_export_setting(\n            creator=user, site=site, fields_to_export=[\"invoice_reference\"]\n        )\n        assert_that(export_setting.columns_to_export, has_length(1))\n        assert_that(export_setting.columns_to_export[\"invoice_reference\"], is_(\"CustomLabel\"))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 6.0
    },
    "id": 45,
    "score": "5",
    "annotator": 1,
    "annotation_id": 145,
    "created_at": "2025-10-29T15:16:23.084758Z",
    "updated_at": "2025-10-29T15:16:23.084772Z",
    "lead_time": 21.051,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v80/tests/forms/test_check_mobile_phone.py:CheckMobilePhoneFormTestCase.test_form__wrong_code__fourth_try",
    "text": "def test_form__wrong_code__fourth_try(self) -> None:\n    \"\"\"\n    Given an invalid code and a user with check retry equal to 3\n    When i valid\n    Then form is invalid\n    \"\"\"\n    user = self.any_user(with_mobile_phone_verified=False)\n    user.mobile_phone_to_verify_verification_retries = 3\n    user.save()\n    form = CheckMobilePhoneForm(data={\"code\": \"wron\"}, context={\"user\": user})\n    assert_that(form.is_valid(), is_(False))\n    assert_that(user.is_frauder, is_(False))\n    assert_that(\n        form.errors,\n        is_({\"code\": [\"Le code saisi n'est pas valide.\"]}),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 46,
    "score": "5",
    "annotator": 1,
    "annotation_id": 146,
    "created_at": "2025-10-29T15:16:32.145531Z",
    "updated_at": "2025-10-29T15:16:32.145543Z",
    "lead_time": 8.898,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_client.py:ClientTestCase.test_client_raises_bad_tracker_on_climax_501",
    "text": "def test_client_raises_bad_tracker_on_climax_501(self) -> None:\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    client = Client(hss)\n    with requests_mock.Mocker() as m:\n        m.get(self._mock_endpoint, status_code=501)\n        assert_that(calling(client.request).with_args(self._mock_endpoint), raises(BadTracker))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 47,
    "score": "2",
    "annotator": 1,
    "annotation_id": 147,
    "created_at": "2025-10-29T15:16:41.223994Z",
    "updated_at": "2025-10-29T15:16:41.224006Z",
    "lead_time": 8.917,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/templatetags/tests/request_header_actions/test_tms_shipment_refused.py:TemplateTagTests.test_state__quoted",
    "text": "def test_state__quoted(self) -> None:\n    request_type = request_types.quoted\n    with self.subTest(request_type=request_type):\n        request = self.any_request(state=request_states.tms_shipment_refused, type=request_type)\n        header = request_header_actions(request=request, user=request.creator)\n\n        expected: Dict[str, Any] = expected_actions[request_type]\n\n        left_actions = [action.action for action in header[\"left_actions\"]]\n        right_actions = [action.action for action in header[\"right_actions\"]]\n        assert_that(left_actions, only_contains(*expected[\"principal\"][\"left\"]))\n        assert_that(right_actions, only_contains(*expected[\"principal\"][\"right\"]))\n        assert_that(header[\"secondary_actions\"], has_length(len(expected[\"secondary\"])))\n        for i, actions in enumerate(header[\"secondary_actions\"]):\n            secondary_actions = [action.action for action in actions]\n            expected_secondary = expected[\"secondary\"]\n            assert_that(secondary_actions, only_contains(*expected_secondary[i]))",
    "metrics": {
      "line_count": 14,
      "assertion_count": 4,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 5,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 48,
    "score": "3",
    "annotator": 1,
    "annotation_id": 148,
    "created_at": "2025-10-29T15:16:55.577145Z",
    "updated_at": "2025-10-29T15:16:55.577164Z",
    "lead_time": 14.177,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/test_permissions.py:PermissionsTestCase.test_is_not_frauder_by_phone_but_by_admin",
    "text": "def test_is_not_frauder_by_phone_but_by_admin(self) -> None:\n    \"\"\"\n    given :\n        - a valid user\n        - which is a frauder by admin\n        - which is logged in\n        - a request\n    when :\n        - i check user permission IsNotFrauderByAdmin\n    then :\n        - `has_permission`is true\n        - user's property `is_frauder`is true\n    \"\"\"\n    user = self.any_user()\n    request = RequestFactory().get(\"/fake\")\n    request.user = user\n    user.is_frauder = True\n    user.frauder_reason = frauder_reasons.by_admin\n    user.last_frauder_update = timezone.now()\n    user.save()\n    has_permission = IsNotFrauderByPhoneValidation().has_permission(request, None)\n    assert_that(has_permission, is_(True))\n    assert_that(user.is_frauder, is_(True))\n    assert_that(user.frauder_reason, is_not(frauder_reasons.phone_validation_fail))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 86,
      "docstring_strength": 11.0
    },
    "id": 49,
    "score": "5",
    "annotator": 1,
    "annotation_id": 149,
    "created_at": "2025-10-29T15:17:05.176886Z",
    "updated_at": "2025-10-29T15:17:05.176907Z",
    "lead_time": 9.428,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/accounts/api/v50/tests/test_me_api.py:MeApiTests.test_read_me_with_access_field",
    "text": "@vcr.use_cassette()\ndef test_read_me_with_access_field(self) -> None:\n    self.when_i_read_me()\n    data_contract = self.json_content[\"fields\"][\"contract_set\"][0]\n    assert_that(data_contract[\"fields\"][\"access\"], is_(not_none()))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 55,
      "docstring_strength": 0.0
    },
    "id": 50,
    "score": "3",
    "annotator": 1,
    "annotation_id": 150,
    "created_at": "2025-10-29T15:17:15.310818Z",
    "updated_at": "2025-10-29T15:17:15.310842Z",
    "lead_time": 5.148,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/carts/test_create_cart_item_form.py:CartItemCreateFormTests.test_cart_item_create_form__with_prepaid_account_limit_exceeded",
    "text": "def test_cart_item_create_form__with_prepaid_account_limit_exceeded(self) -> None:\n    \"\"\"\n    Given a user with:\n        a cart\n        a prepaid account with (settings.PREPAID_ACCOUNT_MAXIMUM_AMOUNT - 1)\n    When I serialize a credit pack of 11€\n    Then I get an exception indicating that the total of prepaid account + credit pack value exceed the limit\n    \"\"\"\n    cart = self.any_cart()\n    personal_prepaid_account = cart.user.personal_prepaid_account\n    personal_prepaid_account.credits = (settings.PREPAID_ACCOUNT_MAXIMUM_AMOUNT - 1) * 100\n    personal_prepaid_account.save()\n    deal_credits_pack = self.any_deal(profile=deal_profiles.credits_pack)\n    data = {\"reference\": deal_credits_pack.pk, \"quantity\": 1, \"item_type\": create_cart_item_types.deal}\n    form = CartItemCreateForm(data=data, cart=cart)\n    assert_that(form.is_valid(), is_(False))\n    assert_that(\n        form.errors_as_detail_status(),\n        has_entry(\"detail\", CartItemCreateForm.error_messages[CartItemCreateForm.PREPAID_ACCOUNT_EXCEED_LIMIT]),\n        has_entry(\"status\", CartItemCreateForm.PREPAID_ACCOUNT_EXCEED_LIMIT),\n    )",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 6.0
    },
    "id": 1,
    "score": "4",
    "annotator": 1,
    "annotation_id": 151,
    "created_at": "2025-10-29T15:18:36.320171Z",
    "updated_at": "2025-10-29T15:18:36.320182Z",
    "lead_time": 17.654,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_queryset.py:RequestQuerySetTests.test_request_queryset__manager",
    "text": "def test_request_queryset__manager(self) -> None:\n    \"\"\"\n    Given:\n        - u1 a user with role manager\n        - u2 a user not in same team as u1\n        - u3 a user in same team as u1\n        - t1 a team with u1 and u2\n        - r1 request created by u1\n        - r2 request created by u2\n        - r3 request created by u2 in same site\n        - r4 request created by u3\n    When I get request queryset with u1\n    Then r1 , r3, r4 returned\n    \"\"\"\n    s2 = self.any_site()\n    u1 = self.any_user(roles=[permission_roles.manager], sites=[self.site.uuid])\n    u2 = self.any_user(sites=[self.site.uuid, s2.uuid])\n    u3 = self.any_user(sites=[self.site.uuid])\n    self.any_team(with_users=[u1, u3])\n    r1 = self.any_request(site=self.site, creator=u1)\n    self.any_request(site=s2, creator=u2)\n    r3 = self.any_request(site=self.site, creator=u2)\n    r4 = self.any_request(site=self.site, creator=u3)\n    queryset = RequestQuerySet(site=self.site, user=u1).make()\n    assert_that(queryset, contains_inanyorder(r1, r3, r4))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 86,
      "docstring_strength": 12.0
    },
    "id": 2,
    "score": "5",
    "annotator": 1,
    "annotation_id": 152,
    "created_at": "2025-10-29T15:18:44.889765Z",
    "updated_at": "2025-10-29T15:18:44.889780Z",
    "lead_time": 8.382,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_powerswitch_driver.py:UpdateTests.test_update_name",
    "text": "@vcr.use_cassette()\ndef test_update_name(self) -> None:\n    \"\"\"\n    Given\n        - a Hss with a honeywell panel\n        - a HssDriver\n        - a honeywell powerswitch\n    When\n        - I update powerswitch name\n    Then\n        - I get an updated powerswitch\n    \"\"\"\n    hss = self.any_configured_hss(account=default_honeywell_account)\n    driver = driver_factory.get_driver(hss)\n    honeywell_powerswitch = self.any_honeywell_powerswitch(hss=hss)\n    new_name = get_random_string(8)\n    updated_honeywell_powerswitch = driver.power_switches.update_name(\n        device_id=str(honeywell_powerswitch.id), new_name=new_name\n    )\n    honeywell_powerswitch.refresh_from_db()\n    assert_that(updated_honeywell_powerswitch.name, is_(new_name))\n    assert_that(honeywell_powerswitch.name, is_(updated_honeywell_powerswitch.name))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 9.0
    },
    "id": 3,
    "score": "4",
    "annotator": 1,
    "annotation_id": 153,
    "created_at": "2025-10-29T15:18:55.557832Z",
    "updated_at": "2025-10-29T15:18:55.557852Z",
    "lead_time": 10.495,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_scenarios.py:ListTests.test_list__without_condition_action",
    "text": "def test_list__without_condition_action(self) -> None:\n    hss = self.any_configured_hss(account=default_climax_account)\n    driver = driver_factory.get_driver(hss=hss)\n    with requests_mock.Mocker() as m:\n        m.get(\n            \"https://padws-rec.imt.fm/WebServiceIMA/2.0/nonsecure/haListGet\",\n            json={\n                \"result\": 200,\n                \"message\": \"OK\",\n                \"has\": {\"ha\": [{\"no\": 1, \"rule\": \"\", \"exec\": \"a=1&z=4&sw=on\", \"name\": \"Sc\\xe9nario 1\"}]},\n            },\n            status_code=200,\n        )\n        scenarios = driver.scenarios.list()\n        assert_that(scenarios, is_(empty()))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 4,
    "score": "1",
    "annotator": 1,
    "annotation_id": 154,
    "created_at": "2025-10-29T15:19:08.057362Z",
    "updated_at": "2025-10-29T15:19:08.057381Z",
    "lead_time": 12.308,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/hik/drivers/tests/test_panel_status.py:HikVirtualPanelStatusTests.test_list_partitions__prom_code_error",
    "text": "def test_list_partitions__prom_code_error(self) -> None:\n    \"\"\"\n    Given any hss with prom_code : 9999\n    When I list partitions\n    Then I get an http error\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.hik, prom_code=\"9999\")\n\n    with self.assertRaises(DriverException):\n        self.when_i_list_paritions(hss)",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 5,
    "score": "5",
    "annotator": 1,
    "annotation_id": 155,
    "created_at": "2025-10-29T15:19:14.423115Z",
    "updated_at": "2025-10-29T15:19:14.423134Z",
    "lead_time": 6.197,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_request_form.py:QuotedRequestInfosFormTests.test_infos_form__quoted__transport_services__required_shipping_charter",
    "text": "def test_infos_form__quoted__transport_services__required_shipping_charter(self) -> None:\n    \"\"\"\n     Given:\n        a quoted request in draft\n        request_infos form data with \"transport\" in services and no shipping_charter\n    When i validate form\n    Then form is valid and the widget associate to the field is hidden\n    \"\"\"\n    request = self.any_request(state=request_states.draft, type=request_types.quoted)\n    data = self.any_request_infos_form_data(request=request)\n    data[\"request_infos-shipping_charter\"] = \"\"\n    form = make_request_informations_form(instance=request, read_only=False, action=None)(\n        instance=request, data=data\n    )\n    assert_that(form.is_valid(), is_(False))\n    assert_that(form.errors, has_entry(\"shipping_charter\", anything()))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 6.0
    },
    "id": 6,
    "score": "1",
    "annotator": 1,
    "annotation_id": 156,
    "created_at": "2025-10-29T15:19:48.110346Z",
    "updated_at": "2025-10-29T15:19:48.110365Z",
    "lead_time": 33.49,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v70/tests/forms/test_register.py:UpdateRegisterFormTestCase.test_register__update__empty_phone__seed_user",
    "text": "def test_register__update__empty_phone__seed_user(self) -> None:\n    \"\"\"\n    Given a seed user\n    When i update register with empty phone\n    Then user mobile phone is empty and not verified\n    \"\"\"\n    user = self.any_user(profile=user_profiles.seed)\n    data = self.any_update_register_data(user=user, mobile_phone=\"\")\n\n    register_form = UpdateRegisterForm(data=data, instance=user)\n    assert_that(register_form.is_valid(), is_(True))\n    register_form.register(user_pk=user.pk, request=None)\n\n    user.refresh_from_db()\n    assert_that(user.mobile_phone_to_verify, is_(\"\"))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 7,
    "score": "5",
    "annotator": 1,
    "annotation_id": 157,
    "created_at": "2025-10-29T15:20:16.115906Z",
    "updated_at": "2025-10-29T15:20:16.115923Z",
    "lead_time": 27.838,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/rms_mangopay/tests/test_transaction_3ds.py:Transaction3DSecureTestCase.test_buy_with_force_3DS_async",
    "text": "def test_buy_with_force_3DS_async(self, *mocks) -> None:\n    buyer_account = self.any_mangopay_account_with_card_3D_secure()\n    recipient_user = self.given_mangopay_recipient_user()\n    amount = self.given_amount_greater_under_3DS_limit()\n    secure_mode = secure_modes.FORCE\n\n    def on_init(sender, transaction, **kwargs):\n        self.assertEqual(transaction.state, transaction_states.initial)\n        self.assertEqual(transaction.secure_mode, secure_mode)\n        self.on_init_called = True\n\n    transaction_initiated.connect(on_init)\n\n    def on_waiting_3DS(sender, transaction, **kwargs):\n        self.when_i_3d_validate_payment(transaction)\n\n        self.assertTrue(transaction.id)\n        self.then_transactions_count_is(1, transaction.transaction_type)\n\n        transaction.wait_for_completion()\n        self.on_waiting_3DS_called = True\n\n    transaction_waiting_3DS.connect(on_waiting_3DS)\n\n    def on_success(sender, transaction, **kwargs):\n        self.then_transaction_is_success(\n            transaction.id, amount, secure_mode=secure_mode, card_type=buyer_account.default_card().card_type\n        )\n        self.on_success_called = True\n\n    transaction_succeed.connect(on_success)\n\n    # 1: Create transaction\n    self.when_i_create_payin(\n        buyer_account,\n        recipient_user,\n        amount,\n        secure_mode=secure_mode,\n        run_async=True,\n        secure_mode_version=secure_mode_versions.secure_mode_3ds1,\n    )\n\n    self.assertTrue(self.on_init_called)\n    self.assertTrue(self.on_waiting_3DS_called)\n    self.assertTrue(self.on_success_called)\n    transaction_initiated.disconnect(on_init)\n    transaction_waiting_3DS.disconnect(on_waiting_3DS)\n    transaction_succeed.disconnect(on_success)",
    "metrics": {
      "line_count": 27,
      "assertion_count": 6,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 8,
    "score": "1",
    "annotator": 1,
    "annotation_id": 158,
    "created_at": "2025-10-29T15:20:22.559812Z",
    "updated_at": "2025-10-29T15:20:22.559831Z",
    "lead_time": 6.27,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/tests/test_models.py:CreditsPackValidationTests.test_schedulers__validation_error_when_overriding_start_date",
    "text": "def test_schedulers__validation_error_when_overriding_start_date(self) -> None:\n    \"\"\"\n    Given : A credits pack with a scheduler on a specific period\n    When : I create a second scheduler with a start date that overrides with an existing period\n    Then : Validation error is raised\n    \"\"\"\n    credits_pack = self.any_credits_pack()\n    start_date = timezone.now()\n    end_date = start_date + timedelta(days=7)\n    first_scheduler = self.any_credits_pack_scheduler(\n        credits_pack=credits_pack, start_date=start_date, end_date=end_date\n    )\n    second_start_date = first_scheduler.start_date + timedelta(days=2)\n    second_end_date = first_scheduler.end_date + timedelta(days=2)\n    with self.assertRaises(ValidationError) as e:\n        self.any_credits_pack_scheduler(\n            credits_pack=credits_pack, start_date=second_start_date, end_date=second_end_date\n        )\n    assert_that(e.exception.messages[0], is_(\"A scheduler is already configured on this period or a part of it.\"))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 9,
    "score": "5",
    "annotator": 1,
    "annotation_id": 159,
    "created_at": "2025-10-29T15:20:34.992721Z",
    "updated_at": "2025-10-29T15:20:34.992733Z",
    "lead_time": 12.271,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/histories/tests/test_historical_records.py:HistoricalRecordTests.test_historical_acs_trans_called",
    "text": "def test_historical_acs_trans_called(self) -> None:\n    \"\"\"\n    Given any shipping record\n    When I receive acs trans called event for this shipping record\n    Then I get a new historical record for that request with corresponding ACS Trans data\n    \"\"\"\n    sr = self.any_shipping_record()\n    data = self.any_shipping_record_acs_trans_called_data(shipping_record=sr)\n    ShippingRecordACSTransCalledEventLoader().on_message(\"\", data)\n    assert_that(\n        HistoricalRecord.objects.filter(\n            request=sr.request,\n            triggered_by=HistoricalRecordTriggeredBy.ACS_TRANS,\n            type=HistoricalRecordType.API_UPDATE,\n        ),\n        has_length(1),\n    )\n    record = HistoricalRecord.objects.get(\n        request=sr.request,\n        triggered_by=HistoricalRecordTriggeredBy.ACS_TRANS,\n        type=HistoricalRecordType.API_UPDATE,\n    )\n    assert_that(record.data, has_entries({\"data\": instance_of(str), \"error\": is_(none())}))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 10,
    "score": "4",
    "annotator": 1,
    "annotation_id": 160,
    "created_at": "2025-10-29T15:22:09.164551Z",
    "updated_at": "2025-10-29T15:22:16.550578Z",
    "lead_time": 91.81,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_honeywell_status.py:ScenarioTypeUniverseApi40Tests.test_list_scenario_type_universe",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_type_universe(self) -> None:\n    \"\"\"\n    Given : 6 inital scenarios type universe for panel_type hme_ip, 3 with country_code 'fr',\n            3 with country_code 'it'\n    When : I list scenario type universe\n    Then : Http response is 200, response contain 3 Scenario Type\n    \"\"\"\n    last_response = self.when_i_list_scenario_type_universe()\n    assert_that(last_response.status_code, is_(200))\n    assert_that(last_response.json(), has_length(5))\n    for scenario_type_data in last_response.json():\n        assert_that(scenario_type_data, has_entry(\"pk\", is_not(none())))\n        scenario_type = ScenarioType.objects.get(pk=scenario_type_data[\"pk\"])\n        assert_that(scenario_type.country_code, equal_to_ignoring_case(self.client.user.country_code))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 5.0
    },
    "id": 11,
    "score": "4",
    "annotator": 1,
    "annotation_id": 161,
    "created_at": "2025-10-29T15:24:11.845978Z",
    "updated_at": "2025-10-29T15:24:11.845994Z",
    "lead_time": 111.943,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/mangopay/test_checkout.py:MangopayPaymentMethodProviderTestCase.test_checkout__pending__to_ready",
    "text": "def test_checkout__pending__to_ready(self) -> None:\n    \"\"\"\n    Given a mangopay checkout in pending state\n    When i refresh checkout\n    Then checkout is ready and valid\n    \"\"\"\n    checkout = self.any_checkout(\n        state=checkout_states.pending,\n        payment_method=self.PAYMENT_METHOD,\n        with_ip_address=True,\n        with_browser_info=True,\n    )\n\n    checkout.refresh(consumer=checkout.cart.user.consumer_set.first())\n\n    assert_that(checkout.state, equal_to(checkout_states.ready))\n    assert_that(checkout.order_id, none())",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 12,
    "score": "5",
    "annotator": 1,
    "annotation_id": 162,
    "created_at": "2025-10-29T15:24:16.764280Z",
    "updated_at": "2025-10-29T15:24:16.764300Z",
    "lead_time": 4.743,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_unpublish_scenario.py:UnpublishScenarioApiTestCase.test_unpublish_master_scenario_maia_error",
    "text": "@vcr.use_cassette()\ndef test_unpublish_master_scenario_maia_error(self) -> None:\n    \"\"\"\n    Given a master scenario\n    When I unpublish the scenario with maia exception\n    Then I get a 502 HTTP response\n    \"\"\"\n    panel_scenario = self.any_scenario(hss=self.client.hss, state=states.published)\n    master_scenario = self.any_master_scenario(hss=self.client.hss, panel_scenario=panel_scenario)\n    with mock.patch.object(  # noqa: RMS102\n        MaiaScenarioDriver, \"deactivate_scenario\", side_effect=MaiaScenarioDriverException\n    ):\n        self.when_i_unpublish_scenario(hss_pk=self.client.hss.pk, scenario_pk=master_scenario.pk)\n    assert_that(self.last_response.status_code, is_(502))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 13,
    "score": "1",
    "annotator": 1,
    "annotation_id": 163,
    "created_at": "2025-10-29T15:24:23.231936Z",
    "updated_at": "2025-10-29T15:24:23.231955Z",
    "lead_time": 6.298,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v71/tests/orders/test_api_retrieve.py:RetrieveOrderAPITestCase.test_retrieve_order__prepaid_account_mangopay",
    "text": "def test_retrieve_order__prepaid_account_mangopay(self) -> None:\n    \"\"\"\n    Given an order with prepaid_account_mangopay\n    When I describe order\n    Then I get\n        - a 200 OK\n        - payment_share_mangopay equal to sold_price\n        - payment_share_prepaid_account equal to prepaid_account_used_incl_vat\n    \"\"\"\n\n    self.client = AuthenticatedClient(with_credits=True, credits=1000)\n\n    deal = self.any_deal()\n    cart = self.any_cart(user=self.client.user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n    cart.update(prepaid_account=self.client.user.personal_prepaid_account)\n\n    order = self.any_order(\n        user=self.client.user,\n        payment_method=payment_methods.prepaid_account_mangopay,\n        cart=cart,\n        api_version=self.API_VERSION,\n    )\n\n    self.when_i_retrieve_order(order_pk=order.pk)\n\n    assert_that(self.last_response.status_code, is_(200))\n    assert_that(\n        self.last_response.data[\"fields\"],\n        has_entries({\"sold_price\": str(order.sold_price.quantize(Decimal(\"0.01\")))}),\n    )\n    assert_that(\n        self.last_response.data[\"fields\"][\"payment_details\"],\n        has_entries(\n            {\"prepaid_account_used_incl_vat\": str(order.prepaid_account_used_incl_vat.quantize(Decimal(\"0.01\")))}\n        ),\n    )",
    "metrics": {
      "line_count": 10,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 85,
      "docstring_strength": 7.0
    },
    "id": 14,
    "score": "5",
    "annotator": 1,
    "annotation_id": 164,
    "created_at": "2025-10-29T15:24:53.781028Z",
    "updated_at": "2025-10-29T15:24:53.781047Z",
    "lead_time": 30.379,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/tests/test_models.py:ThermometerTests.test_from_generic",
    "text": "def test_from_generic(self) -> None:\n    thermometer = self.any_local_climax_thermometer()\n    assert_that(Thermometer.objects.from_generic(thermometer.to_generic()), is_(thermometer))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 50,
      "docstring_strength": 0.0
    },
    "id": 15,
    "score": "1",
    "annotator": 1,
    "annotation_id": 165,
    "created_at": "2025-10-29T15:25:00.320069Z",
    "updated_at": "2025-10-29T15:25:00.320085Z",
    "lead_time": 6.381,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/framed/test_planned.py:OtherFramedPermissionBackendTest.test_permissions__other_request",
    "text": "def test_permissions__other_request(self) -> None:\n    \"\"\"\n    Tests every framed permission on every state for every roles and every request types (my / team / other)\n    \"\"\"\n    other_request = self.any_framed_request(creator=self.u3, state=state)\n\n    request_permissions_without_cancel = [\n        perm for perm in request_permissions.all if perm != request_permissions.can_cancel\n    ]\n\n    for role in permission_roles.all:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        for perm in request_permissions_without_cancel:\n            with self.subTest(role=role, perm=perm):\n                other_request_expected = perm in expected.get(role, {}).get(\"other_request\", {})\n                assert_that(u1.has_perm(perm, obj=other_request), is_(other_request_expected))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 5,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 68,
      "docstring_strength": 2.0
    },
    "id": 16,
    "score": "4",
    "annotator": 1,
    "annotation_id": 166,
    "created_at": "2025-10-29T15:25:10.315391Z",
    "updated_at": "2025-10-29T15:25:10.315410Z",
    "lead_time": 9.83,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderItemWashingPrices.test_offered_product_promotional_offer__corrected_prices",
    "text": "def test_offered_product_promotional_offer__corrected_prices(self) -> None:\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    product = self.any_product()\n    wp = self.any_washing_program(product=product)\n    deal = self.any_deal(\n        washing_program=wp,\n        price_after_discount=decimal.Decimal(\"10\"),\n        price_before_discount=decimal.Decimal(\"10\"),\n    )\n\n    offered_product = self.any_product()\n    offered_wp = self.any_washing_program(product=offered_product, station=wp.station)\n    self.any_deal(\n        washing_program=offered_wp,\n        price_after_discount=decimal.Decimal(\"10\"),\n        price_before_discount=decimal.Decimal(\"10\"),\n    )\n\n    self.any_promotional_offer(\n        required_washing_program=wp, discounted_washing_program=offered_wp, station=wp.station\n    )\n\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n    assert_that(order.discount, is_(decimal.Decimal(\"10.000000\")))\n\n    orderitem_offered = order.orderitem_set.exclude(deal_pk=deal.pk).first()\n    assert_that(orderitem_offered.corrected_price_before_discount, is_(decimal.Decimal(\"10.000000\")))\n    assert_that(orderitem_offered.corrected_price_after_discount, is_(0))",
    "metrics": {
      "line_count": 16,
      "assertion_count": 3,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 6,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 17,
    "score": "2",
    "annotator": 1,
    "annotation_id": 167,
    "created_at": "2025-10-29T15:25:24.789849Z",
    "updated_at": "2025-10-29T15:25:24.789864Z",
    "lead_time": 14.309,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_cancel_form.py:RequestCancelFormTests.test_abort__from_list",
    "text": "def test_abort__from_list(self) -> None:\n    request = self.any_framed_request(state=request_states.draft, creator=self.client.user)\n    next_url = reverse(\"www:request-action\", kwargs={\"site_slug\": request.site.slug, \"pk\": request.pk})\n    url = RequestCancelPage.get_url(site_slug=request.site.slug, pk=request.pk) + f\"?next={next_url}\"\n    page = RequestCancelPage.get(client=self.client, url=url).form.submit(\n        data={\"abort_comment\": \"toto\"}, next_page_class=RequestListPage\n    )\n    assert_that(page, instance_of(RequestListPage))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 18,
    "score": "3",
    "annotator": 1,
    "annotation_id": 168,
    "created_at": "2025-10-29T15:26:07.350471Z",
    "updated_at": "2025-10-29T15:26:07.350483Z",
    "lead_time": 42.409,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/test_metrics.py:MetricsTests.test_not_acknowledged_tms_transmission_false_timezone",
    "text": "def test_not_acknowledged_tms_transmission_false_timezone(self) -> None:\n    \"\"\"\n    Given a request in state tms_transmission with state_changed < 1hour\n    and acknowledged_version != current request version\n    When I try retrieve metric for not_acknowledged_tms_transmission\n    Then I get a count = 0\n    \"\"\"\n    request = self.any_request()\n    request.state_changed = timezone.now()\n    request.acknowledged_versions.append(request.version + 1)\n    request.save()\n    with patch(\"datadog.DogStatsd.gauge\") as m:\n        site.collect()\n    assert_that(m.call_args_list, has_item(call(\"iwp_myroad.request_not_acknowledged\", 0)))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 5.0
    },
    "id": 19,
    "score": "1",
    "annotator": 1,
    "annotation_id": 169,
    "created_at": "2025-10-29T15:26:43.349567Z",
    "updated_at": "2025-10-29T15:26:43.349585Z",
    "lead_time": 35.83,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:UnpublishScenarioApiTestCase.test_unpublish_scenario__scenario_mode_different_hss_delegation",
    "text": "@vcr.use_cassette()\ndef test_unpublish_scenario__scenario_mode_different_hss_delegation(self) -> None:\n    \"\"\"\n    Given : A scenario with is_on = False, group = away while hss scenario_mode = daily, state is published\n    When : I unpublish this scenario\n    Then : I get a 400 HTTP response, with a dict\n           The scenario hasn't been updated\n           HSS is returned\n\n    \"\"\"\n    hss = self.client.hss\n    self.client = HoneywellAPIClient()\n    DelegationMixin().any_delegation(\n        contract=hss.site.contract, enabled=True, role=roles.full, user=self.client.user\n    )\n    scenario = self.any_scenario(hss=hss, state=states.published)\n    scenario.group = groups.away\n    scenario.is_on = False\n    scenario.save(\n        update_fields=[\n            \"is_on\",\n            \"group\",\n        ]\n    )\n    last_response = self.when_i_unpublish_scenario(scenario.pk)\n    scenario.refresh_from_db()\n    assert_that(last_response.status_code, is_(400))\n    assert_that(last_response.json(), has_entry(\"group\", not_none()))\n    assert_that(scenario.is_on, is_(False))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 7.0
    },
    "id": 20,
    "score": "4",
    "annotator": 1,
    "annotation_id": 170,
    "created_at": "2025-10-29T15:27:00.536161Z",
    "updated_at": "2025-10-29T15:27:00.536173Z",
    "lead_time": 17.0,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/promotional_offers/tests/test_tasks.py:ActivatePromotionalOfferTests.test_activate_promotional_offer__greater_than_today",
    "text": "def test_activate_promotional_offer__greater_than_today(self) -> None:\n    \"\"\"\n    Given any promotional offer not active and validity_from greater than today\n    When I launch activate_promotional_offer_on_date task\n    Then promotional offer is still not active\n    \"\"\"\n    date = timezone.now().date()\n\n    promotional_offer = self.any_promotional_offer(active=False)\n    promotional_offer.validity_from = date + timedelta(days=1)\n    promotional_offer.save()\n\n    activate_promotional_offer_on_date()\n\n    promotional_offer.refresh_from_db()\n    assert_that(promotional_offer.active, is_(False))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 21,
    "score": "5",
    "annotator": 1,
    "annotation_id": 171,
    "created_at": "2025-10-29T15:27:09.364527Z",
    "updated_at": "2025-10-29T15:27:09.364552Z",
    "lead_time": 8.662,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/transitions/request/quoted/test_leave.py:QuotedStateMachineLeaveTests.test_leave__from_initial",
    "text": "def test_leave__from_initial(self) -> None:\n    \"\"\"\n    given a request in initial state\n    when i leave\n    then request is in dropped state\n    \"\"\"\n    request = self.any_quoted_request(state=request_states.initial, ready_to_submit=False)\n    request.state_machine(user=request.creator).leave()\n    assert_that(request.state, is_(request_states.dropped))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 22,
    "score": "5",
    "annotator": 1,
    "annotation_id": 172,
    "created_at": "2025-10-29T15:27:21.234323Z",
    "updated_at": "2025-10-29T15:27:21.234338Z",
    "lead_time": 11.707,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/rms_mangopay/tests/test_card.py:CardRegistrationTestCase.test_update_card_registration",
    "text": "def test_update_card_registration(self, *mocks) -> None:\n    mangopay_user = self.any_mangopay_user()\n    account = mangopay.get_account(mangopay_user)\n    account.create(person_type=USER_TYPE_CHOICES.natural)\n    account.default_card_registration().create()\n    registration_data = self.when_i_register_card_data(account.default_card_registration())\n    account.default_card_registration().update(registration_data)\n    self.then_card_registration_is_valid(account, mangopay_user)\n    self.assertTrue(account.default_card_registration().card_id)\n    self.assertTrue(mangopay_user.card.mangopay_card_id)\n    self.assertEqual(account.default_card_registration().card_id, mangopay_user.card.mangopay_card_id)\n    self.assertFalse(mangopay_user.card.has_valid_mangopay_card)",
    "metrics": {
      "line_count": 11,
      "assertion_count": 4,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 23,
    "score": "2",
    "annotator": 1,
    "annotation_id": 173,
    "created_at": "2025-10-29T15:27:34.615931Z",
    "updated_at": "2025-10-29T15:27:34.615948Z",
    "lead_time": 13.204,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/repositories/tests/test_brand.py:BrandRespositoryTestCase.test_repository",
    "text": "def test_repository(self) -> None:\n    \"\"\"\n    Given 1 zone_context and 1 brand associated with this zone_context\n    When I call the repository\n    Then I get 1 brand\n    \"\"\"\n    zone_context = self.any_zone_context()\n    self.any_brand(zone_context=zone_context)\n\n    filtered = BrandRepository().get_all(zone_context)\n\n    assert_that(len(filtered), is_(1))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 24,
    "score": "5",
    "annotator": 1,
    "annotation_id": 174,
    "created_at": "2025-10-29T15:27:40.659188Z",
    "updated_at": "2025-10-29T15:27:40.659200Z",
    "lead_time": 5.864,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/mangopay/test_checkout.py:MangopayPaymentMethodProviderTestCase.test_checkout__pending__to_missing_browser_info",
    "text": "def test_checkout__pending__to_missing_browser_info(self) -> None:\n    \"\"\"\n    Given:\n        - a user\n        - a cart with this user\n        - a checkout\n    When: I refresh checkout\n    Then: Checkout is in missing_ip_address\n    \"\"\"\n    user = self.any_user(with_mobile_phone_verified=False)\n    cart = self.any_cart(user=user, state=cart_states.active)\n    checkout = self.any_checkout(\n        cart=cart,\n        state=checkout_states.pending,\n        payment_method=self.PAYMENT_METHOD,\n        with_ip_address=True,\n        with_browser_info=None,\n    )\n    checkout.refresh(consumer=checkout.cart.user.consumer_set.first())\n\n    assert_that(checkout.state, equal_to(checkout_states.missing_browser_info))\n    assert_that(checkout.order_id, none())",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 7.0
    },
    "id": 25,
    "score": "4",
    "annotator": 1,
    "annotation_id": 175,
    "created_at": "2025-10-29T15:28:50.699219Z",
    "updated_at": "2025-10-29T15:28:50.699248Z",
    "lead_time": 69.879,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_cancel_form.py:RequestCancelFormTests.test_load__unauthenticated",
    "text": "def test_load__unauthenticated(self) -> None:\n    self.client = Client()\n    request = self.any_framed_request(state=request_states.draft)\n    with self.assertRaises(RedirectException):\n        RequestCancelPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 26,
    "score": "4",
    "annotator": 1,
    "annotation_id": 176,
    "created_at": "2025-10-29T15:28:55.325454Z",
    "updated_at": "2025-10-29T15:28:55.325474Z",
    "lead_time": 4.453,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_myr_10.py:MYR10Tests.test_canceled_states_are_migrated_in_one_label",
    "text": "def test_canceled_states_are_migrated_in_one_label(self) -> None:\n    \"\"\"\n    Given:\n        r1: a request cancelled\n        r2: a request aborted\n        r4: a request draft\n    When I filter status canceled\n    Then r1, r2, r3 are returned\n    \"\"\"\n    site = self.any_site()\n    r1 = self.any_framed_request(site=site, state=request_states.cancelled)\n    r2 = self.any_framed_request(creator=r1.creator, site=site, state=request_states.aborted)\n    self.any_framed_request(creator=r1.creator, site=site, state=request_states.draft)\n    form = make_request_filter_form(site=site, user=r1.creator, params={\"\": \"\"})(data={\"state\": [\"cancelled\"]})\n    assert_that(form.is_valid())\n    qs = form.get_filter_queryset(queryset=Request.objects.all(), user=r1.creator)\n    assert_that(qs.count(), is_(2))\n    assert_that(qs.filter(pk=r1.pk).exists(), is_(True))\n    assert_that(qs.filter(pk=r2.pk).exists(), is_(True))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 7.0
    },
    "id": 27,
    "score": "2",
    "annotator": 1,
    "annotation_id": 177,
    "created_at": "2025-10-29T15:29:23.915886Z",
    "updated_at": "2025-10-29T15:29:23.915907Z",
    "lead_time": 28.408,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/bus/tests/test_account_adapter.py:AccountAdapterTests.test_account_adapter",
    "text": "def test_account_adapter(self) -> None:\n    account = self.any_prepaid_account()\n    account.users.add(account.owner)\n    adapter = AccountAdapter()\n    key = adapter.key(account)\n    topic = adapter.topic(account)\n    payload = adapter.as_data(account)\n    data = payload[\"data\"]\n    assert_that(key, is_(str(account.id)))\n    assert_that(topic, is_(\"resource.kleen.account\"))\n    assert_that(payload[\"uri\"], account.uri)\n\n    assert_that(\n        data,\n        has_entries(\n            {\n                \"name\": account.name,\n                \"account_type\": account.account_type,\n                \"amount\": account.credits,\n                \"users\": has_item(account.owner.uri),\n                \"owner\": account.owner.uri,\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 11,
      "assertion_count": 4,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 28,
    "score": "4",
    "annotator": 1,
    "annotation_id": 178,
    "created_at": "2025-10-29T15:32:24.546795Z",
    "updated_at": "2025-10-29T15:32:24.546825Z",
    "lead_time": 180.452,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_api_promocode.py:PromoCodeTestCase.test_promocode_available_only_for_washing",
    "text": "def test_promocode_available_only_for_washing(self) -> None:\n    self.client = AuthenticatedClient()\n    code = self.any_promo_code(\n        price=140,\n        infinite_use=True,\n        code_type=promo_code_type.global_type,\n        available=promo_code_availability.washing,\n    )\n    washing_deal = self.any_deal()\n    prepaid_account_deal = self.any_deal__credits_pack()\n    self.when_i_retrieve_promo_code(code.code, deal_id=washing_deal.id)\n    promo_code = self.last_response.data\n    fields = promo_code[\"fields\"]\n    self.assertTrue(fields[\"code\"])\n    self.assertEqual(fields[\"code\"], code.code)\n    self.when_i_retrieve_promo_code(code.code, deal_id=prepaid_account_deal.id)\n    self.then_http_status_is(404)",
    "metrics": {
      "line_count": 11,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 29,
    "score": "1",
    "annotator": 1,
    "annotation_id": 179,
    "created_at": "2025-10-29T15:32:32.698841Z",
    "updated_at": "2025-10-29T15:32:32.698855Z",
    "lead_time": 7.975,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__qualification_time__framed",
    "text": "def test_request_formatter__qualification_time__framed(self) -> None:\n    \"\"\"\n    Given a framed request\n    When I use RequestFormatter with 'qualification_time' field to export\n    Then it return a dict that contain request tms_transmission_time\n    \"\"\"\n    request = self.any_framed_request(request_states.planned)\n    request_csv = RequestFormatter().to_csv(request, fields=[\"qualification_time\"])\n    assert request.tms_transmission_time\n    assert_that(\n        request_csv[0],\n        is_(request.tms_transmission_time.astimezone(settings.EUROPE_PARIS_ZI).strftime(\"%Y-%m-%d %H:%M:%S\")),\n    )",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 4.0
    },
    "id": 30,
    "score": "5",
    "annotator": 1,
    "annotation_id": 180,
    "created_at": "2025-10-29T15:32:40.458766Z",
    "updated_at": "2025-10-29T15:32:40.458778Z",
    "lead_time": 7.603,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v71/tests/deliveries/test_api_rating.py:RatingDeliveryAPITestCase.test_rating__wrong_user",
    "text": "def test_rating__wrong_user(self) -> None:\n    \"\"\"\n    Given\n        a delivery from another user\n    When I rate\n    Then 200 OK\n    \"\"\"\n    self.client = AuthenticatedClient()\n    delivery = self.any_delivery(api_version=API_VERSION)\n\n    self.when_i_post_delivery_rating(delivery_id=delivery.id, rating=4)\n\n    assert_that(self.last_response, http(404))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 5.0
    },
    "id": 31,
    "score": "1",
    "annotator": 1,
    "annotation_id": 181,
    "created_at": "2025-10-29T15:33:43.860087Z",
    "updated_at": "2025-10-29T15:33:43.860100Z",
    "lead_time": 63.253,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_climax_kiz.py:ListScenarioApiTestCase.test_list_scenarios_maia",
    "text": "@vcr.use_cassette()\ndef test_list_scenarios_maia(self) -> None:\n    \"\"\"\n    Given a client with contract supporting 'connected home'\n    Given a scenario Maia\n    When I list scenario\n    Then 200\n    Then I have 1 scenario with device pk in the action\n    \"\"\"\n    self.client.hss.site.contract.capabilities.append(ContractCapabilities.connected_home.value)\n    self.client.hss.site.contract.save()\n    self.any_maia_scenario(hss=self.client.hss)\n    device = self.any_local_device(type=DeviceType.heater)\n    last_response = self.when_i_list_scenarios()\n    assert_that(last_response.status_code, is_(200))\n    data = last_response.json()\n    assert_that(data, has_length(1))\n    assert_that(\n        data[0],\n        has_entry(\n            \"fields\",\n            has_entry(\n                \"actions\",\n                contains(\n                    has_entry(\n                        \"data\",\n                        has_entry(\"device_pk\", is_(str(device.pk))),\n                    )\n                ),\n            ),\n        ),\n    )",
    "metrics": {
      "line_count": 9,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 6.0
    },
    "id": 32,
    "score": "5",
    "annotator": 1,
    "annotation_id": 182,
    "created_at": "2025-10-29T15:35:15.329428Z",
    "updated_at": "2025-10-29T15:35:15.329445Z",
    "lead_time": 91.279,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/quoted/test_3rd_party_transmission.py:OtherQuotedPermissionBackendTest.test_permissions__other_request",
    "text": "def test_permissions__other_request(self) -> None:\n    \"\"\"\n    Tests every quoted permission on every state for every roles and every request types (my / team / other)\n    \"\"\"\n    other_request = self.any_quoted_request(creator=self.u3, state=state, by_partner=self.c1)\n    for role in permission_roles.all:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.c1.users.set([u1])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        for perm in request_permissions.all:\n            with self.subTest(role=role, perm=perm):\n                other_request_expected = perm in expected.get(role, {}).get(\"other_request\", {})\n                assert_that(u1.has_perm(perm, obj=other_request), is_(other_request_expected))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 2.0
    },
    "id": 33,
    "score": "4",
    "annotator": 1,
    "annotation_id": 183,
    "created_at": "2025-10-29T15:35:20.404187Z",
    "updated_at": "2025-10-29T15:35:20.404213Z",
    "lead_time": 4.902,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/bus/tests/test_promocode_adapter.py:PromoCodeAdapterTests.test_promocode_send_on_save",
    "text": "def test_promocode_send_on_save(self) -> None:\n    promocode = self.any_promocode()\n    with mock.patch(\"tw.replication.client.publish\") as m:  # noqa: RMS102\n        promocode.save()\n    m.assert_called_once()",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 34,
    "score": "2",
    "annotator": 1,
    "annotation_id": 184,
    "created_at": "2025-10-29T15:35:34.191508Z",
    "updated_at": "2025-10-29T15:35:34.191520Z",
    "lead_time": 13.625,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter_additional_quote_quantity_3_quoted",
    "text": "def test_request_formatter_additional_quote_quantity_3_quoted(self) -> None:\n    \"\"\"\n    Given a quoted request\n    When I use RequestFormatter with 'additional_quote_quantity_3' field to export\n    Then it return a dict that contain request additional_quote_quantity_3\n    \"\"\"\n    request = self.any_quoted_request(with_additional_quotes=True)\n    additional_quote = request.additionalquote_set.first()\n    assert isinstance(additional_quote, AdditionalQuote)\n    additional_quote.quantity = 12\n    additional_quote.label = \"Test\"\n    additional_quote.full_clean()\n    additional_quote.save()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"additional_quote_quantity_3\"])\n    assert_that(request_csv[0], is_(12))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 4.0
    },
    "id": 35,
    "score": "3",
    "annotator": 1,
    "annotation_id": 185,
    "created_at": "2025-10-29T15:36:13.257971Z",
    "updated_at": "2025-10-29T15:36:13.257984Z",
    "lead_time": 38.912,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v80/tests/stations/test_api_voucher_prices.py:StationVoucherPriceAPITestCase.test_read_bad_station",
    "text": "def test_read_bad_station(self) -> None:\n    self.client = AuthenticatedClient(self.voucher.product_voucher_account.owner)\n    self.when_i_get_station_voucher_prices(station_pk=123, url_params={\"product_voucher_id\": self.voucher.pk})\n    assert_that(self.last_response, http(404))\n    assert_that(\n        self.last_response.json(),\n        is_(\n            {\"details\": \"no station\"},\n        ),\n    )",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 36,
    "score": "4",
    "annotator": 1,
    "annotation_id": 186,
    "created_at": "2025-10-29T15:36:23.567822Z",
    "updated_at": "2025-10-29T15:36:23.567839Z",
    "lead_time": 10.11,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/tests/test_hss_model.py:HssModelTests.test_reset_scenarios",
    "text": "@vcr.use_cassette()\ndef test_reset_scenarios(self) -> None:\n    \"\"\"\n    Given the hss of account test.ripplemotion@gmail.com\n    When I migrate scenario, delete one of them stock the info about the migration pk & count of scenarios\n        and reset scenario migration\n    Then I have a new migration & scenario have been re-created\n    \"\"\"\n    hss = ClimaxHandlerClient().hss\n    hss.migrate_scenario_if_needed()\n    hss.scenarios.filter(state=states.ready).delete()\n    previous_scenario_count = hss.scenarios.all().count()\n    previous_migration_pk = hss.migrations.filter(type=migration_types.scenario).first().pk\n    hss.reset_scenarios()\n    hss.refresh_from_db()\n    assert_that(previous_scenario_count, is_not(hss.scenarios.all().count()))\n    assert_that(previous_migration_pk, is_not(hss.migrations.filter(type=migration_types.scenario).first().pk))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 5.0
    },
    "id": 37,
    "score": "3",
    "annotator": 1,
    "annotation_id": 187,
    "created_at": "2025-10-29T15:36:49.082086Z",
    "updated_at": "2025-10-29T15:36:49.082106Z",
    "lead_time": 25.345,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_powerswitches.py:UpdateTests.test_update_icon__valid",
    "text": "@vcr.use_cassette()\ndef test_update_icon__valid(self) -> None:\n    \"\"\"\n    Given\n        - a Hss with ClimaxKiz panel\n        - a HssDriver\n        - a climax powerswitch\n    When\n        - I update powerswitch icon\n    Then\n        - I get an updated powerswitch\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    driver = driver_factory.get_driver(hss)\n    climax_powerswitch = self.any_climax_powerswitch(hss=hss)\n    updated_climax_powerswitch = driver.power_switches.update_icon(\n        device_id=climax_powerswitch.zigbee_id, new_icon=power_switch_icons.iron\n    )\n    assert_that(updated_climax_powerswitch.icon, is_(power_switch_icons.iron))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 9.0
    },
    "id": 38,
    "score": "4",
    "annotator": 1,
    "annotation_id": 188,
    "created_at": "2025-10-29T15:37:18.218900Z",
    "updated_at": "2025-10-29T15:37:18.218923Z",
    "lead_time": 28.953,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/test_admin.py:UserAdminActionTests.test_action_deactivate_promocodes",
    "text": "def test_action_deactivate_promocodes(self) -> None:\n    promocode = self.any_promocode()\n    self.when_i_export_promocodes(action=\"deactivate_promocodes\", ids=[promocode.pk])\n    promocode.refresh_from_db()\n    assert_that(promocode.disabled, is_(True))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 39,
    "score": "4",
    "annotator": 1,
    "annotation_id": 189,
    "created_at": "2025-10-29T15:37:25.602020Z",
    "updated_at": "2025-10-29T15:37:25.602033Z",
    "lead_time": 7.222,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/zone_context/tests/test_models.py:ZoneContextModelTests.test_str",
    "text": "def test_str(self) -> None:\n    zc = self.any_zone_context()\n    assert_that(str(zc), is_(f\"{zc.slug} | {zc.name}\"))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 54,
      "docstring_strength": 0.0
    },
    "id": 40,
    "score": "3",
    "annotator": 1,
    "annotation_id": 190,
    "created_at": "2025-10-29T15:37:31.276059Z",
    "updated_at": "2025-10-29T15:37:31.276073Z",
    "lead_time": 5.517,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/templatetags/tests/test_roundup.py:RoundUpTemplateTagTests.test_rendered",
    "text": "def test_rendered(self) -> None:\n    context = Context({\"user\": self.user, \"request\": self.request})\n    rendered_template = self.TEMPLATE.render(context)\n    self.assertInHTML(\"\", rendered_template)",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 41,
    "score": "1",
    "annotator": 1,
    "annotation_id": 191,
    "created_at": "2025-10-29T15:37:41.910689Z",
    "updated_at": "2025-10-29T15:37:41.910740Z",
    "lead_time": 10.477,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_client.py:ClientTestCase.test_client_raises_unavailable_on_climax_600",
    "text": "def test_client_raises_unavailable_on_climax_600(self) -> None:\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_hm)\n    client = Client(hss)\n    with requests_mock.Mocker() as m:\n        m.get(self._mock_endpoint, status_code=600)\n        assert_that(calling(client.request).with_args(self._mock_endpoint), raises(Unavailable))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 42,
    "score": "2",
    "annotator": 1,
    "annotation_id": 192,
    "created_at": "2025-10-29T15:37:47.602520Z",
    "updated_at": "2025-10-29T15:37:47.602535Z",
    "lead_time": 5.534,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/repositories/tests/test_checkout.py:checkoutRespositoryTestCase.test_repository",
    "text": "def test_repository(self) -> None:\n    \"\"\"\n    Given 1 zone_context and 1 checkout associated with this zone_context\n    When I call the repository\n    Then I get 1 checkout\n    \"\"\"\n    zone_context = self.any_zone_context()\n    self.any_checkout(state=checkout_states.ready, zone_context=zone_context)\n\n    filtered = CheckoutRepository().get_all(zone_context)\n\n    assert_that(len(filtered), is_(1))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 43,
    "score": "5",
    "annotator": 1,
    "annotation_id": 193,
    "created_at": "2025-10-29T15:37:55.987390Z",
    "updated_at": "2025-10-29T15:37:55.987405Z",
    "lead_time": 8.239,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_item.py:CartItemModelTestCase.test_add_cart_item_subscription_product_voucher__after_same_deal",
    "text": "def test_add_cart_item_subscription_product_voucher__after_same_deal(self) -> None:\n    \"\"\"\n    Given a user with\n        - An empty cart\n        - A subscription product voucher for product P1\n    When :\n        - I add a deal with a washing program for product P1 to the cart\n        - I add a second time a deal with a washing program for product P1 to the cart\n    Then the cart have a free deal and a normal deal\n    \"\"\"\n    product_voucher = self.any_subscription_product_voucher(\n        product=self.product, product_voucher_account=self.user.product_voucher_account_set.first()\n    )\n    cart = self.any_cart(state=cart_states.empty, user=self.user)\n\n    cart.add_item(deal=self.deal)\n    cart.add_item(deal=self.deal, subscription_voucher=product_voucher)\n\n    assert_that(cart.cartitem_set.all(), has_length(2))\n    cart_item_1, cart_item_2 = cart.cartitem_set.all()\n    assert_that(\n        [cart_item_1.deal.price_after_discount, cart_item_2.deal.price_after_discount],\n        contains_inanyorder(decimal.Decimal(\"0\"), decimal.Decimal(\"10\")),\n    )\n    assert_that(\n        [cart_item_1.deal.availability, cart_item_2.deal.availability],\n        contains_inanyorder(deal_availability.in_stock, deal_availability.out_of_stock),\n    )",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 8.0
    },
    "id": 44,
    "score": "4",
    "annotator": 1,
    "annotation_id": 194,
    "created_at": "2025-10-29T15:38:23.227976Z",
    "updated_at": "2025-10-29T15:38:23.227993Z",
    "lead_time": 27.068,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_sites.py:PaymentMethodProviderTestCase.test_get_complete_checkout_adapter",
    "text": "def test_get_complete_checkout_adapter(self) -> None:\n    checkout = self.any_checkout()\n    payment = PaymentMethodProvider()\n    with self.assertRaises(NotImplementedError) as e:\n        assert_that(payment.complete_checkout(checkout), is_(e))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 45,
    "score": "3",
    "annotator": 1,
    "annotation_id": 195,
    "created_at": "2025-10-29T15:40:11.014307Z",
    "updated_at": "2025-10-29T15:40:21.722694Z",
    "lead_time": 113.419,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_models.py:ModelTests.test_promo_code__invalid_type_for_version",
    "text": "def test_promo_code__invalid_type_for_version(self) -> None:\n    \"\"\"\n    Given a v2 promocode with type cart_discount_percentage\n    When I try to set version to 1\n    Then it raise an ValidationError exception\n    \"\"\"\n    promo_code = self.any_promocode(version=2, profile=promocode_profiles.v2_cart_discount_percentage)\n    promo_code.version = 1\n    with self.assertRaises(ValidationError) as e:\n        promo_code.clean()\n    assert_that(\n        e.exception.args[0],\n        is_(\"Le type de code cart_discount_percentage n'est pas disponible pour la version 1.\"),\n    )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 46,
    "score": "5",
    "annotator": 1,
    "annotation_id": 196,
    "created_at": "2025-10-29T15:40:29.531046Z",
    "updated_at": "2025-10-29T15:40:29.531058Z",
    "lead_time": 6.693,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/policy/api/v30/tests/test_api_repository.py:PolicyListAPITests.test_list_policies_card",
    "text": "def test_list_policies_card(self) -> None:\n    \"\"\"\n    Given a policy\n    When I list policys card\n    Then PolicyRepository is called 1 time\n    \"\"\"\n    self.client = AuthenticatedClient()\n    self.any_policy()\n\n    with mock.patch(\"kleen.policy.repositories.policy.PolicyRepository.get_all\") as m:  # noqa: RMS102\n        self.when_i_list_policies_card()\n\n    assert_that(m.call_count, is_(1))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 47,
    "score": "2",
    "annotator": 1,
    "annotation_id": 197,
    "created_at": "2025-10-29T15:40:41.692018Z",
    "updated_at": "2025-10-29T15:40:41.692037Z",
    "lead_time": 12.002,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_powerswitch_driver.py:UpdateTests.test_update_status",
    "text": "@vcr.use_cassette()\ndef test_update_status(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with Honeywell panel\n        - a HssDriver\n        - a honeywell powerswitch with a status set to off\n    When:\n        - I update powerswitch's status\n    Then:\n        - I get an updated powerswitch\n    \"\"\"\n    for status in {powerswitch_status.on, powerswitch_status.off}:\n        with self.subTest(status=status):\n            hss = self.any_configured_hss(account=default_honeywell_account)\n            driver = driver_factory.get_driver(hss=hss)\n            honeywell_powerswitch = self.any_honeywell_powerswitch(hss=hss)\n            driver.power_switches.update_status(\n                device_id=str(honeywell_powerswitch.id), status=powerswitch_status.off\n            )\n            updated_honeywell_powerswitch = driver.power_switches.update_status(\n                device_id=str(honeywell_powerswitch.id), status=status\n            )\n            assert_that(updated_honeywell_powerswitch, not_none())\n            assert_that(updated_honeywell_powerswitch.status, is_(status))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 85,
      "docstring_strength": 9.0
    },
    "id": 48,
    "score": "4",
    "annotator": 1,
    "annotation_id": 198,
    "created_at": "2025-10-29T15:40:50.165009Z",
    "updated_at": "2025-10-29T15:40:50.165036Z",
    "lead_time": 8.292,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_recover.py:RecoverScenarioApiTestCase.test_recover_api__unowned",
    "text": "@vcr.use_cassette()\ndef test_recover_api__unowned(self) -> None:\n    \"\"\"\n    Given an authenticated user, a scenario in state publishing_failed\n    When I try to recover this scenario which is not mine\n    Then I get an http response with status code 404\n    \"\"\"\n    second_client = ClimaxDigitaltikiz3APIClient()\n    scenario = self.any_scenario(hss=second_client.hss)\n    scenario.source_id = [5]\n    scenario.state = states.publishing_failed\n    scenario.save()\n    last_response = self.when_i_recover_scenario(scenario.pk)\n    assert_that(last_response.status_code, is_(404))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 49,
    "score": "4",
    "annotator": 1,
    "annotation_id": 199,
    "created_at": "2025-10-29T15:41:04.327548Z",
    "updated_at": "2025-10-29T15:41:04.327570Z",
    "lead_time": 13.987,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/tests/test_models.py:CameraTests.test_str",
    "text": "def test_str(self) -> None:\n    camera = self.any_local_honeywell_camera()\n    assert_that(str(camera), is_(f\"Camera {camera.id} [name: {camera.name}]\"))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 55,
      "docstring_strength": 0.0
    },
    "id": 50,
    "score": "3",
    "annotator": 1,
    "annotation_id": 200,
    "created_at": "2025-10-29T15:41:10.474981Z",
    "updated_at": "2025-10-29T15:41:10.475000Z",
    "lead_time": 5.982,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/promotional_offers/tests/test_tasks.py:DeactivatePromotionalOfferTests.test_deactivate_promotional_offer__same_as_today",
    "text": "def test_deactivate_promotional_offer__same_as_today(self) -> None:\n    \"\"\"\n    Given any promotional offer active and validity_to date same as today date\n    When I launch deactivate_promotional_offer_on_date task\n    Then promotional offer is still active\n    \"\"\"\n    date = timezone.now().date()\n\n    promotional_offer = self.any_promotional_offer(active=True)\n    promotional_offer.validity_to = date\n    promotional_offer.save()\n\n    deactivate_promotional_offer_on_date()\n\n    promotional_offer.refresh_from_db()\n    assert_that(promotional_offer.active, is_(True))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 1,
    "score": "5",
    "annotator": 1,
    "annotation_id": 1,
    "created_at": "2025-10-27T11:02:28.164445Z",
    "updated_at": "2025-10-27T11:02:28.164455Z",
    "lead_time": 64.19,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/replication/tests/test_serializers.py:UserFramedNotificationsSettingsSerializerTests.test_serializer__site",
    "text": "def test_serializer__site(self) -> None:\n    \"\"\"\n    Given any user framed notification settings with any site\n    When I serialized it\n    Then I get valid json representation\n    \"\"\"\n    site = SiteMixin().any_site()\n    settings = self.any_user_framed_notifications_settings(site=site)\n    data = UserFramedNotificationsSettingsSerializer(instance=settings).data\n    assert_that(data[\"site\"], is_(site.myroad_uri.value))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 4.0
    },
    "id": 2,
    "score": "5",
    "annotator": 1,
    "annotation_id": 2,
    "created_at": "2025-10-27T11:03:17.519124Z",
    "updated_at": "2025-10-27T11:03:17.519136Z",
    "lead_time": 49.195,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_honeywell_calendar.py:CreateScenarioApiTestCase.test_create_scenarios__incorrect_condition_data",
    "text": "@vcr.use_cassette()\ndef test_create_scenarios__incorrect_condition_data(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario, with an action with incorrect data\n    When : I post this dict\n    Then : I get a 201 HTTP response, a dict with one scenario\n    \"\"\"\n    data = self.any_scenario_data(self.initial_scenario)\n    data[\"condition\"][\"fields\"].pop(\"weekdays\")\n    last_response = self.when_i_post_scenario(data)\n    assert_that(last_response.status_code, is_(400), last_response.content)\n    assert_that(last_response.json(), is_(not_none()))\n    assert_that(last_response.json(), has_entry(\"condition\", not_none()))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 3,
    "score": "1",
    "annotator": 1,
    "annotation_id": 3,
    "created_at": "2025-10-27T11:05:12.328387Z",
    "updated_at": "2025-10-27T11:05:12.328402Z",
    "lead_time": 114.664,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/dashboards/tests/test_models.py:GlobalDashboardTests.test_global_dashboard__model",
    "text": "def test_global_dashboard__model(self) -> None:\n    self.any_global_dashboard()",
    "metrics": {
      "line_count": 1,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 0.0
    },
    "id": 4,
    "score": "1",
    "annotator": 1,
    "annotation_id": 4,
    "created_at": "2025-10-27T11:05:25.210805Z",
    "updated_at": "2025-10-27T11:05:25.210822Z",
    "lead_time": 12.732,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/media/tests/test_s3_view.py:PrivateS3FileViewTests.test_retrieve_pdf__not_logged",
    "text": "def test_retrieve_pdf__not_logged(self) -> None:\n    self.user = self.any_user()\n    pdf_url = \"userbill/2024/11/11/MP.pdf\"\n    order = self.any_order(user=self.any_user(), status=order_states.success)\n    order.bill_user.name = pdf_url\n    order.save()\n    self.when_i_retrieve_s3_file(pdf_path=pdf_url)\n    assert_that(self.last_response.status_code, is_(403))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 5,
    "score": "3",
    "annotator": 1,
    "annotation_id": 5,
    "created_at": "2025-10-27T11:06:49.423202Z",
    "updated_at": "2025-10-27T11:06:49.423213Z",
    "lead_time": 84.064,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/payline/test_checkout.py:PaylineTotalGRPaymentMethodProviderTestCase.test_checkout__pending_to_ordered__mobilephoneless",
    "text": "def test_checkout__pending_to_ordered__mobilephoneless(self) -> None:\n    \"\"\"\n    Given a checkout in ready state for a user rci mobilephoneless\n    When i complete checkout\n    Then order has been created and is succeeded, checkout is ordered, cart is checked_out\n    \"\"\"\n    user = self.any_user(profile=user_profiles.rci, with_total_gr_card=True, with_mobile_phone_verified=False)\n    checkout = self.any_checkout(state=checkout_states.ready, payment_method=self.PAYMENT_METHOD, user=user)\n\n    order = checkout.complete()\n\n    assert_that(checkout.state, equal_to(checkout_states.ordered))\n    assert_that(checkout.cart.state, equal_to(cart_states.checked_out))\n    assert_that(order.status, equal_to(order_states.pending))\n    assert_that(checkout.order_id, not_none())",
    "metrics": {
      "line_count": 7,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 6,
    "score": "5",
    "annotator": 1,
    "annotation_id": 6,
    "created_at": "2025-10-27T11:07:46.226378Z",
    "updated_at": "2025-10-27T11:07:46.226387Z",
    "lead_time": 56.659,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v60/tests/test_api_securemoderedirecturl.py:SecureModeRedirecUrlOrderAPITestCase.test_retrieve",
    "text": "def test_retrieve(self) -> None:\n    \"\"\"\n    Given an order\n    When I retrieve it\n    Then 200 OK\n    \"\"\"\n    self.client = AuthenticatedClient(mangopay_card=mangopay_cards.normal)\n    order = self.any_order(user=self.client.user, payment_method=payment_methods.mangopay, api_version=API_VERSION)\n    self.when_i_retrieve_order_securemoderedirecurl(transaction_id=order.transaction.mangopay_id)\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 67,
      "docstring_strength": 4.0
    },
    "id": 7,
    "score": "5",
    "annotator": 1,
    "annotation_id": 7,
    "created_at": "2025-10-27T11:07:57.978804Z",
    "updated_at": "2025-10-27T11:07:57.978813Z",
    "lead_time": 11.617,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_toast_messages.py:ToastMessagesTests.test_save_and_quit_initial__message",
    "text": "def test_save_and_quit_initial__message(self) -> None:\n    \"\"\"\n    Given any request in initial state\n    When I save and quit the form\n    Then :\n        - toast message is \"Brouillon enregistré\"\n        - toast message tag is \"info\"\n    \"\"\"\n    self.client = AuthenticatedClient()\n    request = self.any_request(state=request_states.initial, creator=self.client.user)\n    page = RequestActionPage.get(\n        client=self.client, site_slug=request.site.slug, pk=request.pk\n    ).form.save_and_quit()\n    request.refresh_from_db()\n    assert_that(request.state, is_(request_states.draft))\n    toast_messages = [m for m in messages.get_messages(page.initial_response.wsgi_request)][0]\n    assert_that(toast_messages.message, is_(\"Brouillon enregistré\"))\n    assert_that(toast_messages.tags, is_(\"default\"))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 8,
    "score": "5",
    "annotator": 1,
    "annotation_id": 8,
    "created_at": "2025-10-27T11:08:44.433664Z",
    "updated_at": "2025-10-27T11:08:44.433680Z",
    "lead_time": 46.314,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_promotional_offer.py:CartPromotionalOfferDiscountedTestCase.test_promotional_offer_discounted_multiple_remove_discounted",
    "text": "def test_promotional_offer_discounted_multiple_remove_discounted(self) -> None:\n    \"\"\"\n    Given a cart with promotional offer for a discounted item having two items\n    When I remove a discounted item\n    Then\n        One discounted item is left\n        Two required items are left\n    \"\"\"\n    cart = self.any_cart()\n    promotional_offer = self.promotional_offer_discounted\n    station = self.station\n    required_deal, discounted_deals = promotional_offer.get_deals_for_station(station)\n    discounted_deal = discounted_deals[0]\n    required_deal = required_deal[0]\n    self.add_item(cart, required_deal, quantity=2)\n    self.add_item(cart, discounted_deal, quantity=2)\n\n    cart_item_discounted = cart.cartitem_set.filter(deal=discounted_deal).first()\n    assert_that(cart_item_discounted, is_not(None))\n    self.remove_item(cart, cart_item_discounted)\n    assert_that(cart.cartitem_set.count(), is_(2))\n\n    cart_item_1 = cart.cartitem_set.filter(deal=required_deal).first()\n    assert_that(cart_item_1, is_not(None))\n    assert_that(cart_item_1.quantity, is_(2))\n    cart_item_2 = cart.cartitem_set.filter(deal=discounted_deal).first()\n    assert_that(cart_item_2, is_not(None))\n    assert_that(cart_item_2.quantity, is_(1))\n\n    assert_that(\n        cart.meta,\n        has_entries(\n            {\n                \"promotional_offers\": has_entries(\n                    {\n                        \"used_cart_items\": contains(\n                            has_entries(\n                                {\"id\": str(cart_item_1.id), \"quantity\": 1, \"offer_id\": str(promotional_offer.uuid)}\n                            )\n                        ),\n                        \"offered_cart_items\": contains(\n                            has_entries({\"id\": str(cart_item_2.id), \"offer_id\": str(promotional_offer.uuid)})\n                        ),\n                    }\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 19,
      "assertion_count": 7,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 6.0
    },
    "id": 9,
    "score": "2",
    "annotator": 1,
    "annotation_id": 9,
    "created_at": "2025-10-27T11:12:18.060844Z",
    "updated_at": "2025-10-27T11:12:18.060861Z",
    "lead_time": 213.471,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:ScenarioTypeUniverseApi40Tests.test_list_scenario_type_universe__no_matching_scenario_type_universe",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_type_universe__no_matching_scenario_type_universe(self) -> None:\n    \"\"\"\n    Given : 4 scenarios type universe with target == 'pad_web'\n    When : I list scenario type unive\n    Then : Http response is 200, response contain 0 Scenario Type universe with target == 'pad_mobile'\n    \"\"\"\n    ScenarioTypeUniverse.objects.filter(target=targets.pad_mobile).delete()\n    last_response = self.when_i_list_scenario_type_universe()\n    assert_that(last_response.status_code, is_(200))\n    assert_that(last_response.json(), has_length(0))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 10,
    "score": "4",
    "annotator": 1,
    "annotation_id": 10,
    "created_at": "2025-10-27T11:12:30.121622Z",
    "updated_at": "2025-10-27T11:12:30.121631Z",
    "lead_time": 11.918,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/tests/test_models.py:CameraTests.test_str",
    "text": "def test_str(self) -> None:\n    camera = self.any_local_essentielle_camera()\n    assert_that(str(camera), is_(f\"Camera {camera.id} [name: {camera.name}]\"))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 55,
      "docstring_strength": 0.0
    },
    "id": 11,
    "score": "3",
    "annotator": 1,
    "annotation_id": 11,
    "created_at": "2025-10-27T11:12:37.939031Z",
    "updated_at": "2025-10-27T11:12:37.939042Z",
    "lead_time": 7.676,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/request_update_steps/test_pu_form.py:PUFormTests.test_form_errors__actions__packing_missing",
    "text": "def test_form_errors__actions__packing_missing(self) -> None:\n    request = self.any_request(type=request_types.quoted, state=request_states.draft, ready_to_submit=True)\n    pu = request.packaging_units.get()\n    pu.packing = \"\"\n    pu.save()\n    data, _ = self.any_packaging_unit_form_data(\n        packaging_units=request.packaging_units.all(), prefix=\"packaging_units\"\n    )\n    for action in [\"save\", \"add_um\", \"add_step\", \"validate\", \"submit\"]:\n        with self.subTest(action=action):\n            formset = make_pu_formset_class(instance=request, user=request.creator, action=action)(\n                instance=request, data=data\n            )\n\n            assert_that(formset.is_valid(), is_(False))\n            assert_that(formset.errors, contains_exactly(has_entry(\"packing\", not_(empty()))))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 12,
    "score": "3",
    "annotator": 1,
    "annotation_id": 12,
    "created_at": "2025-10-27T11:14:01.488066Z",
    "updated_at": "2025-10-27T11:14:01.488075Z",
    "lead_time": 83.411,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/subscriptions/api/v10/tests/test_api_user_subscription.py:UserSubscriptionsApiTestCase.test_end__not_found",
    "text": "def test_end__not_found(self) -> None:\n    \"\"\"\n    Given\n        no user subscription\n    When i end subscription type\n    Then it returns 404\n    \"\"\"\n    user = self.any_user(with_mp_user=True, mangopay_card=\"secure\")\n    self.client = AuthenticatedClient(user)\n    self.any_user_subscription(user_=user, state=UserSubscriptionState.ENDED)\n    self.when_i_end_user_subscription(slug=UserSubscriptionEndSlugReason.NOT_SATISFIED.value, details=\"\")\n    assert_that(self.last_response, http(404))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 5.0
    },
    "id": 13,
    "score": "5",
    "annotator": 1,
    "annotation_id": 13,
    "created_at": "2025-10-27T11:14:19.271536Z",
    "updated_at": "2025-10-27T11:14:19.271545Z",
    "lead_time": 17.62,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_models.py:GlobalPromoCodeTestCase.test_global_promo_code_passed_expired_with_listed_value",
    "text": "def test_global_promo_code_passed_expired_with_listed_value(self) -> None:\n    user = self.any_user()\n    promocode = self.any_promo_code_passed_expired(user, is_listed=True)\n\n    self.when_i_fetch_specific_promo_codes_for_user(user, promocode.code)\n    self.then_there_are_n_promocodes(0)\n    self.when_i_fetch_listed_promo_codes_for_user(user)\n    self.then_there_are_n_promocodes(0)",
    "metrics": {
      "line_count": 6,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 16,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 14,
    "score": "2",
    "annotator": 1,
    "annotation_id": 14,
    "created_at": "2025-10-27T11:14:48.093947Z",
    "updated_at": "2025-10-27T11:14:48.093962Z",
    "lead_time": 28.683,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/promocodes/test_api_promocode.py:PromocodeSearchAPITestCase.test_list_anonymous",
    "text": "def test_list_anonymous(self) -> None:\n    self.client = AnonymousClient()\n    promocode = self.any_promocode()\n    cart = self.any_cart(state=cart_states.active, api_version=API_VERSION)\n    self.when_i_search_promocode(cart=cart, code=promocode.code)\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 15,
    "score": "3",
    "annotator": 1,
    "annotation_id": 15,
    "created_at": "2025-10-27T11:14:55.350824Z",
    "updated_at": "2025-10-27T11:14:55.350835Z",
    "lead_time": 7.118,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/charters/replication/tests/test_serializer.py:CharterSerializerTests.test_serializer",
    "text": "def test_serializer(self) -> None:\n    \"\"\"\n    Given any charter with users and sites\n    When I serialized it\n    Then I get valid json representation\n    \"\"\"\n    charter = self.any_charter(with_users=True)\n    assert charter.sites.count() != 0\n    data = CharterSerializer(instance=charter).data\n    users_matcher = [user.myroad_uri.value for user in charter.users.all()]\n    sites_matcher = [site.myroad_uri.value for site in charter.sites.all()]\n    assert_that(\n        data,\n        has_entries(\n            {\n                \"name\": is_(charter.name),\n                \"code\": is_(charter.code),\n                \"slug\": is_(charter.slug),\n                \"active\": is_(charter.active),\n                \"users\": contains_inanyorder(*users_matcher),\n                \"sites\": contains_inanyorder(*sites_matcher),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 4.0
    },
    "id": 16,
    "score": "5",
    "annotator": 1,
    "annotation_id": 16,
    "created_at": "2025-10-27T11:15:30.991247Z",
    "updated_at": "2025-10-27T11:15:30.991259Z",
    "lead_time": 35.508,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_coders_climax.py:DriverClimaxScenarioCodecTestCase.test_decode",
    "text": "@vcr.use_cassette()\ndef test_decode(self) -> None:\n    \"\"\"\n    Given\n        a panel scenario with valid condition / action\n    When I decode\n    Then ScenarioInfo has valid condition / action\n    \"\"\"\n    contract = ContractMixin().any_climax_contract()\n    hss = HssMixin().any_hss(user=contract.user, contract=contract, remote_proxy=remote_proxies.climax_kiz)\n    driver_scenario = self.any_driver_scenario(\n        scenario_driver=hss.driver.scenarios, condition=\"a1.mode==1\", action=\"a=1&z=6&sw=off\"\n    )\n    coder = self.any_driver_codec(driver=hss.driver)\n    info, targets = coder.decode(scenario=driver_scenario)\n    assert_that(info, not_none())\n    assert_that(info.condition, not_none())\n    assert_that(info.condition, instance_of(PanelStatusConditionClimax))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 5.0
    },
    "id": 17,
    "score": "4",
    "annotator": 1,
    "annotation_id": 17,
    "created_at": "2025-10-27T11:16:00.278383Z",
    "updated_at": "2025-10-27T11:16:00.278403Z",
    "lead_time": 29.136,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_iwp_68.py:Issue68Tests.test_is_specific__depth",
    "text": "def test_is_specific__depth(self) -> None:\n    \"\"\"\n    Given a request without pu\n    When i save form with specific height (> 13,5m)\n    Then request is specific load_type\n    \"\"\"\n    request = self.any_request(state=request_states.draft, ready_to_submit=False)\n    data, files = self.any_packaging_unit_form_data(\n        packaging_units=request.packaging_units.all(), with_extra=True, prefix=\"packaging_units\"\n    )\n    data[\"packaging_units-0-size_0\"] = \"13501\"\n    formset = make_pu_formset_class(instance=request, user=request.creator)(\n        instance=request, data=data, files=files\n    )\n    assert formset.is_valid()\n    formset.save()\n\n    request.refresh_from_db()\n    assert_that(request.load_type, is_(load_types.specific))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 18,
    "score": "5",
    "annotator": 1,
    "annotation_id": 18,
    "created_at": "2025-10-27T11:16:27.214977Z",
    "updated_at": "2025-10-27T11:16:27.214986Z",
    "lead_time": 26.778,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/issues/tests/test_models.py:IssueModelTestCase.test_full_clean_issue__partial_refunc_both_0",
    "text": "def test_full_clean_issue__partial_refunc_both_0(self) -> None:\n    user = self.any_user(mangopay_card=mangopay_cards.normal)\n    order = self.any_order(\n        refundable=True,\n        user=user,\n        with_full_prepaid_account=True,\n        payment_method=payment_methods.prepaid_account_mangopay,\n    )\n    order.sold_price = 4\n    order.prepaid_account_used_incl_vat = 3\n\n    issue = self.any_issue(order=order, state=states.waiting_for_action)\n    with self.assertRaises(ValidationError) as e:\n        issue.refund(partial_refund_price_incl_tax=0, partial_refund_prepaid_price_incl_tax=0)\n    assert_that(e.exception.message_dict, has_key(\"partial_refund_prepaid_price_excl_tax\"))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 19,
    "score": "3",
    "annotator": 1,
    "annotation_id": 19,
    "created_at": "2025-10-27T11:17:10.731953Z",
    "updated_at": "2025-10-27T11:17:10.731963Z",
    "lead_time": 43.354,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/accounts/tests/test_models.py:TestModelsUser.test_get_accessible_contracts",
    "text": "def test_get_accessible_contracts(self) -> None:\n    \"\"\"\n    Given a user with his own contract and a delegation\n    When i get all accessible contracts\n    Then I get 2 contracts\n    \"\"\"\n    user = self.any_user()\n\n    self.any_contract(user=user)\n    honeywell_contract = self.any_honeywell_contract()\n\n    self.any_delegation(contract=honeywell_contract, user=user, enabled=True)\n\n    contracts = user.contracts_accessible_by_user\n    assert_that(len(contracts), is_(equal_to(2)))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 20,
    "score": "5",
    "annotator": 1,
    "annotation_id": 20,
    "created_at": "2025-10-27T11:17:45.830196Z",
    "updated_at": "2025-10-27T11:17:45.830213Z",
    "lead_time": 34.949,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_recover_scenario.py:RecoverScenarioApiTestCase.test_recover_master_scenario",
    "text": "@vcr.use_cassette()\ndef test_recover_master_scenario(self) -> None:\n    \"\"\"\n    Given a master scenario\n    When I recover the scenario\n    Then I get a 20O HTTP response\n    \"\"\"\n    panel_scenario = self.any_scenario(hss=self.client.hss, state=states.publishing)\n    maia_scenario = self.any_maia_scenario(with_device=True)\n    master_scenario = self.any_master_scenario(\n        hss=self.client.hss, panel_scenario=panel_scenario, maia_scenario=maia_scenario\n    )\n    self.when_i_recover_scenario(hss_pk=self.client.hss.pk, scenario_pk=master_scenario.pk)\n    assert_that(self.last_response.status_code, is_(200))\n    assert_that(self.last_response.json(), is_(scenario_pmf_data()))\n    assert_that(self.last_response.json()[\"fields\"][\"state\"], is_(states.published))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 4.0
    },
    "id": 21,
    "score": "4",
    "annotator": 1,
    "annotation_id": 21,
    "created_at": "2025-10-27T11:17:55.931450Z",
    "updated_at": "2025-10-27T11:17:55.931462Z",
    "lead_time": 9.949,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter_shipping_markup_framed",
    "text": "def test_request_formatter_shipping_markup_framed(self) -> None:\n    \"\"\"\n    Given a request\n    When I use RequestFormatter with 'shipping_markup' field to export\n    Then it return a dict that contain request shipping_markup\n    \"\"\"\n    site = self.any_site(with_markup=True)\n    request = self.any_framed_request(site=site)\n    request_csv = RequestFormatter().to_csv(request, fields=[\"shipping_markup\"])\n    assert_that(request_csv[0], is_(empty()))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 22,
    "score": "1",
    "annotator": 1,
    "annotation_id": 22,
    "created_at": "2025-10-27T11:23:54.170573Z",
    "updated_at": "2025-10-27T11:23:54.170591Z",
    "lead_time": 358.023,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_load_type.py:ComputeLoadTypeTests.test_is_specific__height",
    "text": "def test_is_specific__height(self) -> None:\n    request = self.any_request(state=request_states.draft, ready_to_submit=False)\n    pu = self.any_packaging_unit(request=request)\n    pu.size = \"1x1x401\"\n\n    assert_that(pu.is_specific, is_(True))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 23,
    "score": "3",
    "annotator": 1,
    "annotation_id": 23,
    "created_at": "2025-10-27T11:24:13.704234Z",
    "updated_at": "2025-10-27T11:24:13.704247Z",
    "lead_time": 19.345,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/services/tests/test_scenario_model.py:EssentielleScenarioModelTestCase.test_factory_create_scenarios_service",
    "text": "@vcr.use_cassette()\ndef test_factory_create_scenarios_service(self) -> None:\n    \"\"\"\n    Given a driver of type essentielle, a scenario for this driver\n    When I ask the factory to create a service scenario for my panel\n    Then I get an instance of EssentielleScenario\n    \"\"\"\n    hss = HssMixin().any_configured_hss(account=default_essentielle_account)\n    scenario = self.any_scenario(hss=hss)\n    service_scenarios = factory_create_scenarios_service(\n        hss.driver.scenarios,\n        [\n            scenario.pk,\n        ],\n        \"Dummy Scenario\",\n        scenario.info.condition,\n        scenario.info.actions[0],\n    )\n    assert_that(service_scenarios[0], instance_of(EssentielleScenario), type(service_scenarios[0]))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 24,
    "score": "4",
    "annotator": 1,
    "annotation_id": 24,
    "created_at": "2025-10-27T11:26:10.108621Z",
    "updated_at": "2025-10-27T11:26:10.108630Z",
    "lead_time": 116.245,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:CreateBlindActionFormTestCase.test_create_form_valid_blind",
    "text": "def test_create_form_valid_blind(self) -> None:\n    data = {\n        \"area\": \"1\",\n        \"zone\": \"2\",\n        \"status\": \"opened\",\n    }\n\n    form = CreateBlindActionForm(data=data)\n    is_valid = form.is_valid()\n\n    self.assertTrue(is_valid)\n    self.assertEqual(form.to_grammar(), \"a=1&z=2&sw=on\")",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 25,
    "score": "3",
    "annotator": 1,
    "annotation_id": 25,
    "created_at": "2025-10-27T11:26:18.587060Z",
    "updated_at": "2025-10-27T11:26:18.587072Z",
    "lead_time": 8.336,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/request_update_steps/test_pu_form.py:PUFormTests.test_form_errors__tms_transmission__packing_missing",
    "text": "def test_form_errors__tms_transmission__packing_missing(self) -> None:\n    request = self.any_request(\n        type=request_types.quoted, state=request_states.tms_transmission, ready_to_submit=True\n    )\n    pu = request.packaging_units.get()\n    pu.packing = \"\"\n    pu.save()\n    data, _ = self.any_packaging_unit_form_data(\n        packaging_units=request.packaging_units.all(), prefix=\"packaging_units\"\n    )\n    formset = make_pu_formset_class(instance=request, user=request.creator)(instance=request, data=data)\n\n    assert_that(formset.is_valid(), is_(False))\n    assert_that(formset.errors, contains_exactly(has_entry(\"packing\", not_(empty()))))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 26,
    "score": "3",
    "annotator": 1,
    "annotation_id": 26,
    "created_at": "2025-10-27T11:26:36.925523Z",
    "updated_at": "2025-10-27T11:26:36.925535Z",
    "lead_time": 18.196,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v71/tests/deliveries/test_api_list.py:ListDeliveryArchivedAPITestCase.test_list__paginated",
    "text": "def test_list__paginated(self) -> None:\n    \"\"\"\n    Given 25 archived deliveries\n    When I list\n    Then :\n        - 200 OK\n        - the results is correctly paginated\n    \"\"\"\n    self.client = AuthenticatedClient()\n\n    for _ in range(25):\n        order = self.any_order(user=self.client.user, api_version=API_VERSION)\n        self.any_delivery(\n            order=order,\n            api_version=API_VERSION,\n            rating_level=delivery_rating_level.high,\n        )\n\n    self.when_i_list_deliveries_archived()\n\n    assert_that(len(self.last_response.json()[\"results\"]), is_(20))\n    assert_that(self.last_response.json()[\"previous\"], is_(none()))\n    assert_that(self.last_response.json()[\"next\"], is_not(none()))\n    assert_that(self.last_response, http(200))\n\n    response = self.client.get(self.last_response.json()[\"next\"])\n\n    assert_that(len(response.json()[\"results\"]), is_(5))\n    assert_that(response.json()[\"previous\"], is_not(none()))\n    assert_that(response.json()[\"next\"], is_(none()))\n    assert_that(response, http(200))",
    "metrics": {
      "line_count": 14,
      "assertion_count": 8,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 6.0
    },
    "id": 27,
    "score": "4",
    "annotator": 1,
    "annotation_id": 27,
    "created_at": "2025-10-27T11:27:20.141259Z",
    "updated_at": "2025-10-27T11:27:20.141273Z",
    "lead_time": 43.06,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderItemCreditsPackPrices.test_first_credit_pack__increased_bonus__prices__fail",
    "text": "def test_first_credit_pack__increased_bonus__prices__fail(self) -> None:\n    \"\"\"\n    Given any first_credit_pack promocode and increased bonus\n    When I use it\n    Then orderitem has:\n        - price_before_discount not equal to corrected_price_before_discount\n    \"\"\"\n    credits_pack = self.any_credits_pack(credits=100)\n    self.any_credits_pack_scheduler(\n        credits_pack=credits_pack, schedule_credits=150, state=cp_scheduler_states.in_progress\n    )\n\n    promocode = self.any_promocode(profile=promocode_profiles.v2_first_credits_pack_purchase, version=2)\n    product = self.any_product_lazy()\n    PromoCodeCreditsPackProduct.objects.create(credits_pack=credits_pack, product=product)\n\n    deal = self.any_deal(\n        profile=deal_profiles.credits_pack,\n        credits_pack=credits_pack,\n        price_after_discount=decimal.Decimal(\"10\"),\n        price_before_discount=decimal.Decimal(\"15\"),\n    )\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n    cart.update(promocode=promocode)\n\n    checkout = self.any_checkout(\n        cart=cart,\n        payment_method=payment_methods.mangopay,\n        state=checkout_states.ready,\n        with_ip_address=True,\n        with_browser_info=True,\n    )\n    order = Order.objects.create_with_checkout(checkout)\n    order.change_to_failed()\n    assert order.status == order_states.failed\n    assert_that(order.promocode_type, is_(\"first_credits_pack_purchase\"))\n    assert_that(order.offer_type, is_(\"increased_bonus\"))\n\n    orderitem = order.orderitem_set.get()\n    assert_that(orderitem.price_before_discount, not_(orderitem.corrected_price_before_discount))",
    "metrics": {
      "line_count": 18,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 5.0
    },
    "id": 28,
    "score": "4",
    "annotator": 1,
    "annotation_id": 28,
    "created_at": "2025-10-27T11:28:58.750597Z",
    "updated_at": "2025-10-27T11:28:58.750609Z",
    "lead_time": 98.456,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_iwp_423.py:RequestInfosFormTests.test_shipping_type__single_value",
    "text": "def test_shipping_type__single_value(self) -> None:\n    \"\"\"\n    Given\n        request_infos form data\n        global conf with one value\n    When I validate\n    Then request_infos is valid, field is hidden\n    \"\"\"\n    conf = GlobalConfiguration.objects.get(definition__name=\"request.shipping_type\")\n    self.any_global_value(conf)\n    request = self.any_request(state=\"draft\")\n    request_infos_data = self.any_request_infos_form_data(request=request)\n    request_infos_form = make_request_informations_form(\n        instance=request, read_only=False, action=form_actions.submit\n    )(instance=request, data=request_infos_data)\n    request_infos_form.is_valid()\n    assert_that(request_infos_form.fields[\"shipping_type\"].required, is_(False))\n    assert_that(request_infos_form.fields[\"shipping_type\"].widget, is_(Select))\n    assert_that(request_infos_form.is_valid(), is_(True))\n    assert_that(request_infos_form.cleaned_data[\"shipping_type\"], empty())",
    "metrics": {
      "line_count": 10,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 6.0
    },
    "id": 29,
    "score": "4",
    "annotator": 1,
    "annotation_id": 29,
    "created_at": "2025-10-27T11:30:44.431089Z",
    "updated_at": "2025-10-27T11:30:44.431105Z",
    "lead_time": 81.793,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/promotional_offers/tests/test_update.py:PromotionalOfferUpdateTestCase.test_update_on_save",
    "text": "def test_update_on_save(self) -> None:\n    offer = self.any_promotional_offer()\n\n    with mock.patch(  # noqa: RMS102\n        \"kleen.promotional_offers.update_handler\" \".PromotionalOfferUpdateHandler._run_update_tasks\"\n    ) as m:\n        offer.save()\n\n    m.assert_called_once()",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 30,
    "score": "1",
    "annotator": 1,
    "annotation_id": 30,
    "created_at": "2025-10-27T11:30:51.183916Z",
    "updated_at": "2025-10-27T11:30:51.183925Z",
    "lead_time": 6.609,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/bus/tests/test_user_adapter.py:UserAdapterTests.test_user_adapter__with_club_card",
    "text": "def test_user_adapter__with_club_card(self) -> None:\n    user = self.any_user()\n    self.any_club_card(user=user)\n    user.refresh_from_db()\n    adapter = UserAdapter()\n    key = adapter.key(user)\n    topic = adapter.topic(user)\n    payload = adapter.as_data(user)\n    data = payload[\"data\"]\n    assert_that(key, is_(str(user.user_id)))\n    assert_that(topic, is_(\"resource.kleen.user\"))\n    assert_that(payload[\"uri\"], user.uri)\n    assert_that(data[\"is_club_owner\"], is_(True))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 4,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 31,
    "score": "3",
    "annotator": 1,
    "annotation_id": 31,
    "created_at": "2025-10-27T11:31:19.042901Z",
    "updated_at": "2025-10-27T11:31:19.042917Z",
    "lead_time": 27.71,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v60/tests/cart_items/test_twsup_198.py:IssueTWSUP198Tests.test_issue_is_fixed",
    "text": "def test_issue_is_fixed(self) -> None:\n    self.client = AuthenticatedClient()\n    cart = self.any_cart(user=self.client.user, state=cart_states.active, api_version=API_VERSION)\n    cart.start_checkout(payment_method=\"mangopay\")\n    self.when_i_delete_cart_item(cart_id=cart.id, cart_item_id=cart.cartitem_set.first().id)\n    assert_that(self.last_response, http(400))\n    assert_that(self.last_response.json(), has_entry(\"__all__\", not_none()))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 32,
    "score": "3",
    "annotator": 1,
    "annotation_id": 32,
    "created_at": "2025-10-27T11:31:30.562995Z",
    "updated_at": "2025-10-27T11:31:30.563004Z",
    "lead_time": 11.385,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/rms_mangopay/tests/test_recurrent_transaction.py:MangopayAPIErrorTests.test_mit_payerror",
    "text": "def test_mit_payerror(self) -> None:\n    \"\"\"\n    Given : ANy user with mp account and card secure but wrong secure mode return url\n    When : I subscribe and i realize first payment\n    Then : Registration is created but first payment invalid (exception raised)\n    \"\"\"\n    user = self.any_user(with_mp_user=True, mangopay_card=mangopay_cards.secure)\n    su = self.any_user_subscription(state=UserSubscriptionState.NEED_MIT_PAYMENT, user_=user)\n    registration = su.mangopay_registration\n    assert_that(registration.mangopay_recurring_payin_registration_id, not_none())\n    with override_settings(SECURE_MODE_RETURN_URL=\"bbbb\"):\n        with self.assertRaises(Exception):\n            su.start_mit_payment()",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 4.0
    },
    "id": 33,
    "score": "5",
    "annotator": 1,
    "annotation_id": 33,
    "created_at": "2025-10-27T11:32:34.203522Z",
    "updated_at": "2025-10-27T11:32:34.203540Z",
    "lead_time": 63.488,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/www/tests/test_registration.py:RegistrationHtmxTests.test_submit_refresh__valid",
    "text": "def test_submit_refresh__valid(self) -> None:\n    delegation = self.any_delegation(enabled=True)\n    email = f\"test-{str(uuid4())}@test.com\"\n    password = \"Az1!erty\"\n    page = RegistrationPage.get(client=Client(), token=delegation.token).htmx_form.refresh_submit(\n        data={\"email\": email, \"password\": password}\n    )\n    assert_that(page.form.is_submit_enabled, is_(True))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 34,
    "score": "3",
    "annotator": 1,
    "annotation_id": 34,
    "created_at": "2025-10-27T11:32:40.826264Z",
    "updated_at": "2025-10-27T11:32:40.826282Z",
    "lead_time": 6.483,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_update_scenario_climax.py:UpdateScenarioApiTestCase.test_update_scenarios__incorrect_scenario_pk",
    "text": "@vcr.use_cassette()\ndef test_update_scenarios__incorrect_scenario_pk(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario with new data\n    When : I put this dict to an url containing a scenario_pk wich not exist\n    Then : I get a 404 HTTP response\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss)\n    data = self.any_scenario_data(scenario)\n    last_response = self.when_i_update_scenario(data, scenario_pk=1234)\n    assert_that(last_response.status_code, is_(404), last_response.content)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 35,
    "score": "4",
    "annotator": 1,
    "annotation_id": 35,
    "created_at": "2025-10-27T11:32:46.944762Z",
    "updated_at": "2025-10-27T11:32:46.944775Z",
    "lead_time": 5.981,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderItemWashingPrices.test_product_discount__corrected_prices__discount_limit",
    "text": "def test_product_discount__corrected_prices__discount_limit(self) -> None:\n    \"\"\"\n    Given any order with product voucher\n    Then promocode_type is product_discount\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    product = self.any_product()\n    promocode = self.any_promocode(profile=promocode_profiles.v2_cart_discount_percentage, version=2)\n    promocode.discount_percentage = 90\n    promocode.rules.append(promo_code_rules.valid_for_a_certain_ammount)\n    promocode.rules.append(promo_code_rules.valid_for_any_product_purchase)\n    promocode.products.add(product)\n    promocode.discount_limit = 2\n    promocode.save()\n    promocode.products.add(product)\n\n    deal = self.any_deal(\n        washing_program=self.any_washing_program(product=product),\n        price_before_discount=decimal.Decimal(5),\n        price_after_discount=decimal.Decimal(5),\n    )\n\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n    cart.update(promocode=promocode)\n\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n    orderitem = order.orderitem_set.get()\n    assert_that(orderitem.corrected_price_after_discount, is_(3))\n    assert_that(orderitem.price_after_discount, not_(orderitem.corrected_price_after_discount))\n    assert_that(orderitem.price_before_discount, is_(orderitem.corrected_price_before_discount))\n    assert_that(order.discount, is_(2))",
    "metrics": {
      "line_count": 21,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 9,
      "dc_coherence_codet5": 69,
      "docstring_strength": 3.0
    },
    "id": 36,
    "score": "2",
    "annotator": 1,
    "annotation_id": 36,
    "created_at": "2025-10-27T11:35:11.248019Z",
    "updated_at": "2025-10-27T11:38:17.467164Z",
    "lead_time": 162.57399999999998,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderPromocodeTypeTests.test_offered_credits_pack",
    "text": "def test_offered_credits_pack(self) -> None:\n    \"\"\"\n    Given any promocode from promotional campaign\n    When I use it\n    Then order has promocode_type = offered_credits_pack\n    \"\"\"\n\n    credits_pack = self.any_credits_pack(credits=100)\n    self.any_credits_pack_scheduler(\n        credits_pack=credits_pack, schedule_credits=150, state=cp_scheduler_states.in_progress\n    )\n\n    promocode = self._any_promo_code_v2_offered_credits_pack(credits_pack=credits_pack)\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.update(promocode=promocode)\n\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n    assert_that(order.promocode_type, is_(\"offered_credits_pack\"))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 37,
    "score": "5",
    "annotator": 1,
    "annotation_id": 37,
    "created_at": "2025-10-27T11:35:50.143486Z",
    "updated_at": "2025-10-27T11:35:50.143500Z",
    "lead_time": 38.734,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_hss_api.py:HSSMigrationClimaxApiTests.test_add_needed_migration__already_present",
    "text": "@vcr.use_cassette()\ndef test_add_needed_migration__already_present(self) -> None:\n    hss = self.client.hss\n    self.any_migration(hss=hss, type=migration_types.bec4)\n\n    self.when_i_add_needed_migration(hss=hss, migration_type=migration_types.bec4)\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_200_OK))\n    assert_that(migration_types.bec4, is_in(hss.required_migrations))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 38,
    "score": "4",
    "annotator": 1,
    "annotation_id": 38,
    "created_at": "2025-10-27T11:35:56.074406Z",
    "updated_at": "2025-10-27T11:35:56.074418Z",
    "lead_time": 5.771,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:UpdateScenarioApiTestCase.test_update_scenarios__incorrect_scenario_type_pk",
    "text": "@vcr.use_cassette()\ndef test_update_scenarios__incorrect_scenario_type_pk(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario with a scenario_type_pk wich not exist\n    When : I put this dict\n    Then : I get a 404 HTTP response\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss)\n    data = self.any_scenario_data(scenario, scenario_type_pk=1234)\n    last_response = self.when_i_update_scenario(data, scenario.pk)\n    assert_that(last_response.status_code, is_(404), last_response.content)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 39,
    "score": "4",
    "annotator": 1,
    "annotation_id": 39,
    "created_at": "2025-10-27T11:36:03.541955Z",
    "updated_at": "2025-10-27T11:36:03.541969Z",
    "lead_time": 7.319,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_thermometers.py:ListTests.test_list__invalid_response_json",
    "text": "@vcr.use_cassette()\ndef test_list__invalid_response_json(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with an Essentielle panel\n        - a HssDriver\n    When:\n        - I list thermometers with an invalid json response\n    Then:\n        - I get a BadResponse exception\n    \"\"\"\n    hss = self.any_configured_hss(account=papillon_essentielle_account)\n    driver = driver_factory.get_driver(hss)\n\n    def invalid_json():\n        return {}\n\n    with mock.patch(\"requests.Response.json\", side_effect=invalid_json):  # noqa: RMS102\n        with self.assertRaises(BadResponse):\n            driver.thermometers.list()",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 84,
      "docstring_strength": 8.0
    },
    "id": 40,
    "score": "1",
    "annotator": 1,
    "annotation_id": 40,
    "created_at": "2025-10-27T11:36:14.061659Z",
    "updated_at": "2025-10-27T11:36:14.061673Z",
    "lead_time": 6.386,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_serializers.py:CreateUpdateScenarioSerializerTestCase.test_serialize_scenario__invalid_action_data",
    "text": "@vcr.use_cassette()\ndef test_serialize_scenario__invalid_action_data(self) -> None:\n    \"\"\"\n    Given : Scenario invalid data\n    When : I serialize this data\n    Then : I get a validation error\n    \"\"\"\n    hss = self.client.hss\n    driver = hss.driver\n    json_data = load(\"update_scenario_invalid_action_data.json\")\n    serializer = CreateUpdateScenarioSerializer(data=json_data, context={\"hss\": hss, \"driver\": driver.scenarios})\n\n    assert_that(calling(serializer.is_valid).with_args(raise_exception=True), raises(serializers.ValidationError))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 41,
    "score": "4",
    "annotator": 1,
    "annotation_id": 41,
    "created_at": "2025-10-27T11:36:32.725720Z",
    "updated_at": "2025-10-27T11:36:32.725734Z",
    "lead_time": 18.52,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/replication/tests/test_replication.py:UserQuotedNotificationsSettingsReplicationTests.test_replication__on_creation",
    "text": "def test_replication__on_creation(self) -> None:\n    \"\"\"\n    When I create user quoted notifications settings\n    Then resource kafka message is send\n    \"\"\"\n    with assert_signal_called(obj_published, matcher=greater_than_or_equal_to(1)):\n        self.any_user_quoted_notifications_settings()",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 3.0
    },
    "id": 42,
    "score": "5",
    "annotator": 1,
    "annotation_id": 42,
    "created_at": "2025-10-27T11:36:59.617429Z",
    "updated_at": "2025-10-27T11:36:59.617441Z",
    "lead_time": 21.657,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_admin.py:GlobalFramedNotificationsSettingsAdmin.test_admin_list",
    "text": "def test_admin_list(self) -> None:\n    response = self.client.get(reverse(\"admin:www_globalframednotificationssettings_changelist\"))\n    assert_that(response.status_code, is_(200))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 55,
      "docstring_strength": 0.0
    },
    "id": 43,
    "score": "3",
    "annotator": 1,
    "annotation_id": 43,
    "created_at": "2025-10-27T11:37:03.112214Z",
    "updated_at": "2025-10-27T11:37:03.112228Z",
    "lead_time": 3.354,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_events.py:ListTests.test_list__invalid_response_json",
    "text": "@vcr.use_cassette()\ndef test_list__invalid_response_json(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with ClimaxKiz panel\n        - a HssDriver\n    When:\n        - I list events which returns an invalid json\n    Then:\n        - I get a BadResponse\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_hm)\n    driver = driver_factory.get_driver(hss)\n    with mock.patch.object(ListResponseSerializer, \"is_valid\", side_effect=ValidationError):  # noqa: RMS102\n        assert_that(calling(driver.events.list).with_args(limit=4), raises(BadResponse))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 8.0
    },
    "id": 44,
    "score": "1",
    "annotator": 1,
    "annotation_id": 44,
    "created_at": "2025-10-27T11:37:06.832201Z",
    "updated_at": "2025-10-27T11:37:06.832218Z",
    "lead_time": 3.574,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/rating/api/v33/tests/test_api.py:ClimaxGetRatingTestCase.test_get_rating_hss_with_delegation",
    "text": "@vcr.use_cassette()\ndef test_get_rating_hss_with_delegation(self) -> None:\n    hss = self.client.hss\n    self.client = HoneywellAPIClient()\n    DelegationMixin().any_delegation(\n        contract=hss.site.contract, enabled=True, role=roles.full, user=self.client.user\n    )\n    response = self.when_i_get_rating(hss_pk=hss.pk)\n    assert_that(response.status_code, is_(200))\n    assert_that(response.json(), has_length(3))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 45,
    "score": "3",
    "annotator": 1,
    "annotation_id": 45,
    "created_at": "2025-10-27T11:37:16.816342Z",
    "updated_at": "2025-10-27T11:37:16.816360Z",
    "lead_time": 9.844,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_order_product_name.py:OrderProductNameTests.test_booking_product_name",
    "text": "def test_booking_product_name(self) -> None:\n    \"\"\"\n    Given any credits pack scheduler in progress\n    When I buy credit pack\n    Then order has promocode_type = increased_bonus\n    \"\"\"\n    booking = self.any_twip_api_booking(with_purchases=True)\n    orderitem = booking.get_related_order.orderitem_first\n    assert_that(orderitem.product_name, is_(booking.purchase_set.first().raw[\"offer_name\"]))\n    assert_that(orderitem.product_name, is_(orderitem.deal.washing_program.name))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 46,
    "score": "4",
    "annotator": 1,
    "annotation_id": 46,
    "created_at": "2025-10-27T11:38:56.475442Z",
    "updated_at": "2025-10-27T11:38:56.475450Z",
    "lead_time": 34.834,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/templatetags/tests/test_ifhasperm.py:IfHasPermTemplateTagTests.test_rendered",
    "text": "def test_rendered(self) -> None:\n    context = Context({\"user\": self.user, \"request\": self.request})\n    rendered_template = self.TEMPLATE.render(context)\n    self.assertInHTML(\"here\", rendered_template)",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 47,
    "score": "3",
    "annotator": 1,
    "annotation_id": 47,
    "created_at": "2025-10-27T11:39:06.104898Z",
    "updated_at": "2025-10-27T11:39:06.104911Z",
    "lead_time": 9.49,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v60/tests/test_api_powerswitch_essentielle.py:PowerSwitchTests.test_change_power_switch_icon",
    "text": "@vcr.use_cassette()\ndef test_change_power_switch_icon(self) -> None:\n    power_switch_data = self.when_i_list_power_switches_for_hss(self.client.hss)[0]\n    new_icon = \"light\" if power_switch_data[\"fields\"][\"icon\"] == \"toy\" else \"toy\"\n\n    self.when_i_update_power_switch_icon(self.client.hss.pk, power_switch_data[\"pk\"], new_icon)\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_204_NO_CONTENT))\n    self.then_power_switch_icon_is(self.client.hss, power_switch_data[\"pk\"], new_icon)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 48,
    "score": "4",
    "annotator": 1,
    "annotation_id": 48,
    "created_at": "2025-10-27T11:39:12.109185Z",
    "updated_at": "2025-10-27T11:39:12.109197Z",
    "lead_time": 5.852,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_honeywell_calendar.py:UnpublishScenarioApiTestCase.test_unpublish_scenario",
    "text": "@override_settings(CACHES=TEST_NO_CACHES, DISABLE_REDLOCK=True)\n@vcr.use_cassette()\ndef test_unpublish_scenario(self) -> None:\n    \"\"\"\n    Given : A scenario with is_on = True\n    When : I unpublish this scenario\n    Then : I get a 200 HTTP response\n            The scenario has been updated with is_on = False\n            The scenario state is ready\n    \"\"\"\n    last_response = self.when_i_unpublish_scenario(self.initial_scenario.pk)\n    self.initial_scenario.refresh_from_db()\n    assert_that(last_response.status_code, is_(200))\n    assert_that(last_response.json(), not_none())\n    assert_that(last_response.json()[\"fields\"], not_none())\n    assert_that(last_response.json()[\"fields\"][\"state\"], is_(states.ready))\n    assert_that(self.initial_scenario.is_on, is_(False))\n    assert_that(self.initial_scenario.state, is_(states.ready))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 6,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 6.0
    },
    "id": 49,
    "score": "4",
    "annotator": 1,
    "annotation_id": 49,
    "created_at": "2025-10-27T11:39:34.798588Z",
    "updated_at": "2025-10-27T11:39:34.798606Z",
    "lead_time": 22.54,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/transaction/tests/test_task.py:TaskTests.test_setup_periodic_tasks",
    "text": "def test_setup_periodic_tasks(self) -> None:\n    celery = Celery()\n    setup_periodic_tasks(sender=celery)",
    "metrics": {
      "line_count": 2,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 61,
      "docstring_strength": 0.0
    },
    "id": 50,
    "score": "3",
    "annotator": 1,
    "annotation_id": 50,
    "created_at": "2025-10-27T11:39:39.957435Z",
    "updated_at": "2025-10-27T11:39:39.957452Z",
    "lead_time": 5.014,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/private_api/v34/tests/test_resynchro_task_api.py:ResynchroTaskAPITests.test_retrieve_resynchro_task",
    "text": "def test_retrieve_resynchro_task(self) -> None:\n    hss = self.any_hss()\n    task = self.any_resynchro_task(hss=hss, source=resynchro_task_sources.private_api)\n    url = reverse(\"private:v34:scenarios:resynchrotask-detail\", args=(task.id,))\n    response = self.client.get(url)\n    assert_that(response.status_code, is_(200), response.content)\n    assert_that(\n        response.json(),\n        has_entries(\n            {\n                \"pk\": task.id,\n                \"model\": \"scenarios.resynchro-task\",\n                \"fields\": has_entries(\n                    {\n                        \"state\": resynchro_task_states.pending,\n                        \"source\": resynchro_task_sources.private_api,\n                        \"creation_time\": task.creation_time.astimezone().isoformat(),\n                        \"error_message\": \"\",\n                    }\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 51,
    "score": "4",
    "annotator": 1,
    "annotation_id": 51,
    "created_at": "2025-10-27T13:01:19.371859Z",
    "updated_at": "2025-10-27T13:01:19.371879Z",
    "lead_time": 27.294,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/payline/test_order_booking.py:MangopayOrderBookingTestCase.test_booking",
    "text": "def test_booking(self) -> None:\n    \"\"\"\n    Given a booking with purchase\n    When I complete checkout\n    Then order has been created and is succeeded, checkout is ordered, cart is checked_out\n    \"\"\"\n    user = self.any_user(with_billing_info=True, with_total_gr_card=True)\n    self.any_user_vehicle(user=user)\n    booking = self.any_real_booking(with_purchase=True)\n    booking.station.operator = self.any_seller(seller_type=seller_types.tmf, with_funds=True)\n    booking.station.save()\n    cart = self.any_cart(\n        user=user, profile=cart_profiles.booking_purchase, booking=booking, state=cart_states.active\n    )\n    checkout = self.any_checkout(cart=cart, state=checkout_states.ready, payment_method=self.PAYMENT_METHOD)\n    with transaction.atomic():\n        order = checkout.complete()\n    booking.refresh_from_db()\n    responses = Request.objects.wait_for_responses()\n    [response.raise_for_status for response in responses]\n    while order.status not in order_states.purchase_final:\n        with transaction.atomic():\n            order.refresh()\n            order.refresh_from_db()\n    assert_that(checkout.state, is_(checkout_states.ordered))\n    assert_that(checkout.cart.state, is_(cart_states.checked_out))\n    assert_that(checkout.order_id, not_none())\n    assert_that(order.status, is_(order_states.success))\n    booking.refresh_from_db()\n    assert_that(booking.state, is_(booking_states.confirmed))",
    "metrics": {
      "line_count": 22,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 9,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 52,
    "score": "2",
    "annotator": 1,
    "annotation_id": 52,
    "created_at": "2025-10-27T13:03:13.125092Z",
    "updated_at": "2025-10-27T13:03:13.125109Z",
    "lead_time": 113.601,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_promotional_offer.py:CartPromotionalOfferTwoRequiredFreeTestCase.test_promotional_offer_two_required_free__update",
    "text": "def test_promotional_offer_two_required_free__update(self) -> None:\n    \"\"\"\n     Given a station with promotional offer for a free item with two required items\n        of which for one the required quantity is 2\n    When\n        I add the required items to cart\n        I add one more of the required items\n        I remove that item\n    The promotional offer is still applied\n    \"\"\"\n    cart = self.any_cart()\n    promotional_offer = self.promotional_offer_multiple_free\n    station = self.station\n\n    required_deals, discounted_deals = promotional_offer.get_deals_for_station(station)\n    discounted_deal = discounted_deals[0]\n    required_deal_1 = required_deals[0]\n    required_deal_2 = required_deals[1]\n\n    required = promotional_offer.required_products.filter(product=required_deal_1.washing_program.product).first()\n    required.quantity = 2\n    required.save()\n\n    self.add_item(cart, required_deal_1, quantity=2)\n    self.add_item(cart, required_deal_2)\n    cart_item_2 = self.add_item(cart, required_deal_2)\n    self.remove_item(cart, cart_item_2)\n\n    assert_that(cart.cartitem_set.count(), is_(3))\n    cart_item_1 = cart.cartitem_set.filter(deal=required_deal_1).first()\n    assert_that(cart_item_1, is_not(None))\n    cart_item_2 = cart.cartitem_set.filter(deal=required_deal_2).first()\n    assert_that(cart_item_2, is_not(None))\n    cart_item_3 = cart.cartitem_set.filter(deal=discounted_deal).first()\n    assert_that(cart_item_3, is_not(None))\n    assert_that(\n        cart.meta,\n        has_entries(\n            {\n                \"promotional_offers\": has_entries(\n                    {\n                        \"used_cart_items\": contains_inanyorder(\n                            has_entries(\n                                {\"id\": str(cart_item_1.id), \"quantity\": 2, \"offer_id\": str(promotional_offer.uuid)}\n                            ),\n                            has_entries(\n                                {\"id\": str(cart_item_2.id), \"quantity\": 1, \"offer_id\": str(promotional_offer.uuid)}\n                            ),\n                        ),\n                        \"offered_cart_items\": contains(\n                            has_entries({\"id\": str(cart_item_3.id), \"offer_id\": str(promotional_offer.uuid)})\n                        ),\n                    }\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 22,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 8.0
    },
    "id": 53,
    "score": "4",
    "annotator": 1,
    "annotation_id": 53,
    "created_at": "2025-10-27T13:04:13.546583Z",
    "updated_at": "2025-10-27T13:04:13.546598Z",
    "lead_time": 60.271,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/mangopay/test_tasks.py:MangoPaySynchronizationTasksTestCase.test_should_synchronize_mangopay_user",
    "text": "def test_should_synchronize_mangopay_user(self) -> None:\n    \"\"\"\n    Given any user\n    When i launch task should_synchronize_mangopay_user\n    Then cache key has been set\n    \"\"\"\n    user = self.any_user()\n    user.create_mp_user_if_needed()\n    tasks.should_synchronize_mangopay_user(user.mp_user.pk)\n    assert_that(cache.get(f\"mp_{user.mp_user.pk}_is_dirty\", None), not_none())",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 4.0
    },
    "id": 54,
    "score": "5",
    "annotator": 1,
    "annotation_id": 54,
    "created_at": "2025-10-27T13:04:37.855570Z",
    "updated_at": "2025-10-27T13:04:37.855587Z",
    "lead_time": 6.539,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/amqp/tests/test_serializers.py:AMQPSerializersTests.test_fast_status_serializer",
    "text": "def test_fast_status_serializer(self) -> None:\n    data = {\n        \"Prom\": \"0031000001\",\n        \"SiteId\": \"867430a0-fc58-4338-82ad-dcc2693c9668\",\n        \"DiffusedDate\": \"2019-04-16T11:27:09.1458338+02:00\",\n        \"OperatingState\": operation_states.on,\n    }\n    serializer = FastStatusEventSerializer(data=data)\n    serializer.is_valid(raise_exception=True)\n    assert_that(\n        serializer.validated_data,\n        has_entries(\n            {\n                \"Prom\": is_(\"0031000001\"),\n                \"SiteId\": is_(\"867430a0-fc58-4338-82ad-dcc2693c9668\"),\n                \"OperatingState\": is_(operation_states.on),\n                \"DiffusedDate\": instance_of(datetime),\n            }\n        ),\n    )\n    serializer.process_event()\n\n    prom = serializer.validated_data.get(\"Prom\")\n    faststatus = FastStatusRedisClient(key_params_list=[prom]).get_fast_status()\n    assert_that(faststatus, not_(none()))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 55,
    "score": "2",
    "annotator": 1,
    "annotation_id": 55,
    "created_at": "2025-10-27T13:05:37.401314Z",
    "updated_at": "2025-10-27T13:05:37.401326Z",
    "lead_time": 34.08,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/checkouts/test_cancel_api.py:CheckoutCancelAPITestCase.test_cancel__anonymous",
    "text": "def test_cancel__anonymous(self) -> None:\n    self.client = AnonymousClient()\n    self.when_i_cancel_checkout(checkout_id=1234)\n\n    assert_that(self.last_response, http(403))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 57,
      "docstring_strength": 0.0
    },
    "id": 56,
    "score": "3",
    "annotator": 1,
    "annotation_id": 56,
    "created_at": "2025-10-27T13:06:06.714690Z",
    "updated_at": "2025-10-27T13:06:06.714699Z",
    "lead_time": 29.165,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_models.py:ModelTestCase.test_order_from_twip_booking__no_deal",
    "text": "def test_order_from_twip_booking__no_deal(self) -> None:\n    booking = BookingMixin().any_twip_api_booking(is_deal=False)\n    order = OrderItem.objects.filter(booking_pk=booking.pk).first().order\n    for order_item in order.orderitem_set.all():\n        purchase = booking.purchase_set.filter(raw__uuid=str(order_item.purchase_pk)).first()\n        assert purchase\n\n        assert_that(\n            order_item,\n            has_properties(\n                {\n                    \"orderitem_type\": order_item_types.booking,\n                    \"purchase_pk\": UUID(purchase.uuid),\n                    \"booking_pk\": booking.pk,\n                    \"price_before_discount\": decimal.Decimal(purchase.raw[\"price\"][\"incl_vat\"]).quantize(\n                        decimal.Decimal(\"0.000001\")\n                    ),\n                    \"price_after_discount\": decimal.Decimal(purchase.raw[\"price\"][\"incl_vat\"]).quantize(\n                        decimal.Decimal(\"0.000001\")\n                    ),\n                    \"price_after_discount_excl_tax\": decimal.Decimal(purchase.raw[\"price\"][\"excl_vat\"]).quantize(\n                        decimal.Decimal(\"0.000001\")\n                    ),\n                    \"currency_code\": purchase.raw[\"price\"][\"currency\"],\n                }\n            ),\n        )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 57,
    "score": "2",
    "annotator": 1,
    "annotation_id": 57,
    "created_at": "2025-10-27T13:06:47.759621Z",
    "updated_at": "2025-10-27T13:06:47.759637Z",
    "lead_time": 40.896,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/vendor/climax/tests/keychain/test_login_api_30.py:PingApi30TestCase.test_ping",
    "text": "def test_ping(self) -> None:\n    self.when_i_ping()\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_200_OK))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 62,
      "docstring_strength": 0.0
    },
    "id": 58,
    "score": "3",
    "annotator": 1,
    "annotation_id": 58,
    "created_at": "2025-10-27T13:07:09.783394Z",
    "updated_at": "2025-10-27T13:07:09.783411Z",
    "lead_time": 21.877,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_request_export.py:RequestExportTests.test_cancel_button__request_export_form",
    "text": "def test_cancel_button__request_export_form(self) -> None:\n    \"\"\"\n    Given an user and a request in state in_progress\n    When i click on button cancel\n    Then request is cancelled\n    \"\"\"\n    request_export = self.any_request_export(creator=self.client.user, state=request_export_states.in_progress)\n    page = RequestListPage.get(client=self.client, site_slug=self.client.sites[0].slug)\n    page = page.request_exports_list(state=request_export_states.in_progress)[0].cancel_form.cancel(\n        next_page_class=RequestListPage\n    )\n    request_export.refresh_from_db()\n    assert request_export.state == request_export_states.canceled\n    assert_that(page.request_exports_list(state=request_export_states.in_progress), empty())",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 59,
    "score": "5",
    "annotator": 1,
    "annotation_id": 59,
    "created_at": "2025-10-27T13:08:01.870899Z",
    "updated_at": "2025-10-27T13:08:01.870915Z",
    "lead_time": 19.907,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__packing__packaging_units",
    "text": "def test_request_formatter__packing__packaging_units(self) -> None:\n    \"\"\"\n    Given a request with packaging units\n    When I use RequestFormatter with 'packing' field to export\n    Then it return a dict that contain request packing\n    \"\"\"\n    request = self.any_request(\n        transport_service=transport_services.packaging_units, with_packaging_units=True, with_carriages=False\n    )\n    request_csv = RequestFormatter().to_csv(request, fields=[\"packing\"])\n    p_packing = p_(name=\"packaging_unit.packing\")\n    packaging_unit = (\n        [v.label for v in p_packing.values if v.key == pu.packing][0] for pu in request.packaging_units.all()\n    )\n    assert_that(request_csv[0], is_(\", \".join(packaging_unit)))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 4,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 60,
    "score": "5",
    "annotator": 1,
    "annotation_id": 60,
    "created_at": "2025-10-27T13:08:31.366309Z",
    "updated_at": "2025-10-27T13:08:31.366327Z",
    "lead_time": 29.343,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/parameters/tests/test_template_tags.py:ParameterTemplateTagsTests.test_request_type_site__label",
    "text": "def test_request_type_site__label(self) -> None:\n    \"\"\"\n    Given\n        an activated site param\n        a request type site parameter config\n    When i call parameter label\n    Then it shows the label value\n    \"\"\"\n    config = self.any_request_type_site_configuration()\n    request = self.any_request(site=config.site)\n    with activate(request=request):\n        value = parameter(name=config.definition.name, option_field=\"label\")\n    assert_that(value, is_(config.label))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 6.0
    },
    "id": 61,
    "score": "5",
    "annotator": 1,
    "annotation_id": 61,
    "created_at": "2025-10-27T13:08:40.737189Z",
    "updated_at": "2025-10-27T13:08:40.737207Z",
    "lead_time": 9.228,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_update_steps.py:RequestUpdateStepsFormTests.test_add_carriage",
    "text": "def test_add_carriage(self) -> None:\n    request = self.any_request(\n        state=request_states.initial,\n        ready_to_submit=True,\n        creator=self.client.user,\n        with_step_units=False,\n        with_packaging_units=False,\n        with_carriages=True,\n    )\n    page = RequestUpdateStepsPage.get(\n        client=self.client, site_slug=request.site.slug, pk=request.pk\n    ).form.add_carriage()\n    assert_that(page, instance_of(RequestUpdateStepsPage))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 62,
    "score": "3",
    "annotator": 1,
    "annotation_id": 62,
    "created_at": "2025-10-27T13:09:04.741270Z",
    "updated_at": "2025-10-27T13:09:04.741282Z",
    "lead_time": 23.846,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_request_export.py:RequestExportTests.test_request_export__global_check",
    "text": "def test_request_export__global_check(self) -> None:\n    \"\"\"\n    Given a user who already created an export setting with 'creation_time', 'qualification_time',\n    'collection_date', 'state' as field to export\n    When I get the request export form\n    Then there is only 'request_type' field to be checked\n    \"\"\"\n    self.any_request_export_setting(\n        creator=self.client.user,\n        site=self.client.current_site,\n        fields_to_export=[\"creation_time\", \"qualification_time\", \"collection_date\", \"state\"],\n    )\n    page = RequestListPage.get(client=self.client, site_slug=self.client.current_site.slug)\n    page = page.notifications_offcanvas.new_export()\n    assert isinstance(page, RequestListPage)\n    assert page.request_export_form\n    checked_fields = [\n        field_name for field_name, field_value in page.request_export_form.export_group.items() if field_value\n    ]\n    assert_that(checked_fields, has_length(1))\n    assert_that(checked_fields, has_item(\"switch_state\"))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 84,
      "docstring_strength": 5.0
    },
    "id": 63,
    "score": "4",
    "annotator": 1,
    "annotation_id": 63,
    "created_at": "2025-10-27T13:13:21.106404Z",
    "updated_at": "2025-10-27T13:13:21.106412Z",
    "lead_time": 256.225,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/maia/tests/test_drivers.py:MaiaScenarioDriverTests.test_retreive_scenario_not_found",
    "text": "@vcr.use_cassette()\ndef test_retreive_scenario_not_found(self) -> None:\n    \"\"\"\n    When I retreive scenario not in maia\n    Then NotFound\n    \"\"\"\n    assert_that(\n        calling(self.maia_scenario_driver.retreive_scenario).with_args(\n            maia_scenario=MaiaScenario(\n                uuid=UUID(\"2eb28e47-6794-4f01-a5c8-541e2258fe76\"),\n            )\n        ),\n        raises(NotFound),\n    )",
    "metrics": {
      "line_count": 1,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 3.0
    },
    "id": 64,
    "score": "4",
    "annotator": 1,
    "annotation_id": 64,
    "created_at": "2025-10-27T13:15:21.850173Z",
    "updated_at": "2025-10-27T13:15:21.850187Z",
    "lead_time": 59.096,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_client.py:ClientInitTests.test_client_raises_panel_send_sms_failed_on_honeywell_200",
    "text": "def test_client_raises_panel_send_sms_failed_on_honeywell_200(self) -> None:\n    hss = self.any_configured_hss(account=default_honeywell_account)\n    hss.has_ip = False\n    hss.save()\n    client = Client(hss)\n    with requests_mock.Mocker(real_http=True) as m:\n        m.get(self._mock_url, json={\"messageKey\": \"domoweb.pe.sendsms6.failed\", \"errorCode\": 7})\n        assert_that(\n            calling(client._request).with_args(url=self._mock_url, should_retry=False), raises(PanelSendSMSFailed)\n        )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 65,
    "score": "1",
    "annotator": 1,
    "annotation_id": 65,
    "created_at": "2025-10-27T13:16:32.122687Z",
    "updated_at": "2025-10-27T13:16:32.122700Z",
    "lead_time": 70.105,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/mangopay/test_checkout.py:MangopayPaymentMethodProviderTestCase.test_checkout__pending__remove_prepaid_account",
    "text": "def test_checkout__pending__remove_prepaid_account(self) -> None:\n    \"\"\"\n    Given\n        a cart prepaid account linked\n    when i start checkout\n    then checkout is in remove_prepaid_account state\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal)\n    cart = self.any_cart(\n        user=user, state=cart_states.active, prepaid_account_profile=cart_prepaid_account_profiles.personal\n    )\n    checkout = self.any_checkout(\n        cart=cart,\n        state=checkout_states.pending,\n        payment_method=self.PAYMENT_METHOD,\n        with_ip_address=True,\n        with_browser_info=True,\n    )\n    checkout.refresh(consumer=checkout.cart.user.consumer_set.first())\n\n    assert_that(checkout.state, equal_to(checkout_states.remove_prepaid_account))\n    assert_that(checkout.order_id, none())",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 5.0
    },
    "id": 66,
    "score": "5",
    "annotator": 1,
    "annotation_id": 66,
    "created_at": "2025-10-27T13:18:18.306265Z",
    "updated_at": "2025-10-27T13:18:18.306282Z",
    "lead_time": 85.012,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/test_utils.py:FileUriTests.test_uri_properties",
    "text": "def test_uri_properties(self) -> None:\n    \"\"\"\n    Given any file uri\n    When getting properties\n    Then we have expected values\n    \"\"\"\n    uri = FileUri(\"file://hostname/path/to/specific/file.txt\")\n    assert_that(\n        uri,\n        has_properties(\n            {\n                \"hostname\": is_(\"hostname\"),\n                \"value\": is_(\"file://hostname/path/to/specific/file.txt\"),\n                \"path\": is_(\"/path/to/specific/file.txt\"),\n                \"name\": is_(\"path/to/specific/file.txt\"),\n            }\n        ),\n    )\n    assert_that(str(uri), is_(\"FileUri(file://hostname/path/to/specific/file.txt)\"))\n    assert_that(hash(uri), uri._value)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 67,
      "docstring_strength": 4.0
    },
    "id": 67,
    "score": "5",
    "annotator": 1,
    "annotation_id": 67,
    "created_at": "2025-10-27T13:18:49.705012Z",
    "updated_at": "2025-10-27T13:18:49.705028Z",
    "lead_time": 31.246,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/billing/tests/test_uploadto.py:FilePathTest.test_corporation_invoice_bill_dir",
    "text": "def test_corporation_invoice_bill_dir(self) -> None:\n    path = corporation_invoice_bill_dir(None, self.filename)\n    expected_path = f\"bill/corporation-invoice_bill/{self.date.strftime('%Y/%m/%d')}/test_file.txt\"\n    self.assertEqual(path, expected_path)",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 68,
    "score": "3",
    "annotator": 1,
    "annotation_id": 68,
    "created_at": "2025-10-27T13:19:07.943999Z",
    "updated_at": "2025-10-27T13:19:07.944009Z",
    "lead_time": 18.087,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/attachments/authentications/tests/test_attachment.py:UserAttachmentAuthenticationTests.test_user__has_perm__transport_warrant_attachment",
    "text": "def test_user__has_perm__transport_warrant_attachment(self) -> None:\n    \"\"\"\n    Given\n        t1 a team\n        u1 a user in t1 with role user\n        u2 a user in t1 with role user\n        u3 a user not in t1 with role user\n        a request created by u1\n        an attachment created by u1 linked to r1\n    When I call has_perm\n    Then\n        u1 has not perm can_update and can_delete\n        u2 has not perm can_update and can_delete\n        u3 has not perm can_update and can_delete\n    \"\"\"\n    site = self.any_site()\n    u1 = self.any_user(roles=[permission_roles.user], sites=[site.pk])\n    u2 = self.any_user(roles=[permission_roles.user], sites=[site.pk])\n    u3 = self.any_user(roles=[permission_roles.user], sites=[site.pk])\n    self.any_team(site=site, with_users=[u1, u2])\n    request = self.any_quoted_request(\n        state=\"draft\",\n        creator=u1,\n        site=site,\n    )\n    attachment = request.generate_transportation_warrant_attachment()\n    assert_that(u1.has_perm(attachment_permissions.can_update, obj=attachment.file), is_(False))\n    assert_that(u2.has_perm(attachment_permissions.can_update, obj=attachment.file), is_(False))\n    assert_that(u3.has_perm(attachment_permissions.can_update, obj=attachment.file), is_(False))\n    assert_that(u1.has_perm(attachment_permissions.can_delete, obj=attachment.file), is_(False))\n    assert_that(u2.has_perm(attachment_permissions.can_delete, obj=attachment.file), is_(False))\n    assert_that(u3.has_perm(attachment_permissions.can_delete, obj=attachment.file), is_(False))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 6,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 86,
      "docstring_strength": 13.0
    },
    "id": 69,
    "score": "5",
    "annotator": 1,
    "annotation_id": 69,
    "created_at": "2025-10-27T13:20:19.713479Z",
    "updated_at": "2025-10-27T13:20:19.713495Z",
    "lead_time": 71.628,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/stations/test_admin.py:StationAdminTests.test_detail",
    "text": "def test_detail(self) -> None:\n    station = self.any_station()\n    self.when_i_view_instance_details(station)\n    assert_that(self.last_response.status_code, is_(200))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 57,
      "docstring_strength": 0.0
    },
    "id": 70,
    "score": "3",
    "annotator": 1,
    "annotation_id": 70,
    "created_at": "2025-10-27T13:20:29.049026Z",
    "updated_at": "2025-10-27T13:20:29.049036Z",
    "lead_time": 9.192,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/request_update_steps/test_step_form.py:StepFormTests.test_valid__bypass_validation_rules",
    "text": "def test_valid__bypass_validation_rules(self) -> None:\n    request = self.any_request(state=request_states.draft, ready_to_submit=False)\n    data = self.any_step_form_data(steps=request.steps.all())\n    formset = make_step_formset_class(instance=request, user=request.creator, bypass_validation_rules=True)(\n        instance=request, data=data\n    )\n\n    assert_that(formset.is_valid(), is_(True), formset.errors)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 71,
    "score": "3",
    "annotator": 1,
    "annotation_id": 71,
    "created_at": "2025-10-27T13:20:34.465971Z",
    "updated_at": "2025-10-27T13:20:34.465984Z",
    "lead_time": 5.272,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/climax/serializers/tests/test_captures.py:DSTCompatibleDateTimeFieldTests.test_enforce_timezone",
    "text": "def test_enforce_timezone(self) -> None:\n    dt1 = timezone.now()\n    dt2 = timezone.now()\n\n    field = DSTCompatibleDateTimeField(dt1)\n\n    def test(*args, **kwargs):\n        raise ValidationError()\n\n    with mock.patch(\"rest_framework.serializers.DateTimeField.enforce_timezone\", side_effect=test):  # noqa: RMS102\n        with self.assertRaises(ValidationError):\n            field.enforce_timezone(value=dt2)",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 72,
    "score": "1",
    "annotator": 1,
    "annotation_id": 72,
    "created_at": "2025-10-27T13:20:47.377614Z",
    "updated_at": "2025-10-27T13:20:47.377630Z",
    "lead_time": 12.751,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/twip/api/v40/tests/test_booking_api.py:BookingAPITests.test_non_twip_user_cant_set_booking_vehicle",
    "text": "def test_non_twip_user_cant_set_booking_vehicle(self) -> None:\n    self.client = AuthenticatedClient(mangopay_card=mangopay_cards.normal)\n    station = self.any_twip_station()\n    booking = self.sync_create_booking(station)\n    url = reverse(\"api:v40:twip:booking-detail\", kwargs={\"pk\": booking.pk})\n    response = self.client.put(\n        url, data={\"vehicle_registration\": \"FR-123-AD\", \"vehicle_type\": vehicle_types.sedan}\n    )\n    assert_that(response.status_code, is_(400))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 73,
    "score": "3",
    "annotator": 1,
    "annotation_id": 73,
    "created_at": "2025-10-27T13:21:10.323897Z",
    "updated_at": "2025-10-27T13:21:10.323916Z",
    "lead_time": 22.794,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v80/tests/stations/test_api_station_details.py:StationDetailsAPITestCase.test_read__not_found",
    "text": "def test_read__not_found(self) -> None:\n    self.client = AnonymousClient()\n\n    self.when_i_read_station(station_pk=1234)\n\n    assert_that(self.last_response, http(404))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 58,
      "docstring_strength": 0.0
    },
    "id": 74,
    "score": "3",
    "annotator": 1,
    "annotation_id": 74,
    "created_at": "2025-10-27T13:21:14.243568Z",
    "updated_at": "2025-10-27T13:21:14.243585Z",
    "lead_time": 3.773,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_hss_status_serializer.py:HssStatusSerializerTestCase.test_hss_status_serialization__probe_alert",
    "text": "def test_hss_status_serialization__probe_alert(self) -> None:\n    \"\"\"\n    Given probe in alert status\n    Given an hss kiz 3 (climax + home_automation)\n    When i serialize\n    Then status is unknow\n    \"\"\"\n    probe = Probe.objects.get()\n    probe.status = status.alert\n    probe.save()\n    self.client.hss.site.contract.refresh_from_db()\n\n    hss_status_pk = \"hss_status_1\"\n    source = sources.application_read_status\n    timestamp = int(time.time() * 10e5)\n    operating_state = operation_states.off\n    raw_status = operation_states.reverse_mapping_operating_state[operating_state]\n    faststatus = FastStatus(\n        identifier=hss_status_pk, source=source, timestamp=timestamp, raw_status=raw_status, group=None\n    )\n    serializer = HssStatusSerializer(instance=faststatus)\n    data = serializer.data\n    assert_that(data[\"fields\"][\"is_incident_detected\"], is_(True))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 5.0
    },
    "id": 75,
    "score": "4",
    "annotator": 1,
    "annotation_id": 75,
    "created_at": "2025-10-27T13:22:23.090745Z",
    "updated_at": "2025-10-27T13:22:23.090761Z",
    "lead_time": 68.693,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_models.py:ModelTests.test_first_credits_pack_purchase_promo_code__welcome_code",
    "text": "def test_first_credits_pack_purchase_promo_code__welcome_code(self) -> None:\n    credits_pack_deal = self.any_deal(profile=deal_profiles.credits_pack)\n    cart = self.any_cart(deal=credits_pack_deal)\n    promo_code = self.any_promocode(\n        version=2,\n        profile=promocode_profiles.v2_first_credits_pack_purchase,\n        code=\"WELCOME\",\n    )\n    promocode_not_valid = promo_code.clean_promocode_validation_for_cart(cart)\n    assert_that(promo_code.valid_for_station, is_(none()))\n    assert_that(promocode_not_valid, is_(None))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 76,
    "score": "3",
    "annotator": 1,
    "annotation_id": 76,
    "created_at": "2025-10-27T13:23:31.464855Z",
    "updated_at": "2025-10-27T13:23:31.464870Z",
    "lead_time": 68.221,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/subscriptions/tests/test_models.py:SubscriptionProductTests.test_str",
    "text": "def test_str(self) -> None:\n    \"\"\"\n    Given any subscription product\n    When I display object\n    Then str is correct\n    \"\"\"\n    subscription_type = self.any_subscription_type()\n    s_product = subscription_type.subscriptionproduct_set.first()\n    assert_that(str(s_product), is_(f\"{s_product.quantity} {s_product.product} ({s_product.uuid})\"))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 4.0
    },
    "id": 77,
    "score": "5",
    "annotator": 1,
    "annotation_id": 77,
    "created_at": "2025-10-27T13:23:36.771794Z",
    "updated_at": "2025-10-27T13:23:36.771812Z",
    "lead_time": 5.149,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_camera_driver.py:UpdateTests.test_update_name__polling_commit_response_decode_error",
    "text": "@vcr.use_cassette()\ndef test_update_name__polling_commit_response_decode_error(self) -> None:\n    \"\"\"\n    Given\n        - a Hss with a honeywell panel\n        - a HssDriver\n        - a honeywell camera\n    When\n        - I update camera name with a polling response with wrong json\n    Then\n        - A ValueError is raises\n    \"\"\"\n    hss = self.any_configured_hss(account=default_honeywell_account)\n    driver = driver_factory.get_driver(hss)\n    with requests_mock.Mocker(real_http=True) as m:\n        m.get(\n            re.compile(r\"panel/devices/config/status\"),\n            text=\"{}}\",\n            status_code=200,\n        )\n        honeywell_camera = self.any_honeywell_camera(hss=hss)\n        new_name = get_random_string(8)\n        assert_that(\n            calling(driver.cameras.update_name).with_args(camera_id=honeywell_camera.id, new_name=new_name),\n            raises(BadResponse),\n        )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 9.0
    },
    "id": 78,
    "score": "1",
    "annotator": 1,
    "annotation_id": 78,
    "created_at": "2025-10-27T13:24:08.500477Z",
    "updated_at": "2025-10-27T13:24:08.500493Z",
    "lead_time": 31.568,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_validation_backends.py:ValidationBackendsTests.test_promo_code_valid_for_a_certain_amount_of_uses",
    "text": "def test_promo_code_valid_for_a_certain_amount_of_uses(self) -> None:\n    \"\"\"\n    Given : Any Cart with promocode rule valid_for_a_specific_amount_of_uses and a usage limit of 2\n    When : I do the checkout\n    Then : It succeeds\n    \"\"\"\n    user = self.any_user(mangopay_card=\"normal\")\n    cart = self.any_cart(\n        user=user,\n        deal=self.washing_deal,\n        state=cart_states.active,\n        profile=cart_profiles.deal_washing,\n    )\n    promo_code = self.any_promocode(\n        version=2,\n        profile=promocode_profiles.v2_cart_discount_percentage,\n        valid_for_washing_program=self.washing_deal.washing_program,\n    )\n    promo_code.usage_limit = 2\n    promo_code.rules.append(promo_code_rules.valid_for_a_specific_amount_of_uses)\n    promo_code.save()\n    cart.update(promocode=promo_code)\n    self.any_checkout(\n        cart=cart,\n        state=checkout_states.ordered,\n        payment_method=payment_methods.mangopay,\n        api_version=CURRENT_API_VERSION,\n        with_ip_address=True,\n        with_browser_info=True,\n    )\n    assert cart.promocode",
    "metrics": {
      "line_count": 9,
      "assertion_count": 0,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 79,
    "score": "4",
    "annotator": 1,
    "annotation_id": 79,
    "created_at": "2025-10-27T13:29:24.623184Z",
    "updated_at": "2025-10-27T13:29:24.623199Z",
    "lead_time": 315.973,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/test_twapp_679.py:TWAPP679Tests.test_issue_is_fixed",
    "text": "def test_issue_is_fixed(self) -> None:\n    user = self.any_user(with_mobile_phone_verified=True)\n    user_2 = self.any_user(with_mobile_phone_verified=False)\n    user_2.mobile_phone = user.mobile_phone\n    user_2.mobile_phone_is_verified = True\n    with self.assertRaises(IntegrityError) as e:\n        user_2.save()\n    assert_that(e.exception.args[0], contains_string(\"unique_mobile_phone_when_verified\"))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 80,
    "score": "3",
    "annotator": 1,
    "annotation_id": 80,
    "created_at": "2025-10-27T13:29:46.556604Z",
    "updated_at": "2025-10-27T13:29:46.556615Z",
    "lead_time": 8.426,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/crm/tests/test_show_rating_screen.py:UserFeedbackAllowsShowRatingScreenSpecificationTestCase.test_rated_android",
    "text": "def test_rated_android(self) -> None:\n    \"\"\"\n    Given a registered user that has rated the android app or has chosen to never rate it\n    Then return False\n    \"\"\"\n    user = self.any_user()\n    app_rating = self.any_app_rating(user, android_state=app_rating_state.rated)\n\n    spec = UserFeedbackAllowsShowRatingScreenSpecification(app_rating_platform.android)\n    self.assertEqual(spec.is_satisfied_by(user), False)\n\n    app_rating.android_state = app_rating_state.never\n    app_rating.save()\n\n    spec = UserFeedbackAllowsShowRatingScreenSpecification(app_rating_platform.android)\n    self.assertEqual(spec.is_satisfied_by(user), False)",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 25,
      "dc_coherence_codet5": 68,
      "docstring_strength": 3.0
    },
    "id": 81,
    "score": "3",
    "annotator": 1,
    "annotation_id": 81,
    "created_at": "2025-10-27T13:31:03.416425Z",
    "updated_at": "2025-10-27T13:31:03.416443Z",
    "lead_time": 76.693,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:UpdateScenarioApiTestCase.test_update_scenarios",
    "text": "@vcr.use_cassette()\ndef test_update_scenarios(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario with new condition\n    When : I put this dict\n    Then : I get a 200 HTTP response, a dict representing the scenario with the new condition\n    \"\"\"\n    hss = self.client.hss\n    driver = hss.driver\n    scenario = self.any_scenario(hss=hss)\n    condition = DatetimeTempoClimax(1, \"12:00:00\", condition_types.with_datetime)\n    scenario.scenario_type.tempo_condition_type.append(TempoConditionType.ONTHE_AT)\n    scenario.scenario_type.save()\n    new_scenario_info = ScenarioInfo(\n        condition=condition,\n        actions=[\n            scenario.info.actions[0],\n        ],\n        remote_proxy=driver.hss.remote_proxy,\n    )\n    scenario.info = new_scenario_info\n    data = self.any_scenario_data(scenario)\n    last_response = self.when_i_update_scenario(data, scenario.pk)\n    assert_that(last_response.status_code, is_(200), last_response.content)\n    assert_that(last_response.json(), is_(not_none()))\n    assert_that(last_response.json(), has_entry(\"fields\", not_none()))\n    fields = last_response.json()[\"fields\"]\n    assert_that(fields, has_entry(\"condition\", not_none()))\n    assert_that(fields[\"condition\"], has_entry(\"data\", not_none()))\n    assert_that(fields[\"condition\"][\"data\"], has_entry(\"datetime\", new_scenario_info.condition.datetime))",
    "metrics": {
      "line_count": 17,
      "assertion_count": 6,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 82,
    "score": "4",
    "annotator": 1,
    "annotation_id": 82,
    "created_at": "2025-10-27T13:31:51.289276Z",
    "updated_at": "2025-10-27T13:31:51.289287Z",
    "lead_time": 47.696,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/replication/tests/test_serializers.py:RequestSerializerTests.test_serializer",
    "text": "def test_serializer(self) -> None:\n    request = self.any_request(\n        state=request_states.draft, with_attachments=[request_attachments.request_attachment]\n    )\n    serializer = RequestSerializer(request)\n    assert_that(serializer.data, is_(request_data(request=request)))\n    assert_that(serializer.data[\"attachments\"], has_length(request.attachments.count()))\n    assert_that(serializer.data[\"packaging_units\"], has_length(request.packaging_units.count()))\n    assert_that(serializer.data[\"steps\"], has_length(request.steps.count()))\n    assert_that(serializer.data[\"groups\"], has_entries({\"code_1\": not_none()}))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 5,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 83,
    "score": "2",
    "annotator": 1,
    "annotation_id": 83,
    "created_at": "2025-10-27T13:32:07.631054Z",
    "updated_at": "2025-10-27T13:32:07.631064Z",
    "lead_time": 16.179,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/prepaid_account_mangopay/test_order_refund.py:OrderTestCase.test_order_refund__prepaid",
    "text": "def test_order_refund__prepaid(self) -> None:\n    \"\"\"\n    Given an order succeeded with prepaid account\n    When i change state to refund\n    Then order is in refunded state, prepaid account is back to initial balance value\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal)\n    order = self.any_order(\n        user=user, with_prepaid_account=True, payment_method=payment_methods.prepaid_account_mangopay\n    )\n    credits = order.user.personal_prepaid_account.credits\n    order.change_to_refunded()\n    used_credits = order.prepaid_account_used_incl_vat * 100\n    assert_that(order.status, is_(order_states.refunded))\n\n    assert_that(order.user.personal_prepaid_account.credits, equal_to(credits + used_credits))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 84,
    "score": "5",
    "annotator": 1,
    "annotation_id": 84,
    "created_at": "2025-10-27T13:33:12.212554Z",
    "updated_at": "2025-10-27T13:33:12.212570Z",
    "lead_time": 17.087,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/oauth_provider/tests/test_auth.py:TestOAuthDifferentAuthorizationMethods.test_access_token_with_post_request_body",
    "text": "def test_access_token_with_post_request_body(self) -> None:\n    self._request_token(METHOD_POST_REQUEST_BODY)\n    self._authorize_and_access_token_using_form(METHOD_POST_REQUEST_BODY)",
    "metrics": {
      "line_count": 2,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 62,
      "docstring_strength": 0.0
    },
    "id": 85,
    "score": "1",
    "annotator": 1,
    "annotation_id": 85,
    "created_at": "2025-10-27T13:33:50.581854Z",
    "updated_at": "2025-10-27T13:33:50.581869Z",
    "lead_time": 38.224,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/rating/tests/test_hss_rating_config.py:HoneywellHssRatingConfigTestCase.test_hss_rating_config",
    "text": "def test_hss_rating_config(self) -> None:\n    hss = self.client.hss\n\n    hss_rating_config = HssRatingConfigBuilder(hss=hss).get_config()\n\n    assert_that(hss_rating_config.enabled, is_(False))\n    assert_that(hss_rating_config.rating_config, is_(none()))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 86,
    "score": "3",
    "annotator": 1,
    "annotation_id": 86,
    "created_at": "2025-10-27T13:34:11.069100Z",
    "updated_at": "2025-10-27T13:34:11.069116Z",
    "lead_time": 20.341,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/filters/tests/test_tasks.py:FilterTasksTests.test_clean_task_session_noclean",
    "text": "def test_clean_task_session_noclean(self) -> None:\n    \"\"\"\n    Given any filter with session_time > now - creation time\n    When i call clean_session_filter task\n    Then filter is still there\n    \"\"\"\n    request_filter = self.any_request_filter(filter_type=FilterType.SESSION)\n    with now(timezone.now()):\n        request_filter.save()\n    clean_session_filter()\n    assert_that(RequestFilterModel.objects.all().count(), equal_to(1))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 87,
    "score": "5",
    "annotator": 1,
    "annotation_id": 87,
    "created_at": "2025-10-27T13:35:05.981910Z",
    "updated_at": "2025-10-27T13:35:05.981918Z",
    "lead_time": 54.764,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/rating/tests/test_hss_rating_config.py:ClimaxHssRatingConfigTestCase.test_hss_rating_config",
    "text": "def test_hss_rating_config(self) -> None:\n    hss = self.client.hss\n\n    hss_rating_config = HssRatingConfigBuilder(hss=hss).get_config()\n\n    assert_that(hss_rating_config.enabled, is_(not_none()))\n    rating_config = hss_rating_config.rating_config\n    assert_that(rating_config, is_(not_none()))\n    assert_that(rating_config.min_connection_per_week, is_(not_none()))\n    assert_that(rating_config.is_later_option_enabled, is_(not_none()))\n    assert_that(rating_config.later_option_postpone_duration, is_(not_none()))\n    assert_that(rating_config.display_delay_duration, is_(not_none()))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 6,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 88,
    "score": "2",
    "annotator": 1,
    "annotation_id": 88,
    "created_at": "2025-10-27T13:35:19.886614Z",
    "updated_at": "2025-10-27T13:35:41.505952Z",
    "lead_time": 24.628,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_update_scenario_climax.py:UpdateScenarioApiTestCase.test_update_scenarios__incorrect_scenario_type_pk",
    "text": "@vcr.use_cassette()\ndef test_update_scenarios__incorrect_scenario_type_pk(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario with a scenario_type_pk wich not exist\n    When : I put this dict\n    Then : I get a 404 HTTP response\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss)\n    data = self.any_scenario_data(scenario, scenario_type_pk=1234)\n    last_response = self.when_i_update_scenario(data, scenario.pk)\n    assert_that(last_response.status_code, is_(404), last_response.content)",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 4.0
    },
    "id": 89,
    "score": "4",
    "annotator": 1,
    "annotation_id": 89,
    "created_at": "2025-10-27T13:36:06.880197Z",
    "updated_at": "2025-10-27T13:36:06.880215Z",
    "lead_time": 8.542,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/framed/test_planned.py:TeamRequestFramedPermissionBackendTest.test_can_cancel__team_request__with_consideration_period__from_planned",
    "text": "def test_can_cancel__team_request__with_consideration_period__from_planned(self) -> None:\n    \"\"\"\n    Given a state_machine in 'planned' state\n    When i cancel before the notice perioed\n    then permission is false\n    else permission is true\n    \"\"\"\n    for role in {\n        permission_roles.user,\n        permission_roles.supervisor,\n        permission_roles.idea_supervisor,\n        permission_roles.manager,\n        permission_roles.third_party_operator,\n        permission_roles.tms_operator,\n    }:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        first_january = datetime.datetime(2018, 1, 1, 9, 0, 0)\n        with freeze_time(first_january):\n            team_request = self.any_framed_request(creator=self.u2, state=state)\n\n        # the scheduled_time for this test is computed in\n        # iwp_myroad.test.context_managers.NotificationMock line 191\n        # wich corresponds to datetime.datetime(2018, 1, 10, 9, 0, 0)\n\n        with freeze_time(datetime.datetime(2018, 1, 3, 8, 59, 59)):  # Before notice period start\n            assert_that(\n                u1.has_perm(request_permissions.can_cancel, obj=team_request),\n                is_(can_cancel_from_planned_expected_result[role][\"team_request\"]),\n            )\n\n        with freeze_time(datetime.datetime(2018, 1, 3, 9, 0, 0)):  # After notice period start\n            expected_matcher = (\n                is_(can_cancel_from_planned_expected_result[role][\"team_request\"])\n                if role is permission_roles.tms_operator\n                else is_(False)\n            )\n            assert_that(\n                u1.has_perm(request_permissions.can_cancel, obj=team_request),\n                expected_matcher,\n            )",
    "metrics": {
      "line_count": 11,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 5,
      "cyclomatic_complexity": 3,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 5.0
    },
    "id": 90,
    "score": "4",
    "annotator": 1,
    "annotation_id": 90,
    "created_at": "2025-10-27T13:38:30.317819Z",
    "updated_at": "2025-10-27T14:20:32.045651Z",
    "lead_time": 160.49699999999999,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_climax_kiz.py:ListScenarioApiTestCase.test_list_scenarios__incorrect_hss",
    "text": "@vcr.use_cassette()\ndef test_list_scenarios__incorrect_hss(self) -> None:\n    \"\"\"\n    Given : A scenario\n    When : I list scenarios, for an unexistent hss\n    Then : I get a 404 HTTP response\n    \"\"\"\n    self.any_scenario(hss=self.client.hss)\n    last_response = self.when_i_list_scenarios(hss_pk=1234)\n    assert_that(last_response.status_code, is_(404))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 91,
    "score": "4",
    "annotator": 1,
    "annotation_id": 91,
    "created_at": "2025-10-27T13:38:37.743223Z",
    "updated_at": "2025-10-27T13:38:37.743250Z",
    "lead_time": 7.265,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/partners/tests/test_signals.py:BusSignalsTests.test_signals__promotional_campaign_delete",
    "text": "def test_signals__promotional_campaign_delete(self) -> None:\n    promotional_campaign = self.any_promotional_campaign()\n    with mock.patch(\"tw.replication.sites.ReplicationClient.unpublish\") as m:  # noqa: RMS102\n        promotional_campaign.delete()\n    m.assert_called_once()",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 92,
    "score": "1",
    "annotator": 1,
    "annotation_id": 92,
    "created_at": "2025-10-27T13:38:41.537038Z",
    "updated_at": "2025-10-27T13:38:41.537048Z",
    "lead_time": 3.662,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/parameters/test_references.py:ReferenceFormParametersTests.test_invoice_reference_required__submit",
    "text": "def test_invoice_reference_required__submit(self) -> None:\n    \"\"\"\n    Given :\n        - a invoice_reference parameter with required = True\n        - a request in initial state\n    When i validate form (with action = submit) without invoice_reference\n    Then I get an error\n    \"\"\"\n    conf = self.any_global_configuration_from_migration(name=\"request.invoice_reference\")\n    conf.required = True\n    conf.full_clean()\n    conf.save()\n    request = self.any_request(state=request_states.initial, ready_to_submit=False)\n    data = self.any_reference_form_data(request=request)\n    data[\"references-invoice_reference\"] = \"\"\n    form = make_references_form(instance=request, read_only=False, action=form_actions.submit)(\n        instance=request, data=data\n    )\n    assert_that(form.fields[\"invoice_reference\"].required, is_(True))\n    assert_that(form.is_valid(), is_(False))\n    assert_that(form.errors, has_entry(\"invoice_reference\", not_(empty())))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 93,
    "score": "5",
    "annotator": 1,
    "annotation_id": 93,
    "created_at": "2025-10-27T13:39:42.448517Z",
    "updated_at": "2025-10-27T13:39:42.448532Z",
    "lead_time": 60.755,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:CameraActionFormTestCase.test_create_form_off_valid_without_zone",
    "text": "def test_create_form_off_valid_without_zone(self) -> None:\n    data = {\n        \"area\": \"1\",\n        \"zone\": None,\n    }\n\n    form = CreateCameraActionForm(data=data)\n    is_valid = form.is_valid()\n\n    self.assertTrue(is_valid)\n    self.assertEqual(form.to_grammar(), \"a=1&req=img_all\")",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 94,
    "score": "3",
    "annotator": 1,
    "annotation_id": 94,
    "created_at": "2025-10-27T13:40:05.116544Z",
    "updated_at": "2025-10-27T13:40:05.116557Z",
    "lead_time": 22.504,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/teams/loaders/tests/test_team_loaders.py:TeamLoaderTestCase.test_loader",
    "text": "def test_loader(self) -> None:\n    \"\"\"\n    Given a team json and a loader\n    When load json\n    Then team is valid\n    \"\"\"\n    team_msg = load(\"team.json\")\n    team = TeamLoader().on_message(\"iwp.resource.team\", team_msg)\n    assert team\n    assert_that(team.uri.value, is_(team_msg[\"uri\"]))\n    assert_that(team.users.all(), has_length(2))\n    assert_that([user.uri.value for user in team.users.all()], contains_inanyorder(*team_msg[\"data\"][\"users\"]))\n    assert team.site\n    assert_that(team.site.uri, team_msg[\"data\"][\"site\"])",
    "metrics": {
      "line_count": 8,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 70,
      "docstring_strength": 4.0
    },
    "id": 95,
    "score": "4",
    "annotator": 1,
    "annotation_id": 95,
    "created_at": "2025-10-27T13:40:33.984632Z",
    "updated_at": "2025-10-27T13:40:33.984644Z",
    "lead_time": 28.71,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_parsers.py:ParserKiz3PadMobileActionTestCase.test_parse_action_panel_status__on",
    "text": "@vcr.use_cassette()\ndef test_parse_action_panel_status__on(self) -> None:\n    contract = ContractMixin().any_climax_contract()\n    hss = HssMixin().any_hss(user=contract.user, contract=contract, remote_proxy=remote_proxies.climax_kiz)\n    parsed_action = Kiz3PadMobileParser().parse_action(1, \"a=1&m=1\", hss.driver.scenarios.list_scenario_devices())\n    assert_that(parsed_action, instance_of(PanelStatusActionClimax))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 96,
    "score": "3",
    "annotator": 1,
    "annotation_id": 96,
    "created_at": "2025-10-27T13:40:45.360077Z",
    "updated_at": "2025-10-27T13:40:45.360092Z",
    "lead_time": 11.218,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/checkouts/test_retrieve_api.py:CheckoutRetrieveAPITestCase.test_retrieve__not_found",
    "text": "def test_retrieve__not_found(self) -> None:\n    self.client = AuthenticatedClient()\n    self.when_i_retrieve_checkout(checkout_id=1234)\n\n    assert_that(self.last_response, http(404))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 57,
      "docstring_strength": 0.0
    },
    "id": 97,
    "score": "3",
    "annotator": 1,
    "annotation_id": 97,
    "created_at": "2025-10-27T13:40:50.427911Z",
    "updated_at": "2025-10-27T13:40:50.427925Z",
    "lead_time": 4.92,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/test_models.py:MangoPayUserTestCase.test_prepaid_account_amount",
    "text": "def test_prepaid_account_amount(self) -> None:\n    \"\"\"\n    Given a user with a credit pack of 6€ redeemed\n    When i get prepaid account amount\n    Then i get a string == 6€\n    \"\"\"\n    user = self.any_user(with_credits=True)\n    assert_that(user.prepaid_account_amount, is_(\"6.0€\"))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 98,
    "score": "5",
    "annotator": 1,
    "annotation_id": 98,
    "created_at": "2025-10-27T13:41:12.139857Z",
    "updated_at": "2025-10-27T13:41:12.139875Z",
    "lead_time": 21.561,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/transitions/request/framed/test_add_um.py:FramedStateMachineAddUmTests.test_add_um__does_not_increment_request_version",
    "text": "def test_add_um__does_not_increment_request_version(self) -> None:\n    request = self.any_framed_request(state=request_states.initial)\n    request_version = request.version\n    request = request.state_machine(user=request.creator).add_um().request\n    assert_that(request.version == request_version)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 99,
    "score": "3",
    "annotator": 1,
    "annotation_id": 99,
    "created_at": "2025-10-27T13:41:22.376221Z",
    "updated_at": "2025-10-27T13:41:22.376237Z",
    "lead_time": 2.572,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_coders_honeywell.py:DriverHoneywellScenarioCodecTestCase.test_encode__incorrect_condition",
    "text": "@vcr.use_cassette()\ndef test_encode__incorrect_condition(self) -> None:\n    \"\"\"\n    Given a scenario with a condition with incorrect values\n    When I encode this scenario\n    Then i get an exception describing the value which is incorrect\n    \"\"\"\n    contract = ContractMixin().any_honeywell_contract(contract_number=digital_alchon_account.contract_numbers[0])\n    hss = HssMixin().any_hss(user=contract.user, contract=contract, remote_proxy=remote_proxies.honeywell)\n    condition = PanelStatusConditionHoneywell(\"nok\", condition_types.panel_status)\n    scenario_info = self.any_scenario_info(driver=hss.driver, condition=condition)\n    scenario = self.any_scenario(hss, state=states.draft, scenario_info=scenario_info, save=False)\n    driver_decoder = self.any_driver_codec(hss.driver)\n    with self.assertRaises(serializers.ValidationError) as e:\n        driver_decoder.encode(scenario)\n    assert_that(e.exception.detail, has_entry(\"condition\", not_none()))\n    assert_that(e.exception.detail[\"condition\"], has_entry(\"status\", not_none()))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 100,
    "score": "4",
    "annotator": 1,
    "annotation_id": 100,
    "created_at": "2025-10-27T13:41:39.052114Z",
    "updated_at": "2025-10-27T13:41:39.052130Z",
    "lead_time": 16.529,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/climax/drivers/tests/test_driver_hss.py:HssDriverModelTestCase.test_keypads_driver_not_implemented",
    "text": "def test_keypads_driver_not_implemented(self) -> None:\n    hss = self.any_hss()\n    driver = HssDriver(hss)\n    with self.assertRaises(NotImplementedError):\n        driver.keypads",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 50,
      "docstring_strength": 0.0
    },
    "id": 101,
    "score": "3",
    "annotator": 1,
    "annotation_id": 101,
    "created_at": "2025-10-27T13:52:18.128198Z",
    "updated_at": "2025-10-27T13:52:18.128213Z",
    "lead_time": 5.642,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_duplicate_form.py:IssueMYR271RequestTypeConfigurationTests.test_myr_271__other_field_changed",
    "text": "def test_myr_271__other_field_changed(self) -> None:\n    \"\"\"\n    Given\n        - two fields configuration\n            - One for shipping_type\n            - One for invoice_reference\n        - a request with not default shipping_type value\n    When I change invoice_reference configuration & duplicate the request\n    Then\n        - Value for shipping_type did not change\n        - Value for invoice_reference is the default value\n    \"\"\"\n    self.any_request_type_site_value(key=\"default-shipping-value\", conf=self.conf, is_default=True)\n    self.any_request_type_site_value(key=\"other-shipping-value\", conf=self.conf, is_default=False)\n\n    invoice_definition = Definition.objects.get(name=\"request.invoice_reference\")\n    invoice_conf = self.any_request_type_site_configuration(\n        definition=invoice_definition, site=self.site, request_type=self.request_type\n    )\n    value = self.any_request_type_site_value(key=\"default-invoice-value\", conf=invoice_conf, is_default=True)\n    request = self.any_framed_request(\n        site=self.site, creator=self.client.user, shipping_type=\"other-shipping-value\"\n    )\n    value.key = \"new-default-invoice-value\"\n    value.save()\n\n    with self.assertRaises(RedirectException) as e:\n        RequestActionPage.get(\n            client=self.client,\n            url=reverse(\n                \"www:request-action-duplicate\", kwargs={\"site_slug\": request.site.slug, \"pk\": request.uuid}\n            ),\n        )\n    assert_that(Request.objects.count(), is_(2))\n    duplicated_request_pk = e.exception.response.url.split(\"/\")[-2]\n    duplicated = Request.objects.get(pk=duplicated_request_pk)\n    assert_that(duplicated.shipping_type, is_(\"other-shipping-value\"))\n    assert_that(duplicated.invoice_reference, is_(\"new-default-invoice-value\"))",
    "metrics": {
      "line_count": 15,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 10.0
    },
    "id": 102,
    "score": "5",
    "annotator": 1,
    "annotation_id": 102,
    "created_at": "2025-10-27T13:55:14.717782Z",
    "updated_at": "2025-10-27T13:55:14.717794Z",
    "lead_time": 176.433,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/amqp/tests/test_serializers.py:AMQPSerializersTests.test_refresh_event_serializer_0039911",
    "text": "@vcr.use_cassette()\ndef test_refresh_event_serializer_0039911(self) -> None:\n    \"\"\"\n    Given a user with a contract without hss\n    When refresh event\n    Then no error\n    \"\"\"\n    user = self.any_user(email=\"digitaltikiz3@yopmail.com\", password=\"123456\", subscriber_id=\"9201733248104\")\n    serializer = RefreshEventSerializer(data={\"subscriber_id\": user.source_id})\n    serializer.is_valid(raise_exception=True)\n    assert_that(serializer.validated_data, has_entry(\"users\", [user]))\n    serializer.process_event()",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 103,
    "score": "4",
    "annotator": 1,
    "annotation_id": 103,
    "created_at": "2025-10-27T13:55:22.956639Z",
    "updated_at": "2025-10-27T13:55:22.956659Z",
    "lead_time": 8.084,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_model.py:RequestExportAttachmentTest.test_download_export",
    "text": "def test_download_export(self) -> None:\n    \"\"\"\n    Given a request export in complete state with attachment\n    When I load export\n    Then 200 OK\n    \"\"\"\n    request_export = self.any_request_export(creator=self.client.user, state=request_export_states.completed)\n    assert request_export.file\n    attachment_file = request_export.file.file\n    assert attachment_file\n    self.when_i_load_export(request_export=request_export)\n    assert_that(self.last_response, is_(http(200)))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 104,
    "score": "5",
    "annotator": 1,
    "annotation_id": 104,
    "created_at": "2025-10-27T13:55:49.956954Z",
    "updated_at": "2025-10-27T13:55:49.956970Z",
    "lead_time": 26.848,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_attachments_form.py:AttachmentFormTests.test_add_attachments__known_attachment",
    "text": "def test_add_attachments__known_attachment(self) -> None:\n    \"\"\"\n    Given any existing attachment with file\n    When I valid and save formset with form data for the same attachment file\n    Then attachment is updated\n    \"\"\"\n    request = self.any_request(state=\"draft\", ready_to_submit=False)\n    attachment = self.any_attachment(user=request.creator)\n    attachment_file = self.any_attachment_file(user=request.creator)\n    attachment.file = attachment_file\n    attachment.save()\n    formset = make_attachments_formset(instance=request, user=request.creator, read_only=False)(\n        data={\n            \"attachments-TOTAL_FORMS\": 1,\n            \"attachments-INITIAL_FORMS\": 0,\n            \"attachments-MIN_NUM_FORMS\": 0,\n            \"attachments-MAX_NUM_FORMS\": 1000,\n            \"attachments-0-description\": \"test\",\n            \"attachments-0-file\": attachment_file.pk,\n        },\n        form_kwargs={\"user\": request.creator},\n    )\n    assert_that(formset.is_valid(), is_(True))\n    formset.save()\n    assert_that(request.attachments.all(), has_length(1))\n    assert_that(request.attachments.first().pk, is_(attachment.pk))\n    attachment.refresh_from_db()\n    assert_that(attachment.description, is_(\"test\"))\n    assert_that(attachment.file, is_(attachment_file))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 5,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 105,
    "score": "4",
    "annotator": 1,
    "annotation_id": 105,
    "created_at": "2025-10-27T13:58:40.475361Z",
    "updated_at": "2025-10-27T13:58:40.475398Z",
    "lead_time": 170.38,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/tests/test_models.py:PrepaidAccountTests.test_check_credits_value",
    "text": "def test_check_credits_value(self) -> None:\n    prepaid_account = self.any_prepaid_account_personal()\n    prepaid_account.credits = 1650\n    prepaid_account.save()\n\n    assert_that(prepaid_account.price_incl_vat, is_(decimal.Decimal(\"16.50\")))\n    assert_that(prepaid_account.price_excl_vat, is_(decimal.Decimal(\"13.75\")))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 106,
    "score": "3",
    "annotator": 1,
    "annotation_id": 106,
    "created_at": "2025-10-27T13:58:52.451598Z",
    "updated_at": "2025-10-27T13:58:52.451613Z",
    "lead_time": 11.829,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/forgotpassword/tests/test_validators.py:ValidatorsTestCase.test_old_password_valid",
    "text": "def test_old_password_valid(self) -> None:\n    \"\"\"\n    Given user with a password,\n    When i validate a new password,\n    The validation passes\n    \"\"\"\n    user = self.any_user(with_consumer=False)\n    validator = OldPasswordValidator()\n    call = calling(validator.validate).with_args(password=\"plop\", user=user)\n    assert_that(call, not_(raises(ValidationError)))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 107,
    "score": "5",
    "annotator": 1,
    "annotation_id": 107,
    "created_at": "2025-10-27T13:59:13.875752Z",
    "updated_at": "2025-10-27T13:59:13.875777Z",
    "lead_time": 21.269,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/tests/test_tasks.py:CleanupAdminLogTests.test_cleanup_admin_log",
    "text": "def test_cleanup_admin_log(self) -> None:\n    \"\"\"\n    Given an old and recent log\n    When I cleanup\n    Then old log delete\n    \"\"\"\n    user_ct = ContentType.objects.get_for_model(self.user)\n    old_log = LogEntry.objects.log_action(\n        user_id=self.user.pk,\n        content_type_id=user_ct.pk,\n        object_id=str(self.user.pk),\n        object_repr=str(self.user),\n        action_flag=ADDITION,\n        change_message=\"Test old log\",\n    )\n    one_year_ago = now() - timedelta(days=366)\n    old_log = LogEntry.objects.latest(\"id\")  # get the created log\n    old_log.action_time = one_year_ago\n    old_log.save()\n    new_log = LogEntry.objects.log_action(\n        user_id=self.user.pk,\n        content_type_id=user_ct.pk,\n        object_id=str(self.user.pk),\n        object_repr=str(self.user),\n        action_flag=ADDITION,\n        change_message=\"Test old log\",\n    )\n    cleanup_admin_log()\n    new_log.refresh_from_db()\n    assert_that(calling(old_log.refresh_from_db), raises(LogEntry.DoesNotExist))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 66,
      "docstring_strength": 4.0
    },
    "id": 108,
    "score": "5",
    "annotator": 1,
    "annotation_id": 108,
    "created_at": "2025-10-27T14:01:31.015132Z",
    "updated_at": "2025-10-27T14:01:31.015151Z",
    "lead_time": 136.987,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/test_utils.py:FileUriTests.test_uri_bad_scheme",
    "text": "def test_uri_bad_scheme(self) -> None:\n    \"\"\"\n    Given any file uri with bad scheme\n    Then ValidationError is raised\n    \"\"\"\n    with self.assertRaises(ValidationError):\n        FileUri(\"anyscheme://hostname/path/to/specific/file.txt\")",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 3.0
    },
    "id": 109,
    "score": "4",
    "annotator": 1,
    "annotation_id": 109,
    "created_at": "2025-10-27T14:02:21.707328Z",
    "updated_at": "2025-10-27T14:05:02.170437Z",
    "lead_time": 123.78500000000001,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_blinds.py:ListTests.test_list",
    "text": "@vcr.use_cassette()\ndef test_list(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with ClimaxKiz panel\n        - a HssDriver\n    When:\n        - I list blinds\n    Then:\n        - I get a list of Blinds\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    driver = driver_factory.get_driver(hss)\n    blinds = driver.blinds.list()\n    assert_that(blinds, not_(empty()))\n    assert_that(blinds[0].uuid, is_(not_none()))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 8.0
    },
    "id": 110,
    "score": "4",
    "annotator": 1,
    "annotation_id": 110,
    "created_at": "2025-10-27T14:04:19.194468Z",
    "updated_at": "2025-10-27T14:04:19.194480Z",
    "lead_time": 38.278,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_quoted.py:QuotedRequestActionTests.test_charter_plan",
    "text": "def test_charter_plan(self) -> None:\n    request = self.any_quoted_request(state=request_states._3rd_party_transmission, creator=self.client.user)\n    page = RequestActionPage.get(\n        client=self.client, site_slug=request.site.slug, pk=request.pk\n    ).form.charter_plan()\n    assert_that(page, instance_of(RequestCharterPlanPage))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 111,
    "score": "3",
    "annotator": 1,
    "annotation_id": 111,
    "created_at": "2025-10-27T14:04:40.701473Z",
    "updated_at": "2025-10-27T14:04:40.701490Z",
    "lead_time": 21.36,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_promocode_type.py:OrderPromocodeTypeTests.test_global_discount",
    "text": "def test_global_discount(self) -> None:\n    \"\"\"\n    Given any order with global discount promocode\n    Then promocode_type is cart_discount_percentage\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    product = self.any_product()\n    promocode = self.any_promocode(profile=promocode_profiles.washing_discount, version=1)\n    promocode.products.add(product)\n\n    deal = self.any_deal(washing_program=self.any_washing_program(product=product))\n\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n    cart.update(promocode=promocode)\n\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n    assert_that(order.promocode_type, is_(\"cart_discount_percentage\"))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 9,
      "dc_coherence_codet5": 71,
      "docstring_strength": 3.0
    },
    "id": 112,
    "score": "4",
    "annotator": 1,
    "annotation_id": 150,
    "created_at": "2025-10-27T14:49:56.653994Z",
    "updated_at": "2025-10-27T14:49:56.654010Z",
    "lead_time": 61.84400000000001,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_list/test_list.py:RequestListPageTests.test_click_request_notifications_preferences",
    "text": "def test_click_request_notifications_preferences(self) -> None:\n    user = self.any_user(roles=[permission_roles.manager, permission_roles.user])\n    request = self.any_request(creator=user, state=request_states.completed)\n    self.client = AuthenticatedClient(user=user)\n    page = (\n        RequestListPage.get(client=self.client, site_slug=request.site.slug)\n        .requests_list[0]\n        .notifications_preferences.click(next_page_class=RequestNotificationsPage)\n    )\n    assert_that(page, is_(RequestNotificationsPage))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 113,
    "score": "3",
    "annotator": 1,
    "annotation_id": 112,
    "created_at": "2025-10-27T14:08:06.597862Z",
    "updated_at": "2025-10-27T14:08:06.597878Z",
    "lead_time": 30.19,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/cart_items/test_add_api.py:AddCartItemAPITestCase.test_add__from_cross_selling",
    "text": "def test_add__from_cross_selling(self) -> None:\n    \"\"\"\n    Given\n        - a deal\n        - a cart\n    When i add wiht from_cross_selling is True\n    Then\n        - 201 CREATED\n        - cart item from_cross_selling is True\n    \"\"\"\n    deal = self.any_deal()\n\n    self.client = AuthenticatedClient()\n    cart = self.any_cart(user=self.client.user, api_version=API_VERSION)\n\n    self.when_i_create_cart_item(\n        cart_id=cart.id,\n        item_type=create_cart_item_types.deal,\n        reference=deal.id,\n        quantity=1,\n        from_cross_selling=True,\n    )\n\n    assert_that(self.last_response, http(201))\n    assert_that(cart.cartitem_set.get().from_cross_selling, is_(True))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 84,
      "docstring_strength": 8.0
    },
    "id": 114,
    "score": "5",
    "annotator": 1,
    "annotation_id": 113,
    "created_at": "2025-10-27T14:08:55.394314Z",
    "updated_at": "2025-10-27T14:08:55.394325Z",
    "lead_time": 48.633,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/forgotpassword/api/v20/tests/test_forms.py:UpdateRegisterFormTestCase.test_register__update__password",
    "text": "def test_register__update__password(self) -> None:\n    \"\"\"\n    Given a registered user\n    When i register with new password\n    Then user updated field has changed\n    \"\"\"\n    user = self.any_user()\n    user.mobile_phone_to_reset_password_validation_code = \"1234\"\n    user.save()\n    user.refresh_from_db()\n\n    new_password = \"New_passw0rd*\"\n    register_form = UpdatePasswordForm(\n        data={\n            \"mobile_phone\": user.mobile_phone,\n            \"new_password\": new_password,\n            \"code\": \"1234\",\n        }\n    )\n\n    assert_that(register_form.is_valid(), is_(True))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 115,
    "score": "3",
    "annotator": 1,
    "annotation_id": 114,
    "created_at": "2025-10-27T14:13:47.574181Z",
    "updated_at": "2025-10-27T14:46:16.935725Z",
    "lead_time": 380.99,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/serializers/tests/test_powerswitches.py:UpdateResponseSerializerTests.test_serializer__invalid",
    "text": "def test_serializer__invalid(self) -> None:\n    climax_panel_cond_post_json = load(\"climax_panel_device_post_invalid.json\")\n    serializer = UpdateResponseSerializer(data=climax_panel_cond_post_json)\n    assert_that(calling(serializer.is_valid).with_args(raise_exception=True), raises(ValidationError))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 116,
    "score": "3",
    "annotator": 1,
    "annotation_id": 115,
    "created_at": "2025-10-27T14:13:55.247214Z",
    "updated_at": "2025-10-27T14:13:55.247231Z",
    "lead_time": 7.502,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/importers/tests/test_model.py:WashingProgramImporterTestCase.test_processing_catalogue_file_none",
    "text": "def test_processing_catalogue_file_none(self) -> None:\n    wp_importer = self.any_washing_program_importer()\n    wp_importer.state = states.processing\n    wp_importer.catalogue_file.delete()\n    with self.assertRaises(ValidationError) as e:\n        wp_importer.clean()\n    assert_that(e.exception.error_dict, has_entry(\"catalogue_file\", is_(not_none())))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 117,
    "score": "3",
    "annotator": 1,
    "annotation_id": 116,
    "created_at": "2025-10-27T14:14:02.535864Z",
    "updated_at": "2025-10-27T14:14:02.535881Z",
    "lead_time": 7.133,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/faq/api/v10/tests/test_views.py:ArticleAPITestCase.test_get_article__anonymous_user",
    "text": "def test_get_article__anonymous_user(self) -> None:\n    \"\"\"\n    Given any article and an anonymous user\n    When I get article\n    then I get\n        an HTTP 200\n        containing one article\n    \"\"\"\n    article = self.any_article()\n\n    self.client = AnonymousClient()\n    self.when_i_get_article(slug=article.slug)\n\n    assert_that(self.last_response.status_code, is_(200))\n    assert_that(self.last_response.data[\"pk\"], is_(article.uuid))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 6.0
    },
    "id": 118,
    "score": "5",
    "annotator": 1,
    "annotation_id": 117,
    "created_at": "2025-10-27T14:14:13.922824Z",
    "updated_at": "2025-10-27T14:14:13.922837Z",
    "lead_time": 11.223,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/bus/tests/test_serializers.py:BrandSerializerTest.test_brand_serializer",
    "text": "def test_brand_serializer(self) -> None:\n    autowash = load(\"autowash.json\")\n    data = autowash[\"data\"][\"brand\"]\n\n    serializer = BrandSerializer(data=data)\n    serializer.is_valid(raise_exception=True)\n\n    assert_that(\n        serializer.validated_data,\n        has_entries(\n            {\n                \"identifier\": is_(uuid.UUID(data[\"identifier\"])),\n                \"name\": is_(data[\"name\"]),\n                \"logo\": is_(data[\"logo\"]),\n                \"zone_context\": is_(data[\"zone_context\"]),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 38,
      "docstring_strength": 0.0
    },
    "id": 119,
    "score": "3",
    "annotator": 1,
    "annotation_id": 118,
    "created_at": "2025-10-27T14:14:18.194977Z",
    "updated_at": "2025-10-27T14:14:18.194993Z",
    "lead_time": 4.121,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/test_models.py:MangoPayUserTestCase.test_new_user_notifiers_debug__no_notifier",
    "text": "def test_new_user_notifiers_debug__no_notifier(self) -> None:\n    user = self.any_user()\n    assert_that(user.get_new_user_notifiers_debug, is_(\"Règle J+N :  Aucun notifier\"))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 49,
      "docstring_strength": 0.0
    },
    "id": 120,
    "score": "3",
    "annotator": 1,
    "annotation_id": 119,
    "created_at": "2025-10-27T14:15:00.529933Z",
    "updated_at": "2025-10-27T14:15:00.529944Z",
    "lead_time": 42.179,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v70/tests/test_api_deactivate_user.py:RPCUserAnonymizationTests.test_deactivate_from_twip_web",
    "text": "def test_deactivate_from_twip_web(self) -> None:\n    with transaction.atomic():\n        fixtures = load_fixture_pack(\"default\")\n    user = fixtures[\"resource.tw.user\"][0]\n    consumer = self.any_consumer(profile=consumer_profiles.twip_web)\n    user.consumer_set.set([consumer])\n    self.client = AuthenticatedClient(user=user, consumer=consumer)\n    reason = \"My specific reason\"\n    self.when_i_deactivate_account(reason=reason)\n    self.client.user.refresh_from_db()\n\n    assert_that(self.client.user.is_active, is_(False))\n    assert_that(self.client.user.mobile_phone, is_(\"\"))\n    assert_that(self.client.user.mobile_phone_to_verify, is_(\"\"))\n    assert_that(self.client.user.mobile_phone_is_verified, is_(False))\n    assert_that(self.client.user.allow_newsletter, is_(False))\n    assert_that(self.client.user.allow_crm, is_(False))\n    assert_that(self.client.user.gdpr_comment, is_(f\"demande de suppression de compte via w@w - {reason}\"))\n    assert_that(self.client.user.anonymized_reason, is_(AnonymizedReason.BY_CUSTOMER.value))\n    assert_that(Token.objects.filter(user=self.client.user).all(), empty())",
    "metrics": {
      "line_count": 18,
      "assertion_count": 9,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 121,
    "score": "2",
    "annotator": 1,
    "annotation_id": 120,
    "created_at": "2025-10-27T14:15:42.874933Z",
    "updated_at": "2025-10-27T14:15:42.874947Z",
    "lead_time": 42.185,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/credits/tests/test_state_machines.py:CreditsPackSchedulerStateMachineTests.test_states",
    "text": "def test_states(self) -> None:\n    for state in cp_scheduler_states.all:\n        with self.subTest(state=state):\n            cp_scheduler = self.any_credits_pack_scheduler(state=state)\n            assert_that(cp_scheduler.state, is_(state))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 122,
    "score": "3",
    "annotator": 1,
    "annotation_id": 121,
    "created_at": "2025-10-27T14:15:49.401288Z",
    "updated_at": "2025-10-27T14:15:49.401301Z",
    "lead_time": 6.382,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/imt/tests/test_driver.py:ReadUserTests.test_process_user_response__json_decode_error",
    "text": "@vcr.use_cassette()\ndef test_process_user_response__json_decode_error(self) -> None:\n    driver = IMTDriver()\n    account = default_climax_account\n    with mock.patch(\"requests.Response.json\", side_effect=JSONDecodeError(\"test\", \"test\", 0)):  # noqa: RMS102\n        assert_that(\n            calling(driver.read_user).with_args(\n                country_code=account.country_code, subscriber_id=account.subscriber_id\n            ),\n            raises(AuthenticationException),\n        )",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 38,
      "docstring_strength": 0.0
    },
    "id": 123,
    "score": "1",
    "annotator": 1,
    "annotation_id": 122,
    "created_at": "2025-10-27T14:15:54.639165Z",
    "updated_at": "2025-10-27T14:15:54.639183Z",
    "lead_time": 5.084,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/www/tests/test_registration.py:RegistrationTests.test_submit_form__password_special_char",
    "text": "@vcr.use_cassette()\ndef test_submit_form__password_special_char(self) -> None:\n    \"\"\" \"\n    Given a valid delegation\n    When I submit the resgistration form with a valid email and a password with special char\n    Then ok\n    \"\"\"\n    delegation = self.any_delegation(enabled=True)\n    form = RegistrationPage.get(client=Client(), token=delegation.token).form\n    page = form.submit(data={\"email\": \"elbout@test.com\", \"password\": \"P=ssw0rd\"})\n    assert_that(\n        page.initial_response.wsgi_request.path,\n        is_(reverse(\"www:congratulations\", kwargs={\"token\": delegation.token})),\n    )",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 124,
    "score": "4",
    "annotator": 1,
    "annotation_id": 123,
    "created_at": "2025-10-27T14:16:16.623525Z",
    "updated_at": "2025-10-27T14:16:20.774750Z",
    "lead_time": 23.768,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v71/tests/orders/test_api_list.py:ListOrderAPITestCase.test_list__frauder_by_phone_validation",
    "text": "def test_list__frauder_by_phone_validation(self) -> None:\n    \"\"\"\n    Given :\n        - an order\n        - a user frauder by phone validation\n    When I list\n    Then I get 403\n    \"\"\"\n    self.client = AuthenticatedClient()\n    self.client.user.is_frauder = True\n    self.client.user.frauder_reason = frauder_reasons.phone_validation_fail\n    self.client.user.last_frauder_update = timezone.now()\n\n    self.any_order(user=self.client.user, api_version=self.API_VERSION)\n\n    self.when_i_list_order()\n\n    assert_that(self.last_response.status_code, is_(403))\n    assert_that(\n        self.last_response.json(),\n        has_entry(\n            \"detail\",\n            \"\"\"Par mesure de sécurité, votre compte a été suspendu pendant 24h. \\nSi vous souhaitez le réactiver, vous pouvez nous contacter via la rubrique “A propos” > “Aide et suggestions” de l’application.\"\"\",  # noqa\",\n        ),\n    )",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 6.0
    },
    "id": 125,
    "score": "5",
    "annotator": 1,
    "annotation_id": 124,
    "created_at": "2025-10-27T14:16:46.084102Z",
    "updated_at": "2025-10-27T14:16:46.084121Z",
    "lead_time": 22.635,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_pu.py:PackagingUnitTests.test_properties",
    "text": "def test_properties(self) -> None:\n    pu = self.any_packaging_unit()\n    assert_that(str(pu), anything())\n    assert_that(pu.uri, is_(Uri(f\"myroad://request/{str(pu.request_id)}/packaging_unit/{pu.identifier}\")))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 48,
      "docstring_strength": 0.0
    },
    "id": 126,
    "score": "3",
    "annotator": 1,
    "annotation_id": 125,
    "created_at": "2025-10-27T14:16:57.136001Z",
    "updated_at": "2025-10-27T14:16:57.136017Z",
    "lead_time": 10.888,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/climax_kiz/drivers/tests/test_captures.py:TakeCapture.test_take_capture_sync",
    "text": "@vcr.use_cassette(match_on=[\"vcr_take_capture_with_hss_matcher\"])\ndef test_take_capture_sync(self) -> None:\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    climax_camera = self.any_climax_camera(hss=hss)\n    camera = climax_camera.to_generic()\n    filename = self.when_i_take_capture_sync(driver=hss.driver, camera=camera)\n    image = hss.driver.captures.get(filename=filename)\n    assert_that(image, is_(not_none()))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 127,
    "score": "4",
    "annotator": 1,
    "annotation_id": 126,
    "created_at": "2025-10-27T14:17:05.062977Z",
    "updated_at": "2025-10-27T14:17:05.062991Z",
    "lead_time": 7.781,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/providers/tests/twip_free/test_checkout_transitions.py:TwipFreePaymentMethodProviderTestCase.test_checkout__missing_vehicle_to_ready",
    "text": "def test_checkout__missing_vehicle_to_ready(self) -> None:\n    \"\"\"\n    Given a TWIP free checkout in pending state\n    When I refresh checkout\n    Then checkout is ready and valid\n    \"\"\"\n    user = self.any_user()\n    checkout = self.any_checkout(\n        user=user, state=checkout_states.pending, payment_method=payment_methods.twip_free\n    )\n    with transaction.atomic():\n        checkout.refresh(consumer=checkout.cart.user.consumer_set.first())\n    assert_that(checkout.state, equal_to(checkout_states.missing_vehicle))\n    self.any_user_vehicle(user=user)\n    with transaction.atomic():\n        checkout.refresh(consumer=checkout.cart.user.consumer_set.first())\n    assert_that(checkout.state, equal_to(checkout_states.ready))\n    assert_that(checkout.order_id, none())",
    "metrics": {
      "line_count": 10,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 20,
      "dc_coherence_codet5": 71,
      "docstring_strength": 4.0
    },
    "id": 128,
    "score": "3",
    "annotator": 1,
    "annotation_id": 127,
    "created_at": "2025-10-27T14:25:03.075630Z",
    "updated_at": "2025-10-27T14:25:03.075639Z",
    "lead_time": 225.916,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestModelTests.test_validation_type__update__on_request_type_update",
    "text": "def test_validation_type__update__on_request_type_update(self) -> None:\n    \"\"\"\n    Given\n        a request r1 on draft state with validation 1\n        a request r2 on tms_transmission state with validation 1\n    When i update request type validation type to 2\n    Then\n        r1 validation type is new one\n        r2 validation type is old one\n    \"\"\"\n    site = self.any_site()\n    r1 = self.any_request(site=site, state=request_states.draft)\n    r2 = self.any_request(site=site, state=request_states.tms_transmission)\n    request_type = site.requesttype_set.get(name=r1.type)\n    old_validation_type = request_type.validation_type\n    assert r1.validation_type == r2.validation_type\n\n    new_validation_type = validation_types.all.difference(set(old_validation_type)).pop()\n    request_type.validation_type = new_validation_type\n    request_type.save()\n\n    r1.refresh_from_db()\n    r2.refresh_from_db()\n    assert_that(r1.validation_type, is_(new_validation_type))\n    assert_that(r2.validation_type, is_(old_validation_type))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 81,
      "docstring_strength": 8.0
    },
    "id": 129,
    "score": "5",
    "annotator": 1,
    "annotation_id": 128,
    "created_at": "2025-10-27T14:26:46.303857Z",
    "updated_at": "2025-10-27T14:26:46.303876Z",
    "lead_time": 103.088,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_list_scenario.py:LisTScenarioAPITests.test_list_scenario_without_master_scenario",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_without_master_scenario(self) -> None:\n    \"\"\"\n    Given a master scenario with climax and maia scenario\n    Given a master scenario with only a climax scenario\n    When I list scenario\n    Then 200\n    Then 2 scenario data\n    \"\"\"\n    hss = self.any_hss()\n    ScenarioMixin().any_scenario(hss=hss)\n    last_response = self.when_i_list_scenarios(hss_pk=hss.pk)\n\n    assert_that(last_response.status_code, is_(200))\n    assert_that(last_response.json(), has_length(1))\n    assert_that(last_response.json(), has_items(scenario_pmf_data()))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 6.0
    },
    "id": 130,
    "score": "4",
    "annotator": 1,
    "annotation_id": 129,
    "created_at": "2025-10-27T14:26:53.844007Z",
    "updated_at": "2025-10-27T14:26:53.844022Z",
    "lead_time": 7.379,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_orders.py:OrderTestCase.test_order__from_cross_selling",
    "text": "def test_order__from_cross_selling(self) -> None:\n    \"\"\"\n    Given an order with a deal for a washing program\n    When I complete this order with from_cross_selling = True\n    Then the order item from_cross_selling is True\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    wp = self.any_washing_program(profile=washing_program_profiles.kleen)\n    deal = self.any_deal(washing_program=wp)\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal, from_cross_selling=True)\n\n    order = self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n\n    assert_that(order.orderitem_first.from_cross_selling, is_(True))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 4.0
    },
    "id": 131,
    "score": "5",
    "annotator": 1,
    "annotation_id": 130,
    "created_at": "2025-10-27T14:27:18.675371Z",
    "updated_at": "2025-10-27T14:27:18.675381Z",
    "lead_time": 24.677,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_admin.py:OrderAdminActionTests.test_force_to_error",
    "text": "def test_force_to_error(self) -> None:\n    user = self.any_user(mangopay_card=mangopay_cards.normal)\n    order = self.any_order(payment_method=payment_methods.mangopay, refundable=True, user=user)\n\n    self.when_i_post_action(order, \"force_to_error\")\n    order.refresh_from_db()\n    assert_that(order.status, is_(order_states.failed))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 45,
      "docstring_strength": 0.0
    },
    "id": 132,
    "score": "3",
    "annotator": 1,
    "annotation_id": 131,
    "created_at": "2025-10-27T14:27:23.695945Z",
    "updated_at": "2025-10-27T14:27:23.695961Z",
    "lead_time": 4.881,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_hss_api.py:HSSAPITests.test_read_hss__with_bad_contract",
    "text": "def test_read_hss__with_bad_contract(self) -> None:\n    \"\"\"\n    Given : A logged in User with email, an HSS with bad contract\n    When : I read infos of this HSS\n    Then : status code of the response is 200\n    Then : hss support codes is False\n    Then : hss support partial mode is False\n    \"\"\"\n    hss = self.client.hss\n    hss.site.contract.capabilities = []\n    hss.site.contract.save()\n    self.when_i_read_hss(hss)\n    assert_that(self.last_response.status_code, is_(200))\n    hss.refresh_from_db()\n    assert_that(hss.support_codes, is_(False))\n    assert_that(hss.support_partial_mode, is_(False))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 133,
    "score": "5",
    "annotator": 1,
    "annotation_id": 132,
    "created_at": "2025-10-27T14:27:34.108950Z",
    "updated_at": "2025-10-27T14:27:34.108966Z",
    "lead_time": 10.263,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/request_update_steps/test_step_form.py:StepFormTests.test_form__requested_time__timezone",
    "text": "def test_form__requested_time__timezone(self) -> None:\n    request = self.any_request(state=request_states.draft, ready_to_submit=True)\n    step = request.steps.first()\n    data = self.any_step_form_data(steps=request.steps.all())\n    data[\"steps-0-timezone\"] = \"Europe/Moscow\"\n    data_date = request.creation_time + datetime.timedelta(days=1)\n    data[\"steps-0-requested_time\"] = data_date\n    data[\"steps-1-requested_time\"] = data_date\n    formset = make_step_formset_class(instance=request, user=request.creator)(instance=request, data=data)\n    assert_that(formset.is_valid(), is_(True))\n    formset.save()\n    step.refresh_from_db()\n    tz = ZoneInfo(data[\"steps-0-timezone\"])\n    assert_that(step.requested_time, is_(data_date.replace(tzinfo=tz)))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 134,
    "score": "3",
    "annotator": 1,
    "annotation_id": 133,
    "created_at": "2025-10-27T14:27:57.141790Z",
    "updated_at": "2025-10-27T14:27:57.141807Z",
    "lead_time": 22.881,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_delegation_api.py:UpdateDelegationTests.test_list_delegations_role_full",
    "text": "def test_list_delegations_role_full(self) -> None:\n    \"\"\"\n    Given a hss with a delegation with full role\n    When I list captures\n    Then I get 200\n    \"\"\"\n    hss = self.client.hss\n    self.client = HoneywellAPIClient()\n    DelegationMixin().any_delegation(\n        contract=hss.site.contract, enabled=True, role=roles.full, user=self.client.user\n    )\n    self.when_i_list_delegations(hss_pk=hss.pk)\n    assert_that(self.last_response.status_code, is_(200))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 4.0
    },
    "id": 135,
    "score": "5",
    "annotator": 1,
    "annotation_id": 134,
    "created_at": "2025-10-27T14:28:17.454288Z",
    "updated_at": "2025-10-27T14:28:17.454304Z",
    "lead_time": 20.174,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_item.py:CartItemModelTestCase.test_remove_common_cart_item__with__promotional_offer__product_voucher",
    "text": "def test_remove_common_cart_item__with__promotional_offer__product_voucher(self) -> None:\n    \"\"\"\n    Given a user with:\n        - a 3 products voucher for P1\n        - a promotional offer requiring P1 offering P2\n        - a common deal\n    When I remove the common deal\n    Then I have 3 washing program P1 offered and 1 washing program P2 with quantity 3\n    \"\"\"\n    discounted_washing_program = self.any_washing_program(\n        washing_type_specific=washing_program_types.vacuum_cleaner, station=self.wp.station\n    )\n    self.any_product_voucher(\n        product_voucher_account=self.user.product_voucher_account_set.first(), product=self.product\n    )\n    self.any_product_voucher(\n        product_voucher_account=self.user.product_voucher_account_set.first(), product=self.product\n    )\n    self.any_product_voucher(\n        product_voucher_account=self.user.product_voucher_account_set.first(), product=self.product\n    )\n    self.any_deal(washing_program=discounted_washing_program)\n    self.any_promotional_offer(\n        station=self.wp.station,\n        required_washing_program=self.wp,\n        discounted_washing_program=discounted_washing_program,\n    )\n    cart = self.any_cart(state=cart_states.active, user=self.user, deal=self.deal)\n    cart.add_item(deal=self.deal)\n    cart.add_item(deal=self.deal)\n    common_deal = self.any_deal()\n    cart.add_item(common_deal)\n    assert_that(cart.cartitem_set.all(), has_length(5))\n    assert_that(cart.cartitem_set.filter(deal__product_voucher__isnull=False), has_length(3))\n    assert_that(cart.cartitem_set.filter(deal__promotional_offer__isnull=False), has_length(1))\n    assert_that(cart.cartitem_set.filter(deal__promotional_offer__isnull=False).first().quantity, is_(3))\n    cart.remove_item(cart.cartitem_set.filter(deal=common_deal).first(), 1)\n    assert_that(cart.cartitem_set.all(), has_length(4))\n    assert_that(cart.cartitem_set.filter(deal__product_voucher__isnull=False), has_length(3))\n    assert_that(cart.cartitem_set.filter(deal__promotional_offer__isnull=False), has_length(1))\n    assert_that(cart.cartitem_set.filter(deal__promotional_offer__isnull=False).first().quantity, is_(3))",
    "metrics": {
      "line_count": 20,
      "assertion_count": 8,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 30,
      "dc_coherence_codet5": 81,
      "docstring_strength": 7.0
    },
    "id": 136,
    "score": "5",
    "annotator": 1,
    "annotation_id": 135,
    "created_at": "2025-10-27T14:31:22.459857Z",
    "updated_at": "2025-10-27T14:32:40.467622Z",
    "lead_time": 248.868,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_promotional_offer.py:CartPromotionalOfferDiscountedTestCase.test_promotional_offer_discounted_multiple_remove_required",
    "text": "def test_promotional_offer_discounted_multiple_remove_required(self) -> None:\n    \"\"\"\n    Given a cart with promotional offer for a discounted item having two items\n    When I remove a required item\n    Then\n        One discounted item is left\n        One required item is left\n        One not discounted item is created\n    \"\"\"\n    cart = self.any_cart()\n    promotional_offer = self.promotional_offer_discounted\n    station = self.station\n    required_deal, discounted_deals = promotional_offer.get_deals_for_station(station)\n    discounted_deal = discounted_deals[0]\n    required_deal = required_deal[0]\n    self.add_item(cart, required_deal, quantity=2)\n    self.add_item(cart, discounted_deal, quantity=2)\n\n    cart_item_required = cart.cartitem_set.filter(deal=required_deal).first()\n    assert_that(cart_item_required, is_not(None))\n    self.remove_item(cart, cart_item_required)\n    assert_that(cart.cartitem_set.count(), is_(3))\n\n    cart_item_1 = cart.cartitem_set.filter(deal=required_deal).first()\n    assert_that(cart_item_1, is_not(None))\n    assert_that(cart_item_1.quantity, is_(1))\n    cart_item_2 = cart.cartitem_set.filter(deal=discounted_deal).first()\n    assert_that(cart_item_2, is_not(None))\n    assert_that(cart_item_2.quantity, is_(1))\n    cart_item_3 = cart.cartitem_set.filter(deal=discounted_deal.washing_program.best_deal).first()\n    assert_that(cart_item_3, is_not(None))\n    assert_that(cart_item_3.quantity, is_(1))\n\n    assert_that(\n        cart.meta,\n        has_entries(\n            {\n                \"promotional_offers\": has_entries(\n                    {\n                        \"used_cart_items\": contains(\n                            has_entries(\n                                {\"id\": str(cart_item_1.id), \"quantity\": 1, \"offer_id\": str(promotional_offer.uuid)}\n                            )\n                        ),\n                        \"offered_cart_items\": contains(\n                            has_entries({\"id\": str(cart_item_2.id), \"offer_id\": str(promotional_offer.uuid)})\n                        ),\n                    }\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 22,
      "assertion_count": 9,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 7.0
    },
    "id": 137,
    "score": "4",
    "annotator": 1,
    "annotation_id": 136,
    "created_at": "2025-10-27T14:36:33.730414Z",
    "updated_at": "2025-10-27T14:36:33.730431Z",
    "lead_time": 225.775,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_parsers.py:Kiz3ParserTests.test_parse_action",
    "text": "@vcr.use_cassette()\ndef test_parse_action(self) -> None:\n    parser = Kiz3Parser()\n    parser.condition_semantic_impl = ImaConditionsSemanticsPadMobileImpl\n    hss = self.any_configured_hss(account=default_climax_account)\n    scenario_type = self.any_scenario_type()\n    scenario_info = self.any_scenario_info(driver=hss.driver)\n    scenario = self.any_scenario(hss=hss, scenario_info=scenario_info, scenario_type=scenario_type, save=False)\n    assert_that(calling(parser.parse_action).with_args(scenario.pk, \"text\", []), raises(NotImplementedError))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 138,
    "score": "4",
    "annotator": 1,
    "annotation_id": 137,
    "created_at": "2025-10-27T14:36:40.185941Z",
    "updated_at": "2025-10-27T14:36:40.185958Z",
    "lead_time": 6.305,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_forms.py:DispenserFormTestCase.test_error_provider_tl12_dispenser_human",
    "text": "def test_error_provider_tl12_dispenser_human(self) -> None:\n    station = self.any_station()\n    data = {\"dispenser_type\": Dispenser.TYPE_HUMAN, \"provider\": self.tl12_provider.pk, \"station\": station.pk}\n    form = DispenserForm(data)\n    is_valid = form.is_valid()\n\n    assert_that(is_valid, is_(False))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 139,
    "score": "3",
    "annotator": 1,
    "annotation_id": 138,
    "created_at": "2025-10-27T14:36:48.952643Z",
    "updated_at": "2025-10-27T14:36:48.952664Z",
    "lead_time": 8.625,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v90/tests/test_api_billing_information.py:PUTBillingInformationAPITests.test_update",
    "text": "def test_update(self) -> None:\n    \"\"\"\n    Given a user with billing information\n    When i update billing information for this user\n    Then I update\n        - HTTP 200\n        - PMF\n        - valid data\n    \"\"\"\n    self.client = AuthenticatedClient()\n    billing_information = self.client.user.billing_information\n    self.when_i_update_billing_information(data={\"name\": \"updated name\"})\n    assert_that(self.last_response.status_code, equal_to(200))\n\n    billing_information.refresh_from_db()\n    assert_that(billing_information.name, is_(\"updated name\"))\n    assert_that(\n        self.last_response.json(),\n        has_entries(\n            {\n                \"pk\": str(billing_information.pk),\n                \"model\": \"accounts.billing_information\",\n                \"fields\": has_entries(\n                    {\n                        \"name\": \"updated name\",\n                    }\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 7.0
    },
    "id": 140,
    "score": "5",
    "annotator": 1,
    "annotation_id": 139,
    "created_at": "2025-10-27T14:37:12.085773Z",
    "updated_at": "2025-10-27T14:37:12.085790Z",
    "lead_time": 22.965,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/notifications/tests/rules/test_backend.py:NotificationRulesTests.test_notify_users__quoted_on_enter_state__cancelled",
    "text": "def test_notify_users__quoted_on_enter_state__cancelled(self) -> None:\n    \"\"\"\n    Given\n        a quoted request in cancelled state\n        a global rule set as \"should_send\" for aborted state\n    When I call \"notify_users\"\n    Then \"send_mail\" is called\n    \"\"\"\n    request = self.any_quoted_request(state=request_states.cancelled)\n    self.any_global_rule(request_type=request.type, event=events.on_enter_state, state=request_states.aborted)\n    mail.outbox.clear()\n    notification_rules.notify_users(\n        request=request, event=events.on_enter_state, old_state=request.state, state=request.state\n    )\n    assert_that(mail.outbox, has_length(1))\n    assert_that(mail.outbox[0].body, contains_string(\"a été annulée\"))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 6.0
    },
    "id": 141,
    "score": "5",
    "annotator": 1,
    "annotation_id": 140,
    "created_at": "2025-10-27T14:38:21.510732Z",
    "updated_at": "2025-10-27T14:38:21.510747Z",
    "lead_time": 69.276,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/shipping_records/loaders/tests/test_events.py:ShippingRecordEventsTests.test_waiting__to_completed",
    "text": "def test_waiting__to_completed(self) -> None:\n    \"\"\"\n    Given a shipping record in waiting state\n    When i received completed state changed event\n    Then request is completed\n    \"\"\"\n    sr = self.any_shipping_record()\n\n    data = self.any_shipping_record_state_changed_data(shipping_record=sr, state=shipping_record_states.completed)\n    loader = ShippingRecordStateChangedLoader()\n    event = loader.on_message(\"\", data)\n    assert event\n    sr.refresh_from_db()\n    assert_that(sr.request.state, is_(request_states.completed))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 142,
    "score": "5",
    "annotator": 1,
    "annotation_id": 141,
    "created_at": "2025-10-27T14:38:45.995011Z",
    "updated_at": "2025-10-27T14:38:45.995021Z",
    "lead_time": 24.335,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v60/tests/test_serializers.py:DevicesSerializerTests.test_serializer",
    "text": "def test_serializer(self) -> None:\n    \"\"\"\n    Given:\n        - a \"devices\" instance composed by (a powerswitch, a blind, a camera,\n        a thermometer, an opening detector, a siren, a keypad, an emergency key,smoke detector,\n        flood detector, remote control, ir detector)\n    When:\n        - I serialize it\n    Then:\n        - I get a valid json\n    \"\"\"\n    devices = self.any_devices()\n    serializer = DevicesSerializer(devices)\n    data = serializer.data\n    assert_that(data, has_entries({\"pk\": devices.id, \"model\": \"hss.devices\", \"fields\": anything()}))\n    assert_that(\n        data[\"fields\"],\n        has_entries(\n            {\n                \"camera_set\": not_none(),\n                \"blind_set\": not_none(),\n                \"powerswitch_set\": not_none(),\n                \"thermometer_set\": not_none(),\n                \"opening_detector_set\": not_none(),\n                \"siren_set\": not_none(),\n                \"keypad_set\": not_none(),\n                \"ir_detector_set\": not_none(),\n                \"smoke_detector_set\": not_none(),\n                \"flood_detector_set\": not_none(),\n                \"remote_control_set\": not_none(),\n                \"emergency_key\": has_entries(\n                    {\"pk\": anything(), \"model\": \"hss.emergency_key\", \"fields\": anything()}\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 86,
      "docstring_strength": 9.0
    },
    "id": 143,
    "score": "5",
    "annotator": 1,
    "annotation_id": 142,
    "created_at": "2025-10-27T14:39:04.034652Z",
    "updated_at": "2025-10-27T14:39:04.034662Z",
    "lead_time": 17.888,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_step.py:StepTests.test_clean_empty_deal_reference__request_from_specified_state__is_ok",
    "text": "def test_clean_empty_deal_reference__request_from_specified_state__is_ok(self) -> None:\n    request = self.any_request(state=request_states.draft)\n    step = request.steps.filter(type=step_types.deliver).first()\n    assert step\n    step.deal_reference = \"\"\n    step.full_clean()\n    step.save()",
    "metrics": {
      "line_count": 6,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 144,
    "score": "1",
    "annotator": 1,
    "annotation_id": 143,
    "created_at": "2025-10-27T14:39:15.935655Z",
    "updated_at": "2025-10-27T14:39:31.784465Z",
    "lead_time": 26.268,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v71/tests/orders/test_api_retrieve.py:RetrieveOrderAPITestCase.test_retrieve_order__mangopay",
    "text": "def test_retrieve_order__mangopay(self) -> None:\n    \"\"\"\n    Given an order\n    When I describe order\n    Then I get a 200 OK\n    \"\"\"\n\n    self.client = AuthenticatedClient(mangopay_card=mangopay_cards.normal)\n\n    deal = self.any_deal()\n    cart = self.any_cart(user=self.client.user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n\n    order = self.any_order(\n        user=self.client.user,\n        payment_method=payment_methods.mangopay,\n        cart=cart,\n        api_version=self.API_VERSION,\n    )\n\n    self.when_i_retrieve_order(order_pk=order.pk)\n\n    assert_that(self.last_response.status_code, is_(200))\n    assert \"prepaid_account_used_incl_vat\" not in self.last_response.data[\"fields\"][\"payment_details\"]\n    assert_that(\n        self.last_response.data[\"fields\"][\"payment_details\"],\n        has_entries({\"payment_card\": not_none()}),\n    )",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 67,
      "docstring_strength": 4.0
    },
    "id": 145,
    "score": "3",
    "annotator": 1,
    "annotation_id": 144,
    "created_at": "2025-10-27T14:43:09.944186Z",
    "updated_at": "2025-10-27T14:43:09.944199Z",
    "lead_time": 214.992,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/drivers/tests/test_devices.py:ListTests.test_list",
    "text": "@vcr.use_cassette()\ndef test_list(self) -> None:\n    \"\"\"\n    Given:\n        - a Hss with an Essentielle panel\n        - a HssDriver\n    When:\n        - I list devices\n    Then:\n        - No error is raised\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_hm)\n    driver = driver_factory.get_driver(hss)\n    devices = driver.devices.list()\n    assert_that(devices, not_(empty()))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 8.0
    },
    "id": 146,
    "score": "4",
    "annotator": 1,
    "annotation_id": 145,
    "created_at": "2025-10-27T14:46:50.374897Z",
    "updated_at": "2025-10-27T14:46:50.374916Z",
    "lead_time": 26.449,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_myr_43.py:MYR43Tests.test_filter_pickup_time_upper",
    "text": "def test_filter_pickup_time_upper(self) -> None:\n    \"\"\"\n    Given :\n        r1: a request in draft state\n        r2: a request in planned state\n        a valid form with pickup_time_range_1 (upper) set as r2 sr scheduled_pickup_time date\n    When I get_filter_queryset\n    Then the queryset only contains r2\n    \"\"\"\n    site = self.any_site()\n    r1 = self.any_framed_request(site=site, state=request_states.draft)\n    r2 = self.any_framed_request(site=site, state=request_states.planned, creator=r1.creator)\n    sr = r2.shipping_records.first()\n    form = make_request_filter_form(\n        site=r1.site,\n        user=r1.creator,\n        params={\"\": \"\"},\n    )(data={\"pickup_time_range_1\": sr.scheduled_pickup_time.strftime(\"%d/%m/%Y\")})\n    assert_that(form.is_valid())\n    qs = form.get_filter_queryset(queryset=Request.objects.all(), user=r1.creator)\n    assert_that(qs.count(), is_(1))\n    assert_that(qs.filter(pk=r2.pk).exists(), is_(True))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 84,
      "docstring_strength": 7.0
    },
    "id": 147,
    "score": "5",
    "annotator": 1,
    "annotation_id": 146,
    "created_at": "2025-10-27T14:47:51.416350Z",
    "updated_at": "2025-10-27T14:47:51.416366Z",
    "lead_time": 60.884,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/operator/tests/test_model.py:SellerModelTestCase.test_create_operator",
    "text": "def test_create_operator(self) -> None:\n    seller = self.any_seller()\n    seller.full_clean()\n    seller.save()",
    "metrics": {
      "line_count": 3,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 58,
      "docstring_strength": 0.0
    },
    "id": 148,
    "score": "1",
    "annotator": 1,
    "annotation_id": 147,
    "created_at": "2025-10-27T14:48:05.961242Z",
    "updated_at": "2025-10-27T14:48:05.961258Z",
    "lead_time": 14.384,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/forms/tests/test_action_forms.py:RefuseForm.test_without_refuse_reason",
    "text": "def test_without_refuse_reason(self) -> None:\n    \"\"\"\n    given any quoted request in 3rd_party_transmission state\n    given any form without refuse reason\n    when validating the form\n    then errors are thrown and contain the key \"refuse_reason\"\n    \"\"\"\n    request = self.any_quoted_request(state=request_states._3rd_party_transmission)\n    form = self.any_refuse_form(request, refuse_reason=None)\n    form.is_valid()\n    assert_that(form.errors, has_entry(\"refuse_reason\", not_(empty())))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 5.0
    },
    "id": 149,
    "score": "5",
    "annotator": 1,
    "annotation_id": 148,
    "created_at": "2025-10-27T14:48:42.302293Z",
    "updated_at": "2025-10-27T14:48:42.302306Z",
    "lead_time": 36.197,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/sites/replication/tests/test_adapters.py:SiteAdapterTests.test_adapter",
    "text": "def test_adapter(self) -> None:\n    site = self.any_site()\n    adapter = SiteAdapter()\n    topic = adapter.topic(obj=site)\n    data = adapter.as_data(obj=site)\n    assert_that(topic, is_(\"myroad.resource.site\"))\n    assert_that(\n        data,\n        has_entries(\n            {\n                \"uri\": site.myroad_uri.value,\n                \"version\": 2,\n                \"data\": has_entries(\n                    {\n                        \"client_id\": is_(site.client_id),\n                    }\n                ),\n            }\n        ),\n    )",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 150,
    "score": "3",
    "annotator": 1,
    "annotation_id": 149,
    "created_at": "2025-10-27T14:48:53.971335Z",
    "updated_at": "2025-10-27T14:48:53.971345Z",
    "lead_time": 11.529,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v70/tests/cards/test_api_create.py:CreateMangopayCardRegistrationAPITestCase.test_create__anonymous",
    "text": "@override_settings(NEED_DEFAULT_PROMOCODE=True)\ndef test_create__anonymous(self) -> None:\n    self.client = AnonymousClient()\n    self.when_i_create_card_registration()\n\n    assert_that(self.last_response, http(403))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 59,
      "docstring_strength": 0.0
    },
    "id": 151,
    "score": "3",
    "annotator": 1,
    "annotation_id": 151,
    "created_at": "2025-10-27T15:05:02.474470Z",
    "updated_at": "2025-10-27T15:05:02.474482Z",
    "lead_time": 9.247,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/authentications/tests/framed/test_planned.py:TeamRequestFramedPermissionBackendTest.test_permissions__team_request",
    "text": "def test_permissions__team_request(self) -> None:\n    \"\"\"\n    Tests every framed permission on every state for every roles and every request types (my / team / other)\n    \"\"\"\n    team_request = self.any_framed_request(creator=self.u2, state=state)\n\n    request_permissions_without_cancel = [\n        perm for perm in request_permissions.all if perm != request_permissions.can_cancel\n    ]\n\n    for role in permission_roles.all:\n        u1 = self.any_user(roles=[role], sites=[self.site.uuid])\n        self.any_team(with_users=[u1, self.u2], site=self.site)\n        for perm in request_permissions_without_cancel:\n            with self.subTest(role=role, perm=perm):\n                team_expected = perm in expected.get(role, {}).get(\"team_request\", {})\n                assert_that(u1.has_perm(perm, obj=team_request), is_(team_expected))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 5,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 69,
      "docstring_strength": 2.0
    },
    "id": 152,
    "score": "5",
    "annotator": 1,
    "annotation_id": 152,
    "created_at": "2025-10-27T15:05:39.079387Z",
    "updated_at": "2025-10-27T15:05:39.079403Z",
    "lead_time": 36.448,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:CameraActionFormTestCase.test_create_form_off_valid_with_zone",
    "text": "def test_create_form_off_valid_with_zone(self) -> None:\n    data = {\n        \"area\": \"1\",\n        \"zone\": \"2\",\n    }\n\n    form = CreateCameraActionForm(data=data)\n    is_valid = form.is_valid()\n\n    self.assertTrue(is_valid)\n    self.assertEqual(form.to_grammar(), \"a=1&z=2&req=img\")",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 153,
    "score": "3",
    "annotator": 1,
    "annotation_id": 153,
    "created_at": "2025-10-27T15:05:49.195350Z",
    "updated_at": "2025-10-27T15:05:49.195363Z",
    "lead_time": 9.959,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/stations/test_models.py:StationModelTestCase.test_is_exceptionally_closed__exceptional_closure",
    "text": "def test_is_exceptionally_closed__exceptional_closure(self) -> None:\n    \"\"\"\n    Given a station with exceptional_closure True\n    Then is_exceptionally_closed is True\n    \"\"\"\n    station = self.any_station(exceptional_closure=True)\n    assert_that(station.is_exceptionally_closed, is_(True))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 83,
      "docstring_strength": 3.0
    },
    "id": 154,
    "score": "4",
    "annotator": 1,
    "annotation_id": 154,
    "created_at": "2025-10-27T15:06:45.504271Z",
    "updated_at": "2025-10-27T15:06:45.504282Z",
    "lead_time": 56.148,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/transaction/tests/test_models.py:TransactionModelTests.test_expired_transaction",
    "text": "def test_expired_transaction(self) -> None:\n    \"\"\"\n    Given a hss\n    Given a pending transaction that is expired and a pending transaction that is not expired\n    When I call the expired property\n    Then the return queryset only contains the expired transaction\n    \"\"\"\n    hss = self.any_hss(remote_proxy=remote_proxies.climax_kiz)\n    hss2 = self.any_hss(remote_proxy=remote_proxies.honeywell)\n    _5mn_ago = timezone.now() - timedelta(minutes=5)\n    with mock.patch.object(timezone, \"now\", return_value=_5mn_ago):  # noqa: RMS102\n        transaction = self.any_transaction(hss=hss, state=transaction_states.pending)\n    self.any_transaction(hss=hss2, state=transaction_states.pending, type=transaction_types.update_code)\n    exp_transactions = Transaction.objects.expired\n    assert_that(exp_transactions, only_contains(transaction))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 5.0
    },
    "id": 155,
    "score": "1",
    "annotator": 1,
    "annotation_id": 155,
    "created_at": "2025-10-27T15:07:16.504601Z",
    "updated_at": "2025-10-27T15:07:16.504615Z",
    "lead_time": 30.846,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_hss_api.py:HSSMigrationHoneywellApiTests.test_migrate_scenario",
    "text": "@vcr.use_cassette()\ndef test_migrate_scenario(self) -> None:\n    \"\"\"\n    Given an hss\n    When i migrate scenario\n    Then i have scenarios and an hss migration type \"scenario\"\n    \"\"\"\n    hss = self.client.hss\n    self.any_migration(hss=hss, type=migration_types.scenario, completed=False)\n\n    self.when_i_migrate_hss(hss, migration_types.scenario)\n    assert_that(self.last_response.status_code, is_(status.HTTP_200_OK), self.last_response)\n    assert_that(hss.migrations.filter(completed=True).all(), has_length(1))\n    scenarios = Scenario.objects.filter(hss=hss)\n    assert_that(scenarios, is_not(empty()))\n    assert_that(scenarios, has_length(greater_than_or_equal_to(4)))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 73,
      "docstring_strength": 4.0
    },
    "id": 156,
    "score": "4",
    "annotator": 1,
    "annotation_id": 156,
    "created_at": "2025-10-27T15:07:37.795373Z",
    "updated_at": "2025-10-27T15:07:37.795388Z",
    "lead_time": 21.135,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/transitions/request/framed/test_add_carriage.py:FramedStateMachineAddCarriageTests.test_add_carriage__does_not_increment_request_version",
    "text": "def test_add_carriage__does_not_increment_request_version(self) -> None:\n    request = self.any_framed_request(state=request_states.initial)\n    request_version = request.version\n    request = request.state_machine(user=request.creator).add_step().request\n    assert_that(request.version == request_version)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 46,
      "docstring_strength": 0.0
    },
    "id": 157,
    "score": "3",
    "annotator": 1,
    "annotation_id": 157,
    "created_at": "2025-10-27T15:07:47.080234Z",
    "updated_at": "2025-10-27T15:07:47.080248Z",
    "lead_time": 9.12,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/forgotpassword/api/v20/tests/test_api.py:CheckValidationCodeAPIViewTestCase.test_check__is_frauder_by_admin",
    "text": "def test_check__is_frauder_by_admin(self) -> None:\n    \"\"\"\n    Given a registered frauder user with a reset password validation code\n    When i check mobile phone with a code\n    Then there is a 403 response\n    \"\"\"\n    user = self.any_user(with_mobile_phone_verified=False)\n    user.is_frauder = True\n    user.frauder_reason = frauder_reasons.by_admin\n    user.last_frauder_update = timezone.now()\n    user.mobile_phone_to_reset_password_validation_code = \"1234\"\n    user.mobile_phone = \"+33611223344\"\n    user.save()\n\n    consumer = self.any_consumer()\n    self.client = HTTPSignedClient(consumer=consumer)\n\n    self.when_i_check_mobile_phone(code=\"1234\", mobile_phone=user.mobile_phone)\n    user.refresh_from_db()\n    assert_that(self.last_response.status_code, is_(403))\n    assert_that(\n        self.last_response.json(),\n        has_entry(\n            \"detail\",\n            \"\"\"Par mesure de sécurité, votre compte a été suspendu pendant 24h. \\nSi vous souhaitez le réactiver, vous pouvez nous contacter via la rubrique “A propos” > “Aide et suggestions” de l’application.\"\"\",  # noqa\",\n        ),\n    )",
    "metrics": {
      "line_count": 13,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 158,
    "score": "5",
    "annotator": 1,
    "annotation_id": 158,
    "created_at": "2025-10-27T15:09:13.772758Z",
    "updated_at": "2025-10-27T15:09:13.772770Z",
    "lead_time": 86.534,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/hss/api/v60/tests/test_hss_api.py:HSSMigrationClimaxApiTests.test_perform_migration__not_needed",
    "text": "def test_perform_migration__not_needed(self) -> None:\n    hss = self.client.hss\n\n    self.when_i_migrate_hss(hss=hss, migration_type=migration_types.bec4)\n\n    assert_that(self.last_response.status_code, is_(status.HTTP_404_NOT_FOUND))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 159,
    "score": "3",
    "annotator": 1,
    "annotation_id": 159,
    "created_at": "2025-10-27T15:09:19.310086Z",
    "updated_at": "2025-10-27T15:09:19.310099Z",
    "lead_time": 5.369,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/tests/test_models.py:UserTestCase.test_user__contact_info",
    "text": "def test_user__contact_info(self) -> None:\n    \"\"\"\n    Given :\n        - a random user\n    When :\n        - I get contact infos\n    Then :\n        - contact infos are loaded\n    \"\"\"\n    user = self.any_user()\n    contacts = user.contact_info.split(\" \")\n    assert user.contact_info is not None\n    assert f\"({user.email})\" == contacts[-1]",
    "metrics": {
      "line_count": 4,
      "assertion_count": 0,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 7.0
    },
    "id": 160,
    "score": "5",
    "annotator": 1,
    "annotation_id": 160,
    "created_at": "2025-10-27T15:10:07.086667Z",
    "updated_at": "2025-10-27T15:10:07.086680Z",
    "lead_time": 47.628,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/issues/tests/test_give_promocode.py:GivePromocodeTestCase.test_promocode_usable__percentage",
    "text": "def test_promocode_usable__percentage(self) -> None:\n    user = self.any_user()\n    promocode = PromoCode.objects.create_issue_percentage(\n        percentage=5, user=user, zone_context=self.any_zone_context()\n    )\n\n    is_valid = self.when_i_check_promocode_validity(promocode=promocode, user=user)\n    assert_that(is_valid, is_(False))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 161,
    "score": "3",
    "annotator": 1,
    "annotation_id": 161,
    "created_at": "2025-10-27T15:10:25.203915Z",
    "updated_at": "2025-10-27T15:10:25.203928Z",
    "lead_time": 17.953,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_scenarios.py:ScenarioCalendarTests.test_list_scenario_calendar__empty_string_body",
    "text": "@vcr.use_cassette()\ndef test_list_scenario_calendar__empty_string_body(self) -> None:\n    hss = self.any_configured_hss(account=opv_contact_45_account)\n    driver = driver_factory.get_driver(hss=hss)\n    with requests_mock.Mocker(real_http=True) as m:\n        m.get(\"https://domoweb-rec.imt.fm/applicationservice/domoweb/panel/calendar\", text=\"\", status_code=200)\n        assert_that(driver.scenarios._scenarios_calendar(), is_(empty()))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 162,
    "score": "1",
    "annotator": 1,
    "annotation_id": 162,
    "created_at": "2025-10-27T15:10:32.699689Z",
    "updated_at": "2025-10-27T15:10:32.699705Z",
    "lead_time": 7.344,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/cms/tests/test_models.py:BrandingTests.test_str",
    "text": "def test_str(self) -> None:\n    branding = self.any_branding()\n    assert_that(str(branding), is_(f\"Branding {branding.partner_name} [{branding.slug}]\"))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 54,
      "docstring_strength": 0.0
    },
    "id": 163,
    "score": "3",
    "annotator": 1,
    "annotation_id": 163,
    "created_at": "2025-10-27T15:10:43.427721Z",
    "updated_at": "2025-10-27T15:10:43.427732Z",
    "lead_time": 10.576,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/issues/tests/forms/test_give_promocode.py:GivePromocodeFormTestCase.test_form_invalid__negative",
    "text": "def test_form_invalid__negative(self) -> None:\n    zone_context = self.any_zone_context()\n    data = {\"discount\": -10, \"percentage\": 0, \"zone_context\": zone_context.pk}\n    form = GivePromocodeForm(issue=None, data=data)\n    assert_that(form.is_valid(), is_(False))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 164,
    "score": "3",
    "annotator": 1,
    "annotation_id": 164,
    "created_at": "2025-10-27T15:10:54.741690Z",
    "updated_at": "2025-10-27T15:10:54.741705Z",
    "lead_time": 11.157,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__pickup_address_street__no_steps",
    "text": "def test_request_formatter__pickup_address_street__no_steps(self) -> None:\n    \"\"\"\n    Given a request without request\n    When I use RequestFormatter with 'pickup_address_street' field to export\n    Then it return a dict that contain request pickup address street as empty string\n    \"\"\"\n    request = self.any_request()\n    request.steps.all().delete()\n    request.refresh_from_db()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"pickup_address_street\"])\n    assert_that(request_csv[0], is_(\"\"))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 165,
    "score": "4",
    "annotator": 1,
    "annotation_id": 165,
    "created_at": "2025-10-27T15:11:29.370044Z",
    "updated_at": "2025-10-27T15:11:29.370058Z",
    "lead_time": 34.458,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart_item.py:CartItemModelTestCase.test_add_cart_item_subscription_product_voucher__quantity_2",
    "text": "def test_add_cart_item_subscription_product_voucher__quantity_2(self) -> None:\n    \"\"\"\n    Given a user with\n        - An empty cart\n        - A product voucher for product P1\n    When I add two deal with a washing program for product P1 to the cart\n    Then the cart have a free deal and a normal deal\n    \"\"\"\n    product_voucher = self.any_subscription_product_voucher(\n        product=self.product, product_voucher_account=self.user.product_voucher_account_set.first()\n    )\n    cart = self.any_cart(state=cart_states.empty, user=self.user)\n\n    cart.add_item(deal=self.any_deal(washing_program=self.wp), subscription_voucher=product_voucher, quantity=2)\n\n    assert_that(cart.cartitem_set.all(), has_length(2))\n    cart_item_1, cart_item_2 = cart.cartitem_set.all()\n    assert_that(\n        [cart_item_1.deal.price_after_discount, cart_item_2.deal.price_after_discount],\n        contains_inanyorder(decimal.Decimal(\"0\"), decimal.Decimal(\"10\")),\n    )\n    assert_that(\n        [cart_item_1.deal.availability, cart_item_2.deal.availability],\n        contains_inanyorder(deal_availability.in_stock, deal_availability.out_of_stock),\n    )",
    "metrics": {
      "line_count": 7,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 79,
      "docstring_strength": 6.0
    },
    "id": 166,
    "score": "5",
    "annotator": 1,
    "annotation_id": 166,
    "created_at": "2025-10-27T15:14:23.111486Z",
    "updated_at": "2025-10-27T15:14:23.111503Z",
    "lead_time": 173.584,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/bus/tests/test_order_adapter.py:OrderAdapterTests.test_order_adapter__product_voucher",
    "text": "def test_order_adapter__product_voucher(self) -> None:\n    \"\"\"\n    Given any order with order item with product voucher\n    When I put it in OrderAdapter\n    Then I get a valid message with\n        - deal_info\n    \"\"\"\n    order = self.any_order(with_product_voucher=True)\n\n    adapter = OrderAdapter()\n    key = adapter.key(order)\n    topic = adapter.topic(order)\n    payload = adapter.as_data(order)\n    data = payload[\"data\"][\"order_items\"][0]\n\n    assert_that(key, is_(str(order.id)))\n    assert_that(topic, is_(\"resource.kleen.order\"))\n    assert_that(payload[\"uri\"], order.uri)\n\n    assert_that(\n        data,\n        has_entry(\n            \"deal_info\",\n            has_entry(\"product_voucher\", True),\n        ),\n    )",
    "metrics": {
      "line_count": 10,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 5.0
    },
    "id": 167,
    "score": "4",
    "annotator": 1,
    "annotation_id": 167,
    "created_at": "2025-10-27T15:15:10.296258Z",
    "updated_at": "2025-10-27T15:15:10.296274Z",
    "lead_time": 47.027,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/test_forms.py:DealFormTestCase.test_deal_form_market_place_coupon_program_price_less_than_zero",
    "text": "def test_deal_form_market_place_coupon_program_price_less_than_zero(self) -> None:\n    washing_program = self.any_washing_program__market_place()\n    washing_program.price = decimal.Decimal(\"0\")\n    washing_program.save(update_fields=[\"price\"])\n    data = {\n        \"type\": deal_types.washing,\n        \"tax_percentage\": \"20.00\",  # 20 %\n        \"price_after_discount_basic\": \"12\",\n        \"washing_program\": washing_program.pk,\n        \"availability\": deal_availability.in_stock,\n    }\n\n    deal_form = DealForm(data)\n\n    self.then_deal_form_is_invalid(deal_form)",
    "metrics": {
      "line_count": 6,
      "assertion_count": 0,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 168,
    "score": "3",
    "annotator": 1,
    "annotation_id": 168,
    "created_at": "2025-10-27T15:15:47.043375Z",
    "updated_at": "2025-10-27T15:15:47.043400Z",
    "lead_time": 36.586,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_request_refuse_quote.py:RequestRefuseQuoteFormTests.test_load__not_found",
    "text": "def test_load__not_found(self) -> None:\n    site = self.any_site()\n    with self.assertRaises(NotFoundException):\n        RequestRefuseQuotePage.get(client=self.client, site_slug=site.slug, pk=uuid.uuid4())",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 49,
      "docstring_strength": 0.0
    },
    "id": 169,
    "score": "3",
    "annotator": 1,
    "annotation_id": 169,
    "created_at": "2025-10-27T15:15:53.258091Z",
    "updated_at": "2025-10-27T15:15:53.258102Z",
    "lead_time": 6.062,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/crm/tests/tasks/test_task_buyer_notifier.py:TaskTestCase.test_send__station_has_another_best_deal",
    "text": "def test_send__station_has_another_best_deal(self) -> None:\n    \"\"\"\n    Given :\n     - an order sold there is more than 60 days\n     - a user without frequency\n     - a notifier in idle state\n    When refreshing notifier\n    Then notifier:\n     - is in idle state\n     - notification time is not none\n     - last order time is same as order\n    \"\"\"\n    self.any_seller()\n    user = self.given_user_registered_with_card(\n        card_number=MangoPayFixture.TEST_car_number_without_3DS,\n        disable_secure_mode=True,\n        preferences_frequency=User.FREQUENCY_LONG_TIME,\n        with_push_token=True,\n    )\n\n    order = self.any_order_sold()\n    reminder = user.occasional_buyer_notifier_set.get(zone_context=order.zone_context)\n    assert_that(reminder.state, is_(occasional_buyer_notifier_states.idle))\n\n    self.when_i_launch_all_occasional_buyer_notifier(in_days=106)\n\n    launch_all_occasional_buyer_notifier()\n    reminder.refresh_from_db()\n    assert_that(reminder.state, is_(occasional_buyer_notifier_states.idle))\n    assert_that(reminder.last_notification_time, not_none())\n    assert_that(reminder.last_sold_date, equal_to(order.sold_date))",
    "metrics": {
      "line_count": 11,
      "assertion_count": 4,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 9,
      "dc_coherence_codet5": 79,
      "docstring_strength": 10.0
    },
    "id": 170,
    "score": "5",
    "annotator": 1,
    "annotation_id": 170,
    "created_at": "2025-10-27T15:19:56.347896Z",
    "updated_at": "2025-10-27T15:19:56.347907Z",
    "lead_time": 242.947,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/test_user_notifications_view.py:UserNotificationsSettingsViewTests.test_load__unauthenticated",
    "text": "def test_load__unauthenticated(self) -> None:\n    self.client = Client()\n    site = self.any_site()\n    with self.assertRaises(RedirectException):\n        UserNotificationsPage.get(client=self.client, site_slug=site.slug)",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 49,
      "docstring_strength": 0.0
    },
    "id": 171,
    "score": "3",
    "annotator": 1,
    "annotation_id": 171,
    "created_at": "2025-10-27T15:20:00.949323Z",
    "updated_at": "2025-10-27T15:20:00.949337Z",
    "lead_time": 4.444,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/hooks/tests/test_client.py:FastStatusRedisClientTests.test_get_set_faststatus_valid_group",
    "text": "def test_get_set_faststatus_valid_group(self) -> None:\n    redis_client = FastStatusRedisClient([\"test_key\"])\n    faststatus = FastStatus(\n        identifier=\"test_key\",\n        source=sources.application_set_status,\n        timestamp=int(time.time() * 10e5),\n        raw_status=\"on\",\n        group=1,\n    )\n    redis_client.set_fast_status(faststatus)\n    cached_faststatus = redis_client.get_fast_status()\n    assert_that(cached_faststatus, is_(not_none()))\n    assert_that(cached_faststatus.group, is_(faststatus.group))",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 172,
    "score": "3",
    "annotator": 1,
    "annotation_id": 172,
    "created_at": "2025-10-27T15:20:51.231320Z",
    "updated_at": "2025-10-27T15:20:51.231334Z",
    "lead_time": 50.124,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/orders/test_orders.py:OrderTestCase.test_order__publish_kleen_coupon",
    "text": "def test_order__publish_kleen_coupon(self) -> None:\n    \"\"\"\n    Given an order with\n        - a deal for a washing program\n    When I complete this order\n    Then the kleen coupon is published\n    \"\"\"\n    user = self.any_user(mangopay_card=mangopay_cards.normal, with_mp_user=True)\n    wp = self.any_washing_program(profile=washing_program_profiles.kleen)\n    deal = self.any_deal(washing_program=wp)\n    cart = self.any_cart(user=user, state=cart_states.empty)\n    cart.add_item(deal=deal)\n\n    with mock.patch(\"kleen.carwash.bus.adapters.coupon.KleenCoupon.publish\") as m:  # noqa: RMS102\n        self.any_order(user=user, payment_method=payment_methods.mangopay, cart=cart)\n    m.assert_called_once()",
    "metrics": {
      "line_count": 8,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 5.0
    },
    "id": 173,
    "score": "1",
    "annotator": 1,
    "annotation_id": 173,
    "created_at": "2025-10-27T15:20:57.846236Z",
    "updated_at": "2025-10-27T15:20:57.846251Z",
    "lead_time": 6.455,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v40/tests/test_api_essentielle.py:CreateScenarioApiTestCase.test_create_scenarios",
    "text": "@vcr.use_cassette()\ndef test_create_scenarios(self) -> None:\n    \"\"\"\n    Given : A dict representing a scenario\n    When : I post this dict\n    Then : I get a 201 HTTP response, a dict with one scenario\n    \"\"\"\n    hss = self.client.hss\n    scenario = self.any_scenario(hss=hss, save=False)\n    data = self.any_scenario_data(scenario)\n    last_response = self.when_i_post_scenario(data)\n    assert_that(last_response.status_code, is_(201), last_response.content)\n    assert_that(last_response.json(), is_(not_none()))\n    assert_that(Scenario.objects.all(), has_length(1))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 174,
    "score": "4",
    "annotator": 1,
    "annotation_id": 174,
    "created_at": "2025-10-27T15:21:06.522880Z",
    "updated_at": "2025-10-27T15:21:06.522892Z",
    "lead_time": 8.512,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/equipments/tests/test_models.py:EquipmentModelTests.test_complete__raw_none",
    "text": "def test_complete__raw_none(self) -> None:\n    equipment = self.any_equipment()\n    equipment.raw = None\n    with self.assertRaises(IntegrityError):\n        equipment.save()",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 53,
      "docstring_strength": 0.0
    },
    "id": 175,
    "score": "3",
    "annotator": 1,
    "annotation_id": 175,
    "created_at": "2025-10-27T15:21:10.722968Z",
    "updated_at": "2025-10-27T15:21:10.722981Z",
    "lead_time": 4.052,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_coders_climax.py:DriverClimaxScenarioCodecTestCase.test_encode__incorrect_condition",
    "text": "@vcr.use_cassette()\ndef test_encode__incorrect_condition(self) -> None:\n    \"\"\"\n    Given a scenario with a condition with values incorrect (start_time > end_time)\n    When I encode this scenario\n    Then I get an exception described by a dict with entries for the fields incorrect\n    \"\"\"\n    contract = ContractMixin().any_climax_contract()\n    hss = HssMixin().any_hss(user=contract.user, contract=contract, remote_proxy=remote_proxies.climax_kiz)\n    condition = EveryWeekDaysFromToTempoClimax(\n        pk=1,\n        start_time=\"14:00:00\",\n        end_time=\"11:00:00\",\n        weekdays=\"monday,tuesday,wednesday,thursday,friday\",\n        random=None,\n        type=condition_types.every_week_days_from_to,\n    )\n    scenario_info = self.any_scenario_info(driver=hss.driver, condition=condition)\n    scenario = self.any_scenario(hss=hss, state=states.draft, scenario_info=scenario_info, save=False)\n    driver_decoder = self.any_driver_codec(hss.driver)\n    with self.assertRaises(ValidationError) as e:\n        driver_decoder.encode(scenario)\n    assert_that(e.exception.error_dict, has_entries({\"start_time\": not_none(), \"end_time\": not_none()}))",
    "metrics": {
      "line_count": 9,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 75,
      "docstring_strength": 4.0
    },
    "id": 176,
    "score": "4",
    "annotator": 1,
    "annotation_id": 176,
    "created_at": "2025-10-27T15:22:03.550720Z",
    "updated_at": "2025-10-27T15:22:03.550734Z",
    "lead_time": 52.677,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/api/v60/tests/test_create_scenario_climax.py:CreateScenarioApiTestCase.test_movements_lighting",
    "text": "@vcr.use_cassette()\ndef test_movements_lighting(self) -> None:\n    \"\"\"\n    Given a hss\n    Given data to create scenario movements_lighting\n    When I create scenario\n    Then 201 with data\n    \"\"\"\n    hss = self.client.hss\n    power_switch_action = self.any_power_switch_action(\n        driver=hss.driver,\n        fields={\"status\": \"on\", \"duration\": 60},\n    )\n    scenario_info = self.any_scenario_info(driver=hss.driver, actions=[power_switch_action])\n    scenario = self.any_scenario(\n        scenario_info=scenario_info,\n        hss=hss,\n        scenario_type=ScenarioType.objects.filter(slug=\"movements-lighting\", remote_proxy=\"climax_kiz\").first(),\n    )\n    data = self.any_scenario_data(scenario)\n    plug = self.any_local_device(type=DeviceType.plug)\n    data[\"actions\"].append(\n        {\"type\": \"hss.scenario.action.maia_plug\", \"fields\": {\"status\": \"on\", \"duration\": 60, \"device_pk\": plug.pk}}\n    )\n    data[\"condition\"] = {\n        \"fields\": {\"status\": \"all\"},\n        \"type\": \"hss.scenario.condition.panel_status\",\n        \"collection_id\": None,\n    }\n    last_response = self.when_i_post_scenario(data)\n    assert_that(last_response.status_code, is_(201), last_response.content)\n    assert_that(last_response.json(), is_(not_none()))\n    assert_that(MasterScenario.objects.count(), is_(1))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 72,
      "docstring_strength": 5.0
    },
    "id": 177,
    "score": "5",
    "annotator": 1,
    "annotation_id": 177,
    "created_at": "2025-10-27T15:27:21.807830Z",
    "updated_at": "2025-10-27T15:27:21.807848Z",
    "lead_time": 318.09,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter_additional_quote_price_2_quoted",
    "text": "def test_request_formatter_additional_quote_price_2_quoted(self) -> None:\n    \"\"\"\n    Given a quoted request\n    When I use RequestFormatter with 'additional_quote_price_2' field to export\n    Then it return a dict that contain request additional_quote_price_2\n    \"\"\"\n    request = self.any_quoted_request(with_additional_quotes=True)\n    additional_quote = request.additionalquote_set.first()\n    assert isinstance(additional_quote, AdditionalQuote)\n    additional_quote.quantity = 12\n    additional_quote.unit_price_excl_vat = 10\n    additional_quote.label = \"Picking\"\n    additional_quote.full_clean()\n    additional_quote.save()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"additional_quote_price_2\"])\n    assert_that(request_csv[0], is_(120))",
    "metrics": {
      "line_count": 10,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 80,
      "docstring_strength": 4.0
    },
    "id": 178,
    "score": "3",
    "annotator": 1,
    "annotation_id": 178,
    "created_at": "2025-10-27T15:28:32.151416Z",
    "updated_at": "2025-10-27T15:28:50.179886Z",
    "lead_time": 82.176,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/proxy/scenario/tests/test_forms.py:PanelStatusConditionFormTestCase.test_form_off_valid",
    "text": "def test_form_off_valid(self) -> None:\n    data = {\n        \"status\": \"0\",  # off\n    }\n\n    form = PanelStatusConditionForm(data=data)\n    is_valid = form.is_valid()\n    result = form.to_model(instance_pk=1)\n\n    self.assertTrue(is_valid)\n    self.assertEqual(result.status, \"off\")",
    "metrics": {
      "line_count": 6,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 179,
    "score": "3",
    "annotator": 1,
    "annotation_id": 179,
    "created_at": "2025-10-27T15:29:05.196222Z",
    "updated_at": "2025-10-27T15:29:05.196238Z",
    "lead_time": 9.351,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_powerswitch_driver.py:UpdateTests.test_update__polling_can_commit__response_value_error",
    "text": "@vcr.use_cassette()\ndef test_update__polling_can_commit__response_value_error(self) -> None:\n    \"\"\"\n    Given\n        - a Hss with a honeywell panel\n        - a HssDriver\n        - a honeywell powerswitch\n    When\n        - I update powerswitch name with an invalid json in the body response while polling\n         after the update name request\n    Then\n        - I get an updated powerswitch\n    \"\"\"\n    hss = self.any_configured_hss(account=default_honeywell_account)\n    driver = driver_factory.get_driver(hss)\n    honeywell_powerswitch = self.any_honeywell_powerswitch(hss=hss)\n    new_name = get_random_string(8)\n    assert_that(\n        calling(driver.power_switches.update_name).with_args(\n            device_id=str(honeywell_powerswitch.id), new_name=new_name\n        ),\n        raises(BadResponse),\n    )",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 84,
      "docstring_strength": 10.0
    },
    "id": 180,
    "score": "4",
    "annotator": 1,
    "annotation_id": 180,
    "created_at": "2025-10-27T15:29:16.568907Z",
    "updated_at": "2025-10-27T15:29:16.568923Z",
    "lead_time": 11.219,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/amqp/tests/test_producer.py:AMQPProducerEventTestCase.test_event_adapter_interface",
    "text": "def test_event_adapter_interface(self) -> None:\n    adapter = EventAdapter()\n    event = DummyEvent()\n    assert_that(calling(adapter.as_data).with_args(event), raises(NotImplementedError))\n    assert_that(calling(adapter.exchange).with_args(event), raises(NotImplementedError))\n    assert_that(calling(adapter.topic).with_args(event), raises(NotImplementedError))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 3,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 43,
      "docstring_strength": 0.0
    },
    "id": 181,
    "score": "3",
    "annotator": 1,
    "annotation_id": 181,
    "created_at": "2025-10-27T15:29:32.247971Z",
    "updated_at": "2025-10-27T15:29:32.247986Z",
    "lead_time": 15.514,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/carts/test_cart.py:CartTestCase.test_cart__update__promocode__offered_washing__remove",
    "text": "def test_cart__update__promocode__offered_washing__remove(self) -> None:\n    \"\"\"\n    Given\n        a cart with a promocode offered washing\n    When i remove promocode from cart\n    Then a cart item  linked to a deal type offered washing doesn't exist anymore\n    \"\"\"\n    promocode = self.any_promocode(profile=promocode_profiles.v2_offered_wp, version=2)\n    cart = self.any_cart(state=cart_states.active, with_promocode=True, promo_code=promocode)\n\n    cart.update(promocode=None)\n\n    assert_that(cart.offered_cartitems, empty())",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 5.0
    },
    "id": 182,
    "score": "5",
    "annotator": 1,
    "annotation_id": 182,
    "created_at": "2025-10-27T15:30:12.045733Z",
    "updated_at": "2025-10-27T15:30:12.045745Z",
    "lead_time": 39.643,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/tests/request_action/test_framed.py:FramedRequestActionTests.test_submit_error__steps_errors_not_visible",
    "text": "def test_submit_error__steps_errors_not_visible(self) -> None:\n    \"\"\"\n    Given a request ready to submit\n    When I post with an error in request action forms\n    Then form is in error but request update steps errors is not visible\n    \"\"\"\n    request = self.any_framed_request(state=request_states.draft, creator=self.client.user)\n    with self.assertRaises(RequestActionPage.RequestForm.Error) as em:\n        RequestActionPage.get(client=self.client, site_slug=request.site.slug, pk=request.pk).form.submit(\n            data={\"references-identifier\": \"\"}\n        )\n    request_update_step_errors_div = em.exception.soup.find(\n        \"div\", attrs={\"id\": \"request_update_step_forms_errors\"}\n    )\n    assert_that(request_update_step_errors_div, none())",
    "metrics": {
      "line_count": 5,
      "assertion_count": 2,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 77,
      "docstring_strength": 4.0
    },
    "id": 183,
    "score": "5",
    "annotator": 1,
    "annotation_id": 183,
    "created_at": "2025-10-27T15:30:37.833220Z",
    "updated_at": "2025-10-27T15:30:37.833235Z",
    "lead_time": 25.63,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/vehicles/api/v41/tests/test_api.py:VehicleModelAPITestCase.test_list_vehicle_models_is_frauder_by_admin",
    "text": "def test_list_vehicle_models_is_frauder_by_admin(self) -> None:\n    self.client = AuthenticatedClient()\n    self.client.user.is_frauder = True\n    self.client.user.frauder_reason = frauder_reasons.by_admin\n    self.client.user.last_frauder_update = timezone.now()\n    vehicle_model = self.any_vehicle_model()\n    self.when_i_list_vehicle_model(brand_pk=vehicle_model.vehicle_brand.pk)\n\n    assert_that(self.last_response, http(403))\n    assert_that(\n        self.last_response.json(),\n        has_entry(\n            \"detail\",\n            \"\"\"Par mesure de sécurité, votre compte a été suspendu. \\nSi vous souhaitez le réactiver, vous pouvez nous contacter via la rubrique “A propos” > “Aide et suggestions” de l’application.\"\"\",  # noqa\",\n        ),\n    )",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 184,
    "score": "3",
    "annotator": 1,
    "annotation_id": 184,
    "created_at": "2025-10-27T15:31:19.701846Z",
    "updated_at": "2025-10-27T15:31:19.701862Z",
    "lead_time": 41.694,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter_additional_quote_quantity_1_framed",
    "text": "def test_request_formatter_additional_quote_quantity_1_framed(self) -> None:\n    \"\"\"\n    Given a framed request\n    When I use RequestFormatter with 'additional_quote_quantity_1' field to export\n    Then it return a dict that contain request additional_quote_quantity_1\n    \"\"\"\n    request = self.any_framed_request()\n    request_csv = RequestFormatter().to_csv(request, fields=[\"additional_quote_quantity_1\"])\n    assert_that(request_csv[0], is_(empty()))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 185,
    "score": "5",
    "annotator": 1,
    "annotation_id": 185,
    "created_at": "2025-10-27T15:32:13.504621Z",
    "updated_at": "2025-10-27T15:32:13.504632Z",
    "lead_time": 53.629,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/honeywell/drivers/tests/test_panel_status_driver.py:UpdateTests.test_update__remote_control",
    "text": "@override_settings(CACHES=TEST_NO_CACHES, DISABLE_REDLOCK=True)\n@vcr.use_cassette()\ndef test_update__remote_control(self) -> None:\n    \"\"\"\n    Given:\n        - an Hss with Honeywell panel\n        - a HssDriver\n        - a status set to on\n    When:\n        - I update status\n    Then:\n        - I get no error\n    \"\"\"\n    for status in [HssStatus.ON, HssStatus.OFF, HssStatus.PARTIAL]:\n        with self.subTest(status=status):\n            hss = self.any_hss(remote_proxy=remote_proxies.honeywell)\n            driver = driver_factory.get_driver(hss)\n            driver.status.update(new_status=HssStatus.OFF, code=\"1001\")\n\n            updated_status = driver.status.update_remote_control(\n                new_status=status, firstname=\"test\", lastname=\"test\"\n            )\n            assert_that(updated_status, is_(status))",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 2,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 9.0
    },
    "id": 186,
    "score": "3",
    "annotator": 1,
    "annotation_id": 186,
    "created_at": "2025-10-27T15:32:34.632648Z",
    "updated_at": "2025-10-27T15:32:34.632664Z",
    "lead_time": 20.974,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/serializers/tests/test_powerswitches.py:ListResponseSerializerTests.test_serializer__null_values",
    "text": "def test_serializer__null_values(self) -> None:\n    climax_powerswitches_json = load(\"climax_panel_device_list_pss_get.json\")\n    climax_powerswitches_json[\"devices\"][\"pss\"][0][\"id2\"] = None\n    hss = self.any_hss()\n    serializer = ListResponseSerializer(data=climax_powerswitches_json)\n    serializer.is_valid(raise_exception=True)\n    powerswitches = serializer.save(hss=hss)\n    assert_that(powerswitches, not_none())",
    "metrics": {
      "line_count": 7,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 42,
      "docstring_strength": 0.0
    },
    "id": 187,
    "score": "3",
    "annotator": 1,
    "annotation_id": 187,
    "created_at": "2025-10-27T15:33:32.837651Z",
    "updated_at": "2025-10-27T15:33:32.837665Z",
    "lead_time": 58.047,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/essentielle/tests/test_models.py:CaptureTests.test_from_generic",
    "text": "def test_from_generic(self) -> None:\n    capture = self.any_local_essentielle_capture()\n    assert_that(Capture.objects.from_generic(capture.to_generic()), is_(capture))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 54,
      "docstring_strength": 0.0
    },
    "id": 188,
    "score": "3",
    "annotator": 1,
    "annotation_id": 188,
    "created_at": "2025-10-27T15:33:51.299831Z",
    "updated_at": "2025-10-27T15:33:51.299848Z",
    "lead_time": 18.306,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/amqp/tests/test_amqp.py:ConsumerTests.test_consumer__equipment_add_code",
    "text": "def test_consumer__equipment_add_code(self) -> None:\n    broker_url = settings.IMA_BROKER_URL_EQUIPMENT\n    equipment_queue = queues.equipment_add_code\n\n    self.generate_change(broker_url=broker_url, queue=equipment_queue, body={\"Prom\": \"123456\"})\n\n    event = self.consume_event(broker_url=broker_url, event=events.equipment_add_code, queue=equipment_queue)\n\n    assert_that(event, has_property(\"state\", event_states.pending))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 39,
      "docstring_strength": 0.0
    },
    "id": 189,
    "score": "3",
    "annotator": 1,
    "annotation_id": 189,
    "created_at": "2025-10-27T15:34:10.665952Z",
    "updated_at": "2025-10-27T15:34:10.665964Z",
    "lead_time": 19.21,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/www/request_export/tests/test_formatter.py:RequestFormatterTest.test_request_formatter__merchandise_departure",
    "text": "def test_request_formatter__merchandise_departure(self) -> None:\n    \"\"\"\n    Given a request\n    When I use RequestFormatter with 'merchandise_departure' field to export\n    Then it returns a dict that contains the request's merchandise departure date and time\n    \"\"\"\n    request = self.any_request(state=request_states.in_progress)\n    for status in [\n        shipping_record_status.pickup_in_progress,\n        shipping_record_status.picked_up,\n        shipping_record_status.in_transit,\n    ]:\n        with self.subTest(status=status):\n            sr = request.shipping_records.first()\n            data = self.any_status_data(shipping_record=sr, status=status)\n            with handle_shipping_record_notifications():\n                sr.update_status(data)\n            sr.refresh_from_db()\n            request_csv = RequestFormatter().to_csv(request, fields=[\"merchandise_departure\"])\n            statuses = sr.status_history\n            last_status = [find_status for find_status in statuses if find_status.value == status]\n\n            time = (\n                last_status[0].notification_time.astimezone(settings.EUROPE_PARIS_ZI).strftime(\"%Y-%m-%d %H:%M:%S\")\n                if last_status\n                else \"\"\n            )\n            assert_that(request_csv[0], is_(time))",
    "metrics": {
      "line_count": 13,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 5,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 78,
      "docstring_strength": 4.0
    },
    "id": 190,
    "score": "4",
    "annotator": 1,
    "annotation_id": 190,
    "created_at": "2025-10-27T15:34:46.601369Z",
    "updated_at": "2025-10-27T15:34:46.601384Z",
    "lead_time": 35.782,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "mobileproxy:src/ima/imt/tests/test_driver.py:ReadContractTests.test_read_contract__http_error",
    "text": "@vcr.use_cassette()\ndef test_read_contract__http_error(self) -> None:\n    \"\"\"\n    Given an IMTDriver & & a valid user & a valid contract\n    When I read contract With an http error response\n    Then I get an IMTDriver excption\n    \"\"\"\n    with mock.patch.object(Response, \"raise_for_status\", side_effect=HTTPError):  # noqa: RMS102\n        assert_that(\n            calling(self.driver.read_contract).with_args(contract=self.contract), raises(IMTDriverException)\n        )",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 1,
      "duplicate_code": 0,
      "dc_coherence_codet5": 74,
      "docstring_strength": 4.0
    },
    "id": 191,
    "score": "1",
    "annotator": 1,
    "annotation_id": 191,
    "created_at": "2025-10-27T15:34:59.254592Z",
    "updated_at": "2025-10-27T15:34:59.254607Z",
    "lead_time": 8.633,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/accounts/api/v90/tests/test_api_login.py:LoginAPITestCase.test_login_anonymous__with_same_nonce",
    "text": "def test_login_anonymous__with_same_nonce(self) -> None:\n    cache.delete(\"nonce.used.same_nonce\")\n    self.any_default_promocode()\n    consumer = self.any_consumer()\n    self.client = SignedKleenClient(consumer=consumer, nonce=\"same_nonce\")\n\n    self.when_i_login_anonymously(api_key=self.client.consumer.key)\n    assert_that(self.last_response, http(200))\n\n    self.when_i_login_anonymously(api_key=self.client.consumer.key)\n    assert_that(self.last_response, http(403))",
    "metrics": {
      "line_count": 8,
      "assertion_count": 2,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 12,
      "dc_coherence_codet5": 44,
      "docstring_strength": 0.0
    },
    "id": 192,
    "score": "3",
    "annotator": 1,
    "annotation_id": 192,
    "created_at": "2025-10-27T15:35:24.836606Z",
    "updated_at": "2025-10-27T15:35:24.836625Z",
    "lead_time": 25.426,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/api/v70/tests/promocodes/test_api_promocode.py:PromocodeSearchAPITestCase.test_find_promocode_with_promocode_prefix_active",
    "text": "@override_settings(USE_PROMOCODE_PREFIX_NF0=True)\ndef test_find_promocode_with_promocode_prefix_active(self) -> None:\n    \"\"\"\n    Given a\n        cart\n        promocode with an NF0 code\n        settings USE_PROMOCODE_PREFIX_NF0 active\n    When I search for a promocode with only the number after NF0 from the code\n    Then I find it and I get an http response with a status code 200\n    \"\"\"\n    self.client = AuthenticatedClient()\n    self.any_promocode(\n        version=2,\n        profile=promocode_profiles.v2_first_credits_pack_purchase,\n        code=\"NF099225\",\n    )\n    cart = self.any_cart(state=cart_states.active, api_version=API_VERSION)\n    # Provide only what is after NF0\n    self.when_i_search_promocode(cart=cart, code=\"99225\")\n\n    assert_that(self.last_response, http(200))",
    "metrics": {
      "line_count": 5,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 1,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 85,
      "docstring_strength": 7.0
    },
    "id": 193,
    "score": "4",
    "annotator": 1,
    "annotation_id": 193,
    "created_at": "2025-10-27T15:36:58.122130Z",
    "updated_at": "2025-10-27T15:37:09.757231Z",
    "lead_time": 102.68100000000001,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/filters/tests/test_models.py:FilterModelTestCase.test_models__update_request_filter_model_advanced",
    "text": "def test_models__update_request_filter_model_advanced(self) -> None:\n    \"\"\"\n    Given:\n        - any site\n        - 2 users\n        - 2 teams on same site associate to the 2 users\n        - 2 filters (RequestFilterModel) associated to respectively the first and the second user\n        - any event team_users_changed event on filtered teams that remove user1 from team1\n    When I load event\n    Then filter (RequestFilterModel) teams are updated :\n        - The filter1 contains the teams2\n        - The filter2 contains the team1 and the team2\n    \"\"\"\n    site = self.any_site()\n    user1 = self.any_user(sites=[site.uuid])\n    user2 = self.any_user(sites=[site.uuid])\n    user3 = self.any_user(sites=[site.uuid])\n    team1 = self.any_team(site=site, with_users=[user1, user2, user3], name=\"team1\")\n    team2 = self.any_team(site=site, with_users=[user1, user2, user3], name=\"team2\")\n    filter1 = self.any_request_filter(creator=user1, with_teams=[team1, team2])\n    filter2 = self.any_request_filter(creator=user2, with_teams=[team1, team2])\n    filter3 = self.any_request_filter(creator=user3, with_teams=[team1, team2])\n    event = self.any_users_changed_event(team=team1, with_users=[user2, user3])\n    UsersChangedEventLoader().as_instance(message=event)\n    filter1.refresh_from_db()\n    filter2.refresh_from_db()\n    assert_that(filter1.teams, only_contains(*[str(team2.uuid)]))\n    assert_that(filter2.teams, only_contains(*[str(team1.uuid), str(team2.uuid)]))\n    assert_that(filter3.teams, only_contains(*[str(team1.uuid), str(team2.uuid)]))",
    "metrics": {
      "line_count": 16,
      "assertion_count": 3,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 82,
      "docstring_strength": 11.0
    },
    "id": 194,
    "score": "3",
    "annotator": 1,
    "annotation_id": 194,
    "created_at": "2025-10-27T15:38:30.020519Z",
    "updated_at": "2025-10-27T15:38:30.020535Z",
    "lead_time": 76.553,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/test/test_specification_base.py:SpecificationTests.test_call",
    "text": "def test_call(self) -> None:\n    spec = SpecificationA()\n    assert_that(spec(None), is_(True))",
    "metrics": {
      "line_count": 2,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 61,
      "docstring_strength": 0.0
    },
    "id": 195,
    "score": "3",
    "annotator": 1,
    "annotation_id": 195,
    "created_at": "2025-10-27T15:38:39.661928Z",
    "updated_at": "2025-10-27T15:38:39.661937Z",
    "lead_time": 9.473,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "tw-kleen-api:src/payline/tests/test_transaction_duplicate.py:TransactionDuplicateTestCase.test_transaction_duplicating__to_duplicate_failed",
    "text": "def test_transaction_duplicating__to_duplicate_failed(self) -> None:\n    payline_user = self.any_payline_user(with_card=False)\n    transaction = self.any_transaction(payline_user=payline_user, state=transaction_states.succeeded)\n    payline_user.card_token = \"invalid_token\"\n    payline_user.card_expiration_date = \"0519\"\n    payline_user.save()\n\n    transaction.duplicate()\n    transaction.wait_for_completion(waiting_states=transaction_states.duplicate_final)\n\n    assert_that(transaction.state, is_(transaction_states.duplicate_failed))\n    assert_that(transaction.duplicated_set, not_none())\n    assert_that(transaction.duplicated_set.count(), is_(greater_than(0)))\n\n    duplicated_tr = transaction.duplicated_set.first()\n    assert_that(duplicated_tr.state, is_(transaction_states.failed))",
    "metrics": {
      "line_count": 12,
      "assertion_count": 4,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 41,
      "docstring_strength": 0.0
    },
    "id": 196,
    "score": "3",
    "annotator": 1,
    "annotation_id": 196,
    "created_at": "2025-10-27T15:39:34.299285Z",
    "updated_at": "2025-10-27T15:39:34.299296Z",
    "lead_time": 54.505,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  },
  {
    "identifier": "mobileproxy:src/proxy/automation/api/v60/tests/test_serializers.py:UpdateIRDetectorSerializerTests.test_serializer_update_name",
    "text": "def test_serializer_update_name(self) -> None:\n    data = {\"name\": \"updated name\"}\n    serializer = UpdateIRDetectorSerializer(data=data)\n    serializer.is_valid(raise_exception=True)\n    assert_that(serializer.data[\"name\"], is_(\"updated name\"))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 47,
      "docstring_strength": 0.0
    },
    "id": 197,
    "score": "3",
    "annotator": 1,
    "annotation_id": 197,
    "created_at": "2025-10-27T15:39:47.732362Z",
    "updated_at": "2025-10-27T15:39:47.732374Z",
    "lead_time": 13.292,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "mobileproxy:src/ima/drivers/tests/test_driver_model.py:KeypadDriverModelTestCase.test_update_not_implemented",
    "text": "def test_update_not_implemented(self) -> None:\n    hss = self.any_hss()\n    driver = KeypadDriver(hss)\n    with self.assertRaises(NotImplementedError):\n        driver.update_name(device_id=\"\", new_name=\"\")",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 48,
      "docstring_strength": 0.0
    },
    "id": 198,
    "score": "3",
    "annotator": 1,
    "annotation_id": 198,
    "created_at": "2025-10-27T15:39:54.731872Z",
    "updated_at": "2025-10-27T15:39:54.731882Z",
    "lead_time": 6.853,
    "commit_hash": "c24581355a88c40b83f2411195462e258471a468"
  },
  {
    "identifier": "idea-iwp-myroad:src/iwp_myroad/requests/tests/models/test_request.py:RequestCommentTest.test_comment__refused_quote__only_in_history",
    "text": "def test_comment__refused_quote__only_in_history(self) -> None:\n    \"\"\"\n    Given a status refused_quote with a request having no refuse quote reason\n    When i call reason\n    Then it is none\n    \"\"\"\n    request = self.any_quoted_request(state=request_states.tms_transmission, refused_by_tms=True)\n    comment = request.comment\n    assert_that(comment, is_(none()))",
    "metrics": {
      "line_count": 3,
      "assertion_count": 1,
      "has_docstring": 1,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 76,
      "docstring_strength": 4.0
    },
    "id": 199,
    "score": "5",
    "annotator": 1,
    "annotation_id": 199,
    "created_at": "2025-10-27T15:40:06.738762Z",
    "updated_at": "2025-10-27T15:40:06.738780Z",
    "lead_time": 11.859,
    "commit_hash": "2aa142920da95d3bd35a4f97cff7eee3ef5cd4ad"
  },
  {
    "identifier": "tw-kleen-api:src/kleen/carwash/tests/promocodes/v2/test_validation_backends.py:ValidationBackendsTests.test_promo_code_promotion__valid_once",
    "text": "def test_promo_code_promotion__valid_once(self) -> None:\n    backend = ValidOncePromotion()\n    cart = self.any_cart(\n        state=cart_states.active,\n        profile=cart_profiles.deal_washing,\n        deal=self.washing_deal_tmf,\n    )\n    promo_code = self.promo_code_1\n    assert_that(backend.validate(promo_code, cart), is_(True))",
    "metrics": {
      "line_count": 4,
      "assertion_count": 1,
      "has_docstring": 0,
      "comment_count": 0,
      "cyclomatic_complexity": 1,
      "has_mocks": 0,
      "duplicate_code": 0,
      "dc_coherence_codet5": 40,
      "docstring_strength": 0.0
    },
    "id": 200,
    "score": "3",
    "annotator": 1,
    "annotation_id": 200,
    "created_at": "2025-10-27T15:40:17.704349Z",
    "updated_at": "2025-10-27T15:40:17.704367Z",
    "lead_time": 10.794,
    "commit_hash": "09cbe8fa8049f5ab82a3801d6fa5d70f06930f8a"
  }
]